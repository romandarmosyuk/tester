var TM=Object.defineProperty,SM=Object.defineProperties;var AM=Object.getOwnPropertyDescriptors;var Tw=Object.getOwnPropertySymbols,RM=Object.getPrototypeOf,MM=Object.prototype.hasOwnProperty,xM=Object.prototype.propertyIsEnumerable,NM=Reflect.get;var Sw=(n,e,t)=>e in n?TM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,F=(n,e)=>{for(var t in e||={})MM.call(e,t)&&Sw(n,t,e[t]);if(Tw)for(var t of Tw(e))xM.call(e,t)&&Sw(n,t,e[t]);return n},ce=(n,e)=>SM(n,AM(e));var Er=(n,e,t)=>NM(RM(n),t,e);var v=(n,e,t)=>new Promise((r,i)=>{var o=c=>{try{a(t.next(c))}catch(l){i(l)}},s=c=>{try{a(t.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((t=t.apply(n,e)).next())});function Aw(n,e){return Object.is(n,e)}var Ke=null,Ic=!1,wc=1,Gn=Symbol("SIGNAL");function _e(n){let e=Ke;return Ke=n,e}function Rw(){return Ke}var wa={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function kf(n){if(Ic)throw new Error("");if(Ke===null)return;Ke.consumerOnSignalRead(n);let e=Ke.nextProducerIndex++;if(bc(Ke),e<Ke.producerNode.length&&Ke.producerNode[e]!==n&&Ia(Ke)){let t=Ke.producerNode[e];Dc(t,Ke.producerIndexOfThis[e])}Ke.producerNode[e]!==n&&(Ke.producerNode[e]=n,Ke.producerIndexOfThis[e]=Ia(Ke)?Pw(n,Ke,e):0),Ke.producerLastReadVersion[e]=n.version}function PM(){wc++}function Mw(n){if(!(Ia(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===wc)){if(!n.producerMustRecompute(n)&&!Vf(n)){n.dirty=!1,n.lastCleanEpoch=wc;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=wc}}function xw(n){if(n.liveConsumerNode===void 0)return;let e=Ic;Ic=!0;try{for(let t of n.liveConsumerNode)t.dirty||OM(t)}finally{Ic=e}}function Nw(){return Ke?.consumerAllowSignalWrites!==!1}function OM(n){n.dirty=!0,xw(n),n.consumerMarkedDirty?.(n)}function Cc(n){return n&&(n.nextProducerIndex=0),_e(n)}function Ff(n,e){if(_e(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Ia(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Dc(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Vf(n){bc(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Mw(t),r!==t.version))return!0}return!1}function Lf(n){if(bc(n),Ia(n))for(let e=0;e<n.producerNode.length;e++)Dc(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Pw(n,e,t){if(Ow(n),n.liveConsumerNode.length===0&&kw(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=Pw(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Dc(n,e){if(Ow(n),n.liveConsumerNode.length===1&&kw(n))for(let r=0;r<n.producerNode.length;r++)Dc(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];bc(i),i.producerIndexOfThis[r]=e}}function Ia(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function bc(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Ow(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function kw(n){return n.producerNode!==void 0}function Fw(n){let e=Object.create(kM);e.computation=n;let t=()=>{if(Mw(e),kf(e),e.value===Ec)throw e.error;return e.value};return t[Gn]=e,t}var Pf=Symbol("UNSET"),Of=Symbol("COMPUTING"),Ec=Symbol("ERRORED"),kM=ce(F({},wa),{value:Pf,dirty:!0,error:null,equal:Aw,producerMustRecompute(n){return n.value===Pf||n.value===Of},producerRecomputeValue(n){if(n.value===Of)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Of;let t=Cc(n),r;try{r=n.computation()}catch(i){r=Ec,n.error=i}finally{Ff(n,t)}if(e!==Pf&&e!==Ec&&r!==Ec&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function FM(){throw new Error}var Vw=FM;function Lw(){Vw()}function jw(n){Vw=n}var VM=null;function Uw(n){let e=Object.create($w);e.value=n;let t=()=>(kf(e),e.value);return t[Gn]=e,t}function jf(n,e){Nw()||Lw(),n.equal(n.value,e)||(n.value=e,LM(n))}function Bw(n,e){Nw()||Lw(),jf(n,e(n.value))}var $w=ce(F({},wa),{equal:Aw,value:void 0});function LM(n){n.version++,PM(),xw(n),VM?.()}function re(n){return typeof n=="function"}function ho(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Tc=ho(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function vi(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ve=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(re(r))try{r()}catch(o){e=o instanceof Tc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Hw(o)}catch(s){e=e??[],s instanceof Tc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Tc(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Hw(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&vi(t,e)}remove(e){let{_finalizers:t}=this;t&&vi(t,e),e instanceof n&&e._removeParent(this)}};Ve.EMPTY=(()=>{let n=new Ve;return n.closed=!0,n})();var Uf=Ve.EMPTY;function Sc(n){return n instanceof Ve||n&&"closed"in n&&re(n.remove)&&re(n.add)&&re(n.unsubscribe)}function Hw(n){re(n)?n():n.unsubscribe()}var nn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var fo={setTimeout(n,e,...t){let{delegate:r}=fo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=fo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ac(n){fo.setTimeout(()=>{let{onUnhandledError:e}=nn;if(e)e(n);else throw n})}function Ea(){}var zw=Bf("C",void 0,void 0);function qw(n){return Bf("E",void 0,n)}function Gw(n){return Bf("N",n,void 0)}function Bf(n,e,t){return{kind:n,value:e,error:t}}var _i=null;function po(n){if(nn.useDeprecatedSynchronousErrorHandling){let e=!_i;if(e&&(_i={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=_i;if(_i=null,t)throw r}}else n()}function Ww(n){nn.useDeprecatedSynchronousErrorHandling&&_i&&(_i.errorThrown=!0,_i.error=n)}var Ii=class extends Ve{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Sc(e)&&e.add(this)):this.destination=BM}static create(e,t,r){return new go(e,t,r)}next(e){this.isStopped?Hf(Gw(e),this):this._next(e)}error(e){this.isStopped?Hf(qw(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Hf(zw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},jM=Function.prototype.bind;function $f(n,e){return jM.call(n,e)}var zf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Rc(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Rc(r)}else Rc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Rc(t)}}},go=class extends Ii{constructor(e,t,r){super();let i;if(re(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&nn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&$f(e.next,o),error:e.error&&$f(e.error,o),complete:e.complete&&$f(e.complete,o)}):i=e}this.destination=new zf(i)}};function Rc(n){nn.useDeprecatedSynchronousErrorHandling?Ww(n):Ac(n)}function UM(n){throw n}function Hf(n,e){let{onStoppedNotification:t}=nn;t&&fo.setTimeout(()=>t(n,e))}var BM={closed:!0,next:Ea,error:UM,complete:Ea};var mo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Vt(n){return n}function qf(...n){return Gf(n)}function Gf(n){return n.length===0?Vt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var he=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=HM(t)?t:new go(t,r,i);return po(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Kw(r),new r((i,o)=>{let s=new go({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[mo](){return this}pipe(...t){return Gf(t)(this)}toPromise(t){return t=Kw(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function Kw(n){var e;return(e=n??nn.Promise)!==null&&e!==void 0?e:Promise}function $M(n){return n&&re(n.next)&&re(n.error)&&re(n.complete)}function HM(n){return n&&n instanceof Ii||$M(n)&&Sc(n)}function Wf(n){return re(n?.lift)}function ye(n){return e=>{if(Wf(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function fe(n,e,t,r,i){return new Kf(n,e,t,r,i)}var Kf=class extends Ii{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function yo(){return ye((n,e)=>{let t=null;n._refCount++;let r=fe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var vo=class extends he{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Wf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ve;let t=this.getSubject();e.add(this.source.subscribe(fe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ve.EMPTY)}return e}refCount(){return yo()(this)}};var Qw=ho(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Xe=(()=>{class n extends he{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Mc(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Qw}next(t){po(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){po(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){po(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Uf:(this.currentObservers=null,o.push(t),new Ve(()=>{this.currentObservers=null,vi(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new he;return t.source=this,t}}return n.create=(e,t)=>new Mc(e,t),n})(),Mc=class extends Xe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Uf}};var Qe=class extends Xe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Qf={now(){return(Qf.delegate||Date).now()},delegate:void 0};var xc=class extends Ve{constructor(e,t){super()}schedule(e,t=0){return this}};var Ca={setInterval(n,e,...t){let{delegate:r}=Ca;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Ca;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var _o=class extends xc{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Ca.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Ca.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,vi(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Io=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Io.now=Qf.now;var wo=class extends Io{constructor(e,t=Io.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Yf=new wo(_o);var Nc=class extends _o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Pc=class extends wo{};var Zf=new Pc(Nc);var Lt=new he(n=>n.complete());function Yw(n){return n&&re(n.schedule)}function Zw(n){return n[n.length-1]}function Oc(n){return re(Zw(n))?n.pop():void 0}function Cr(n){return Yw(Zw(n))?n.pop():void 0}function Jf(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Xw(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function c(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function Jw(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function wi(n){return this instanceof wi?(this.v=n,this):new wi(n)}function eE(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(w){return function(S){return Promise.resolve(S).then(w,p)}}function a(w,S){r[w]&&(i[w]=function(x){return new Promise(function(M,j){o.push([w,x,M,j])>1||c(w,x)})},S&&(i[w]=S(i[w])))}function c(w,S){try{l(r[w](S))}catch(x){y(o[0][3],x)}}function l(w){w.value instanceof wi?Promise.resolve(w.value.v).then(h,p):y(o[0][2],w)}function h(w){c("next",w)}function p(w){c("throw",w)}function y(w,S){w(S),o.shift(),o.length&&c(o[0][0],o[0][1])}}function tE(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Jw=="function"?Jw(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var kc=n=>n&&typeof n.length=="number"&&typeof n!="function";function Fc(n){return re(n?.then)}function Vc(n){return re(n[mo])}function Lc(n){return Symbol.asyncIterator&&re(n?.[Symbol.asyncIterator])}function jc(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function zM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Uc=zM();function Bc(n){return re(n?.[Uc])}function $c(n){return eE(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield wi(t.read());if(i)return yield wi(void 0);yield yield wi(r)}}finally{t.releaseLock()}})}function Hc(n){return re(n?.getReader)}function Be(n){if(n instanceof he)return n;if(n!=null){if(Vc(n))return qM(n);if(kc(n))return GM(n);if(Fc(n))return WM(n);if(Lc(n))return nE(n);if(Bc(n))return KM(n);if(Hc(n))return QM(n)}throw jc(n)}function qM(n){return new he(e=>{let t=n[mo]();if(re(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function GM(n){return new he(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function WM(n){return new he(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ac)})}function KM(n){return new he(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function nE(n){return new he(e=>{YM(n,e).catch(t=>e.error(t))})}function QM(n){return nE($c(n))}function YM(n,e){var t,r,i,o;return Xw(this,void 0,void 0,function*(){try{for(t=tE(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function xt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Dr(n,e=0){return ye((t,r)=>{t.subscribe(fe(r,i=>xt(r,n,()=>r.next(i),e),()=>xt(r,n,()=>r.complete(),e),i=>xt(r,n,()=>r.error(i),e)))})}function br(n,e=0){return ye((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function rE(n,e){return Be(n).pipe(br(e),Dr(e))}function iE(n,e){return Be(n).pipe(br(e),Dr(e))}function oE(n,e){return new he(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function sE(n,e){return new he(t=>{let r;return xt(t,e,()=>{r=n[Uc](),xt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>re(r?.return)&&r.return()})}function zc(n,e){if(!n)throw new Error("Iterable cannot be null");return new he(t=>{xt(t,e,()=>{let r=n[Symbol.asyncIterator]();xt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function aE(n,e){return zc($c(n),e)}function uE(n,e){if(n!=null){if(Vc(n))return rE(n,e);if(kc(n))return oE(n,e);if(Fc(n))return iE(n,e);if(Lc(n))return zc(n,e);if(Bc(n))return sE(n,e);if(Hc(n))return aE(n,e)}throw jc(n)}function Ne(n,e){return e?uE(n,e):Be(n)}function Z(...n){let e=Cr(n);return Ne(n,e)}function Eo(n,e){let t=re(n)?n:()=>n,r=i=>i.error(t());return new he(e?i=>e.schedule(r,0,i):r)}function Xf(n){return!!n&&(n instanceof he||re(n.lift)&&re(n.subscribe))}var Wn=ho(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function se(n,e){return ye((t,r)=>{let i=0;t.subscribe(fe(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:ZM}=Array;function JM(n,e){return ZM(e)?n(...e):n(e)}function qc(n){return se(e=>JM(n,e))}var{isArray:XM}=Array,{getPrototypeOf:ex,prototype:tx,keys:nx}=Object;function Gc(n){if(n.length===1){let e=n[0];if(XM(e))return{args:e,keys:null};if(rx(e)){let t=nx(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function rx(n){return n&&typeof n=="object"&&ex(n)===tx}function Wc(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Da(...n){let e=Cr(n),t=Oc(n),{args:r,keys:i}=Gc(n);if(r.length===0)return Ne([],e);let o=new he(ix(r,e,i?s=>Wc(i,s):Vt));return t?o.pipe(qc(t)):o}function ix(n,e,t=Vt){return r=>{cE(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)cE(e,()=>{let l=Ne(n[c],e),h=!1;l.subscribe(fe(r,p=>{o[c]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function cE(n,e,t){n?xt(t,n,e):e()}function lE(n,e,t,r,i,o,s,a){let c=[],l=0,h=0,p=!1,y=()=>{p&&!c.length&&!l&&e.complete()},w=x=>l<r?S(x):c.push(x),S=x=>{o&&e.next(x),l++;let M=!1;Be(t(x,h++)).subscribe(fe(e,j=>{i?.(j),o?w(j):e.next(j)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;c.length&&l<r;){let j=c.shift();s?xt(e,s,()=>S(j)):S(j)}y()}catch(j){e.error(j)}}))};return n.subscribe(fe(e,w,()=>{p=!0,y()})),()=>{a?.()}}function $e(n,e,t=1/0){return re(e)?$e((r,i)=>se((o,s)=>e(r,o,i,s))(Be(n(r,i))),t):(typeof e=="number"&&(t=e),ye((r,i)=>lE(r,i,n,t)))}function Co(n=1/0){return $e(Vt,n)}function dE(){return Co(1)}function Do(...n){return dE()(Ne(n,Cr(n)))}function Kc(n){return new he(e=>{Be(n()).subscribe(e)})}function ep(...n){let e=Oc(n),{args:t,keys:r}=Gc(n),i=new he(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let h=0;h<s;h++){let p=!1;Be(t[h]).subscribe(fe(o,y=>{p||(p=!0,l--),a[h]=y},()=>c--,void 0,()=>{(!c||!p)&&(l||o.next(r?Wc(r,a):a),o.complete())}))}});return e?i.pipe(qc(e)):i}function qt(n,e){return ye((t,r)=>{let i=0;t.subscribe(fe(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Tr(n){return ye((e,t)=>{let r=null,i=!1,o;r=e.subscribe(fe(t,void 0,void 0,s=>{o=Be(n(s,Tr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function hE(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(fe(s,h=>{let p=l++;c=a?n(c,h,p):(a=!0,h),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Ei(n,e){return re(e)?$e(n,e,1):$e(n,1)}function Sr(n){return ye((e,t)=>{let r=!1;e.subscribe(fe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function rn(n){return n<=0?()=>Lt:ye((e,t)=>{let r=0;e.subscribe(fe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function tp(n){return se(()=>n)}function Qc(n=ox){return ye((e,t)=>{let r=!1;e.subscribe(fe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function ox(){return new Wn}function ba(n){return ye((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function mn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?qt((i,o)=>n(i,o,r)):Vt,rn(1),t?Sr(e):Qc(()=>new Wn))}function bo(n){return n<=0?()=>Lt:ye((e,t)=>{let r=[];e.subscribe(fe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function np(n,e){let t=arguments.length>=2;return r=>r.pipe(n?qt((i,o)=>n(i,o,r)):Vt,bo(1),t?Sr(e):Qc(()=>new Wn))}function rp(n,e){return ye(hE(n,e,arguments.length>=2,!0))}function ip(...n){let e=Cr(n);return ye((t,r)=>{(e?Do(n,t,e):Do(n,t)).subscribe(r)})}function Gt(n,e){return ye((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(fe(r,c=>{i?.unsubscribe();let l=0,h=o++;Be(n(c,h)).subscribe(i=fe(r,p=>r.next(e?e(c,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function op(n){return ye((e,t)=>{Be(n).subscribe(fe(t,()=>t.complete(),Ea)),!t.closed&&e.subscribe(t)})}function Ye(n,e,t){let r=re(n)||e||t?{next:n,error:e,complete:t}:n;return r?ye((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(fe(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Vt}var ZE="https://g.co/ng/security#xss",z=class extends Error{constructor(e,t){super(cg(e,t)),this.code=e}};function cg(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Oa(n){return{toString:n}.toString()}var Yc="__parameters__";function sx(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function JE(n,e,t){return Oa(()=>{let r=sx(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,h){let p=c.hasOwnProperty(Yc)?c[Yc]:Object.defineProperty(c,Yc,{value:[]})[Yc];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var _p=globalThis;function Re(n){for(let e in n)if(n[e]===Re)return e;throw Error("Could not find renamed property on target object.")}function ax(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Dt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Dt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function fE(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var ux=Re({__forward_ref__:Re});function Vr(n){return n.__forward_ref__=Vr,n.toString=function(){return Dt(this())},n}function Ct(n){return XE(n)?n():n}function XE(n){return typeof n=="function"&&n.hasOwnProperty(ux)&&n.__forward_ref__===Vr}function H(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Lr(n){return{providers:n.providers||[],imports:n.imports||[]}}function xl(n){return pE(n,t0)||pE(n,n0)}function e0(n){return xl(n)!==null}function pE(n,e){return n.hasOwnProperty(e)?n[e]:null}function cx(n){let e=n&&(n[t0]||n[n0]);return e||null}function gE(n){return n&&(n.hasOwnProperty(mE)||n.hasOwnProperty(lx))?n[mE]:null}var t0=Re({\u0275prov:Re}),mE=Re({\u0275inj:Re}),n0=Re({ngInjectableDef:Re}),lx=Re({ngInjectorDef:Re}),q=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=H({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function r0(n){return n&&!!n.\u0275providers}var dx=Re({\u0275cmp:Re}),hx=Re({\u0275dir:Re}),fx=Re({\u0275pipe:Re}),px=Re({\u0275mod:Re}),sl=Re({\u0275fac:Re}),Sa=Re({__NG_ELEMENT_ID__:Re}),yE=Re({__NG_ENV_ID__:Re});function No(n){return typeof n=="string"?n:n==null?"":String(n)}function gx(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():No(n)}function mx(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new z(-200,n)}function lg(n,e){throw new z(-201,!1)}var ae=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ae||{}),Ip;function i0(){return Ip}function Nt(n){let e=Ip;return Ip=n,e}function o0(n,e,t){let r=xl(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ae.Optional)return null;if(e!==void 0)return e;lg(n,"Injector")}var yx={},Aa=yx,wp="__NG_DI_FLAG__",al="ngTempTokenPath",vx="ngTokenPath",_x=/\n/gm,Ix="\u0275",vE="__source",Mo;function wx(){return Mo}function Ar(n){let e=Mo;return Mo=n,e}function Ex(n,e=ae.Default){if(Mo===void 0)throw new z(-203,!1);return Mo===null?o0(n,void 0,e):Mo.get(n,e&ae.Optional?null:void 0,e)}function Y(n,e=ae.Default){return(i0()||Ex)(Ct(n),e)}function P(n,e=ae.Default){return Y(n,Nl(e))}function Nl(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Ep(n){let e=[];for(let t=0;t<n.length;t++){let r=Ct(n[t]);if(Array.isArray(r)){if(r.length===0)throw new z(900,!1);let i,o=ae.Default;for(let s=0;s<r.length;s++){let a=r[s],c=Cx(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(Y(i,o))}else e.push(Y(r))}return e}function s0(n,e){return n[wp]=e,n.prototype[wp]=e,n}function Cx(n){return n[wp]}function Dx(n,e,t,r){let i=n[al];throw e[vE]&&i.unshift(e[vE]),n.message=bx(`
`+n.message,i,t,r),n[vx]=i,n[al]=null,n}function bx(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==Ix?n.slice(2):n;let i=Dt(e);if(Array.isArray(e))i=e.map(Dt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Dt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(_x,`
  `)}`}var pt=s0(JE("Optional"),8);var dg=s0(JE("SkipSelf"),4);function Di(n,e){let t=n.hasOwnProperty(sl);return t?n[sl]:null}function hg(n,e){n.forEach(t=>Array.isArray(t)?hg(t,e):e(t))}function a0(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ul(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Tx(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function Sx(n,e,t){let r=ka(n,e);return r>=0?n[r|1]=t:(r=~r,Tx(n,r,e,t)),r}function sp(n,e){let t=ka(n,e);if(t>=0)return n[t|1]}function ka(n,e){return Ax(n,e,1)}function Ax(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Po={},Wt=[],Oo=new q(""),u0=new q("",-1),c0=new q(""),cl=class{get(e,t=Aa){if(t===Aa){let r=new Error(`NullInjectorError: No provider for ${Dt(e)}!`);throw r.name="NullInjectorError",r}return t}},l0=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(l0||{}),_n=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(_n||{}),xr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(xr||{});function Rx(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function Cp(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];Mx(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function d0(n){return n===3||n===4||n===6}function Mx(n){return n.charCodeAt(0)===64}function Ra(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?_E(n,t,i,null,e[++r]):_E(n,t,i,null,null))}}return n}function _E(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var h0="ng-template";function xx(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Rx(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(fg(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function fg(n){return n.type===4&&n.value!==h0}function Nx(n,e,t){let r=n.type===4&&!t?h0:n.value;return e===r}function Px(n,e,t){let r=4,i=n.attrs,o=i!==null?Fx(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!on(r)&&!on(c))return!1;if(s&&on(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!Nx(n,c,t)||c===""&&e.length===1){if(on(r))return!1;s=!0}}else if(r&8){if(i===null||!xx(n,i,c,t)){if(on(r))return!1;s=!0}}else{let l=e[++a],h=Ox(c,i,fg(n),t);if(h===-1){if(on(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(on(r))return!1;s=!0}}}}return on(r)||s}function on(n){return(n&1)===0}function Ox(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Vx(e,n)}function kx(n,e,t=!1){for(let r=0;r<e.length;r++)if(Px(n,e[r],t))return!0;return!1}function Fx(n){for(let e=0;e<n.length;e++){let t=n[e];if(d0(t))return e}return n.length}function Vx(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function IE(n,e){return n?":not("+e.trim()+")":e}function Lx(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!on(s)&&(e+=IE(o,i),i=""),r=s,o=o||!on(r);t++}return i!==""&&(e+=IE(o,i)),e}function jx(n){return n.map(Lx).join(",")}function Ux(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!on(i))break;i=o}r++}return{attrs:e,classes:t}}function tt(n){return Oa(()=>{let e=v0(n),t=ce(F({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===l0.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||_n.Emulated,styles:n.styles||Wt,_:null,schemas:n.schemas||null,tView:null,id:""});_0(t);let r=n.dependencies;return t.directiveDefs=EE(r,!1),t.pipeDefs=EE(r,!0),t.id=Hx(t),t})}function Bx(n){return Nr(n)||p0(n)}function $x(n){return n!==null}function jr(n){return Oa(()=>({type:n.type,bootstrap:n.bootstrap||Wt,declarations:n.declarations||Wt,imports:n.imports||Wt,exports:n.exports||Wt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function wE(n,e){if(n==null)return Po;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=xr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==xr.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Le(n){return Oa(()=>{let e=v0(n);return _0(e),e})}function f0(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Nr(n){return n[dx]||null}function p0(n){return n[hx]||null}function g0(n){return n[fx]||null}function m0(n){let e=Nr(n)||p0(n)||g0(n);return e!==null?e.standalone:!1}function y0(n,e){let t=n[px]||null;if(!t&&e===!0)throw new Error(`Type ${Dt(n)} does not have '\u0275mod' property.`);return t}function v0(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Po,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Wt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:wE(n.inputs,e),outputs:wE(n.outputs),debugInfo:null}}function _0(n){n.features?.forEach(e=>e(n))}function EE(n,e){if(!n)return null;let t=e?g0:Bx;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter($x)}function Hx(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Cn(n){return{\u0275providers:n}}function zx(...n){return{\u0275providers:I0(!0,n),\u0275fromNgModule:!0}}function I0(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return hg(e,s=>{let a=s;Dp(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&w0(i,o),t}function w0(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];pg(i,o=>{e(o,r)})}}function Dp(n,e,t,r){if(n=Ct(n),!n)return!1;let i=null,o=gE(n),s=!o&&Nr(n);if(!o&&!s){let c=n.ngModule;if(o=gE(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Dp(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{hg(o.imports,h=>{Dp(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&w0(l,e)}if(!a){let l=Di(i)||(()=>new i);e({provide:i,useFactory:l,deps:Wt},i),e({provide:c0,useValue:i,multi:!0},i),e({provide:Oo,useValue:()=>Y(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;pg(c,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function pg(n,e){for(let t of n)r0(t)&&(t=t.\u0275providers),Array.isArray(t)?pg(t,e):e(t)}var qx=Re({provide:String,useValue:Re});function E0(n){return n!==null&&typeof n=="object"&&qx in n}function Gx(n){return!!(n&&n.useExisting)}function Wx(n){return!!(n&&n.useFactory)}function ko(n){return typeof n=="function"}function Kx(n){return!!n.useClass}var Pl=new q(""),tl={},Qx={},ap;function gg(){return ap===void 0&&(ap=new cl),ap}var jt=class{},Ma=class extends jt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Tp(e,s=>this.processProvider(s)),this.records.set(u0,To(void 0,this)),i.has("environment")&&this.records.set(jt,To(void 0,this));let o=this.records.get(Pl);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(c0,Wt,ae.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=_e(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),_e(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Ar(this),r=Nt(void 0),i;try{return e()}finally{Ar(t),Nt(r)}}get(e,t=Aa,r=ae.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(yE))return e[yE](this);r=Nl(r);let i,o=Ar(this),s=Nt(void 0);try{if(!(r&ae.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=eN(e)&&xl(e);l&&this.injectableDefInScope(l)?c=To(bp(e),tl):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&ae.Self?gg():this.parent;return t=r&ae.Optional&&t===Aa?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[al]=a[al]||[]).unshift(Dt(e)),o)throw a;return Dx(a,e,"R3InjectorError",this.source)}else throw a}finally{Nt(s),Ar(o)}}resolveInjectorInitializers(){let e=_e(null),t=Ar(this),r=Nt(void 0),i;try{let o=this.get(Oo,Wt,ae.Self);for(let s of o)s()}finally{Ar(t),Nt(r),_e(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Dt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new z(205,!1)}processProvider(e){e=Ct(e);let t=ko(e)?e:Ct(e&&e.provide),r=Zx(e);if(!ko(e)&&e.multi===!0){let i=this.records.get(t);i||(i=To(void 0,tl,!0),i.factory=()=>Ep(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=_e(null);try{return t.value===tl&&(t.value=Qx,t.value=t.factory()),typeof t.value=="object"&&t.value&&Xx(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{_e(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Ct(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function bp(n){let e=xl(n),t=e!==null?e.factory:Di(n);if(t!==null)return t;if(n instanceof q)throw new z(204,!1);if(n instanceof Function)return Yx(n);throw new z(204,!1)}function Yx(n){if(n.length>0)throw new z(204,!1);let t=cx(n);return t!==null?()=>t.factory(n):()=>new n}function Zx(n){if(E0(n))return To(void 0,n.useValue);{let e=C0(n);return To(e,tl)}}function C0(n,e,t){let r;if(ko(n)){let i=Ct(n);return Di(i)||bp(i)}else if(E0(n))r=()=>Ct(n.useValue);else if(Wx(n))r=()=>n.useFactory(...Ep(n.deps||[]));else if(Gx(n))r=()=>Y(Ct(n.useExisting));else{let i=Ct(n&&(n.useClass||n.provide));if(Jx(n))r=()=>new i(...Ep(n.deps));else return Di(i)||bp(i)}return r}function To(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Jx(n){return!!n.deps}function Xx(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function eN(n){return typeof n=="function"||typeof n=="object"&&n instanceof q}function Tp(n,e){for(let t of n)Array.isArray(t)?Tp(t,e):t&&r0(t)?Tp(t.\u0275providers,e):e(t)}function Dn(n,e){n instanceof Ma&&n.assertNotDestroyed();let t,r=Ar(n),i=Nt(void 0);try{return e()}finally{Ar(r),Nt(i)}}function D0(){return i0()!==void 0||wx()!=null}function tN(n){if(!D0())throw new z(-203,!1)}function nN(n){return typeof n=="function"}var Zn=0,de=1,ee=2,bt=3,sn=4,un=5,ll=6,dl=7,an=8,Fo=9,In=10,ze=11,xa=12,CE=13,Go=14,wn=15,Vo=16,So=17,Lo=18,Ol=19,b0=20,Rr=21,up=22,Kt=23,Yt=25,T0=1;var bi=7,hl=8,fl=9,Qt=10,pl=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(pl||{});function Mr(n){return Array.isArray(n)&&typeof n[T0]=="object"}function Jn(n){return Array.isArray(n)&&n[T0]===!0}function mg(n){return(n.flags&4)!==0}function kl(n){return n.componentOffset>-1}function Fl(n){return(n.flags&1)===1}function Pr(n){return!!n.template}function Sp(n){return(n[ee]&512)!==0}var Ap=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function S0(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Ur(){return A0}function A0(n){return n.type.prototype.ngOnChanges&&(n.setInput=iN),rN}Ur.ngInherit=!0;function rN(){let n=M0(this),e=n?.current;if(e){let t=n.previous;if(t===Po)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function iN(n,e,t,r,i){let o=this.declaredInputs[r],s=M0(n)||oN(n,{previous:Po,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new Ap(l&&l.currentValue,t,c===Po),S0(n,e,i,t)}var R0="__ngSimpleChanges__";function M0(n){return n[R0]||null}function oN(n,e){return n[R0]=e}var DE=null;var yn=function(n,e,t){DE?.(n,e,t)},sN="svg",aN="math";function En(n){for(;Array.isArray(n);)n=n[Zn];return n}function x0(n,e){return En(e[n])}function Zt(n,e){return En(e[n.index])}function N0(n,e){return n.data[e]}function P0(n,e){return n[e]}function Br(n,e){let t=e[n];return Mr(t)?t:t[Zn]}function yg(n){return(n[ee]&128)===128}function uN(n){return Jn(n[bt])}function jo(n,e){return e==null?null:n[e]}function O0(n){n[So]=0}function k0(n){n[ee]&1024||(n[ee]|=1024,yg(n)&&Ll(n))}function cN(n,e){for(;n>0;)e=e[Go],n--;return e}function Vl(n){return!!(n[ee]&9216||n[Kt]?.dirty)}function Rp(n){n[In].changeDetectionScheduler?.notify(8),n[ee]&64&&(n[ee]|=1024),Vl(n)&&Ll(n)}function Ll(n){n[In].changeDetectionScheduler?.notify(0);let e=Ti(n);for(;e!==null&&!(e[ee]&8192||(e[ee]|=8192,!yg(e)));)e=Ti(e)}function F0(n,e){if((n[ee]&256)===256)throw new z(911,!1);n[Rr]===null&&(n[Rr]=[]),n[Rr].push(e)}function lN(n,e){if(n[Rr]===null)return;let t=n[Rr].indexOf(e);t!==-1&&n[Rr].splice(t,1)}function Ti(n){let e=n[bt];return Jn(e)?e[bt]:e}var ue={lFrame:G0(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var V0=!1;function dN(){return ue.lFrame.elementDepthCount}function hN(){ue.lFrame.elementDepthCount++}function fN(){ue.lFrame.elementDepthCount--}function L0(){return ue.bindingsEnabled}function pN(){return ue.skipHydrationRootTNode!==null}function gN(n){return ue.skipHydrationRootTNode===n}function mN(){ue.skipHydrationRootTNode=null}function be(){return ue.lFrame.lView}function gt(){return ue.lFrame.tView}function Tt(n){return ue.lFrame.contextLView=n,n[an]}function St(n){return ue.lFrame.contextLView=null,n}function mt(){let n=j0();for(;n!==null&&n.type===64;)n=n.parent;return n}function j0(){return ue.lFrame.currentTNode}function yN(){let n=ue.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function xi(n,e){let t=ue.lFrame;t.currentTNode=n,t.isParent=e}function vg(){return ue.lFrame.isParent}function U0(){ue.lFrame.isParent=!1}function vN(){return ue.lFrame.contextLView}function B0(){return V0}function bE(n){V0=n}function _N(){let n=ue.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function IN(){return ue.lFrame.bindingIndex}function wN(n){return ue.lFrame.bindingIndex=n}function jl(){return ue.lFrame.bindingIndex++}function $0(n){let e=ue.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function EN(){return ue.lFrame.inI18n}function CN(n,e){let t=ue.lFrame;t.bindingIndex=t.bindingRootIndex=n,Mp(e)}function DN(){return ue.lFrame.currentDirectiveIndex}function Mp(n){ue.lFrame.currentDirectiveIndex=n}function bN(n){let e=ue.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function H0(n){ue.lFrame.currentQueryIndex=n}function TN(n){let e=n[de];return e.type===2?e.declTNode:e.type===1?n[un]:null}function z0(n,e,t){if(t&ae.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&ae.Host);)if(i=TN(o),i===null||(o=o[Go],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ue.lFrame=q0();return r.currentTNode=e,r.lView=n,!0}function _g(n){let e=q0(),t=n[de];ue.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function q0(){let n=ue.lFrame,e=n===null?null:n.child;return e===null?G0(n):e}function G0(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function W0(){let n=ue.lFrame;return ue.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var K0=W0;function Ig(){let n=W0();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function SN(n){return(ue.lFrame.contextLView=cN(n,ue.lFrame.contextLView))[an]}function Ni(){return ue.lFrame.selectedIndex}function Si(n){ue.lFrame.selectedIndex=n}function wg(){let n=ue.lFrame;return N0(n.tView,n.selectedIndex)}function AN(){return ue.lFrame.currentNamespace}var Q0=!0;function Ul(){return Q0}function Bl(n){Q0=n}function RN(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=A0(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function $l(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function nl(n,e,t){Y0(n,e,3,t)}function rl(n,e,t,r){(n[ee]&3)===t&&Y0(n,e,t,r)}function cp(n,e){let t=n[ee];(t&3)===e&&(t&=16383,t+=1,n[ee]=t)}function Y0(n,e,t,r){let i=r!==void 0?n[So]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[So]+=65536),(a<o||o==-1)&&(MN(n,t,e,c),n[So]=(n[So]&4294901760)+c+2),c++}function TE(n,e){yn(4,n,e);let t=_e(null);try{e.call(n)}finally{_e(t),yn(5,n,e)}}function MN(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ee]>>14<n[So]>>16&&(n[ee]&3)===e&&(n[ee]+=16384,TE(a,o)):TE(a,o)}var xo=-1,Ai=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function xN(n){return n instanceof Ai}function NN(n){return(n.flags&8)!==0}function PN(n){return(n.flags&16)!==0}var lp={},xp=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Nl(r);let i=this.injector.get(e,lp,r);return i!==lp||t===lp?i:this.parentInjector.get(e,t,r)}};function Z0(n){return n!==xo}function gl(n){return n&32767}function ON(n){return n>>16}function ml(n,e){let t=ON(n),r=e;for(;t>0;)r=r[Go],t--;return r}var Np=!0;function yl(n){let e=Np;return Np=n,e}var kN=256,J0=kN-1,X0=5,FN=0,vn={};function VN(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Sa)&&(r=t[Sa]),r==null&&(r=t[Sa]=FN++);let i=r&J0,o=1<<i;e.data[n+(i>>X0)]|=o}function vl(n,e){let t=eC(n,e);if(t!==-1)return t;let r=e[de];r.firstCreatePass&&(n.injectorIndex=e.length,dp(r.data,n),dp(e,null),dp(r.blueprint,null));let i=Eg(n,e),o=n.injectorIndex;if(Z0(i)){let s=gl(i),a=ml(i,e),c=a[de].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function dp(n,e){n.push(0,0,0,0,0,0,0,0,e)}function eC(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Eg(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=oC(i),r===null)return xo;if(t++,i=i[Go],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return xo}function Pp(n,e,t){VN(n,e,t)}function LN(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(d0(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function tC(n,e,t){if(t&ae.Optional||n!==void 0)return n;lg(e,"NodeInjector")}function nC(n,e,t,r){if(t&ae.Optional&&r===void 0&&(r=null),!(t&(ae.Self|ae.Host))){let i=n[Fo],o=Nt(void 0);try{return i?i.get(e,r,t&ae.Optional):o0(e,r,t&ae.Optional)}finally{Nt(o)}}return tC(r,e,t)}function rC(n,e,t,r=ae.Default,i){if(n!==null){if(e[ee]&2048&&!(r&ae.Self)){let s=HN(n,e,t,r,vn);if(s!==vn)return s}let o=iC(n,e,t,r,vn);if(o!==vn)return o}return nC(e,t,r,i)}function iC(n,e,t,r,i){let o=BN(t);if(typeof o=="function"){if(!z0(e,n,r))return r&ae.Host?tC(i,t,r):nC(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&ae.Optional))lg(t);else return s}finally{K0()}}else if(typeof o=="number"){let s=null,a=eC(n,e),c=xo,l=r&ae.Host?e[wn][un]:null;for((a===-1||r&ae.SkipSelf)&&(c=a===-1?Eg(n,e):e[a+8],c===xo||!AE(r,!1)?a=-1:(s=e[de],a=gl(c),e=ml(c,e)));a!==-1;){let h=e[de];if(SE(o,a,h.data)){let p=jN(a,e,t,s,r,l);if(p!==vn)return p}c=e[a+8],c!==xo&&AE(r,e[de].data[a+8]===l)&&SE(o,a,e)?(s=h,a=gl(c),e=ml(c,e)):a=-1}}return i}function jN(n,e,t,r,i,o){let s=e[de],a=s.data[n+8],c=r==null?kl(a)&&Np:r!=s&&(a.type&3)!==0,l=i&ae.Host&&o===a,h=UN(a,s,t,c,l);return h!==null?Uo(e,s,h,a):vn}function UN(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,y=i?a+h:l;for(let w=p;w<y;w++){let S=s[w];if(w<c&&t===S||w>=c&&S.type===t)return w}if(i){let w=s[c];if(w&&Pr(w)&&w.type===t)return c}return null}function Uo(n,e,t,r){let i=n[t],o=e.data;if(xN(i)){let s=i;s.resolving&&mx(gx(o[t]));let a=yl(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?Nt(s.injectImpl):null,h=z0(n,r,ae.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&RN(t,o[t],e)}finally{l!==null&&Nt(l),yl(a),s.resolving=!1,K0()}}return i}function BN(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Sa)?n[Sa]:void 0;return typeof e=="number"?e>=0?e&J0:$N:e}function SE(n,e,t){let r=1<<n;return!!(t[e+(n>>X0)]&r)}function AE(n,e){return!(n&ae.Self)&&!(n&ae.Host&&e)}var Ci=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return rC(this._tNode,this._lView,e,Nl(r),t)}};function $N(){return new Ci(mt(),be())}function Wo(n){return Oa(()=>{let e=n.prototype.constructor,t=e[sl]||Op(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[sl]||Op(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Op(n){return XE(n)?()=>{let e=Op(Ct(n));return e&&e()}:Di(n)}function HN(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ee]&2048&&!(s[ee]&512);){let a=iC(o,s,t,r|ae.Self,vn);if(a!==vn)return a;let c=o.parent;if(!c){let l=s[b0];if(l){let h=l.get(t,vn,r);if(h!==vn)return h}c=oC(s),s=s[Go]}o=c}return i}function oC(n){let e=n[de],t=e.type;return t===2?e.declTNode:t===1?n[un]:null}function Cg(n){return LN(mt(),n)}function RE(n,e=null,t=null,r){let i=sC(n,e,t,r);return i.resolveInjectorInitializers(),i}function sC(n,e=null,t=null,r,i=new Set){let o=[t||Wt,zx(n)];return r=r||(typeof n=="object"?void 0:Dt(n)),new Ma(o,e||gg(),r||null,i)}var et=class n{static{this.THROW_IF_NOT_FOUND=Aa}static{this.NULL=new cl}static create(e,t){if(Array.isArray(e))return RE({name:""},t,e,"");{let r=e.name??"";return RE({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=H({token:n,providedIn:"any",factory:()=>Y(u0)})}static{this.__NG_ELEMENT_ID__=-1}};var zN=new q("");zN.__NG_ELEMENT_ID__=n=>{let e=mt();if(e===null)throw new z(204,!1);if(e.type&2)return e.value;if(n&ae.Optional)return null;throw new z(204,!1)};var qN="ngOriginalError";function hp(n){return n[qN]}var aC=!0,Dg=(()=>{class n{static{this.__NG_ELEMENT_ID__=GN}static{this.__NG_ENV_ID__=t=>t}}return n})(),kp=class extends Dg{constructor(e){super(),this._lView=e}onDestroy(e){return F0(this._lView,e),()=>lN(this._lView,e)}};function GN(){return new kp(be())}var Ko=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Qe(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}}return n})();var Fp=class extends Xe{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,D0()&&(this.destroyRef=P(Dg,{optional:!0})??void 0,this.pendingTasks=P(Ko,{optional:!0})??void 0)}emit(e){let t=_e(null);try{super.next(e)}finally{_e(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ve&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},He=Fp;function _l(...n){}function uC(n){let e,t;function r(){n=_l;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function ME(n){return queueMicrotask(()=>n()),()=>{n=_l}}var bg="isAngularZone",Il=bg+"_ID",WN=0,Ce=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new He(!1),this.onMicrotaskEmpty=new He(!1),this.onStable=new He(!1),this.onError=new He(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=aC}=e;if(typeof Zone>"u")throw new z(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,YN(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(bg)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new z(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new z(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,KN,_l,_l);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},KN={};function Tg(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function QN(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){uC(()=>{n.callbackScheduled=!1,Vp(n),n.isCheckStableRunning=!0,Tg(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Vp(n)}function YN(n){let e=()=>{QN(n)},t=WN++;n._inner=n._inner.fork({name:"angular",properties:{[bg]:!0,[Il]:t,[Il+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(ZN(c))return r.invokeTask(o,s,a,c);try{return xE(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),NE(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return xE(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!JN(c)&&e(),NE(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Vp(n),Tg(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Vp(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function xE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function NE(n){n._nesting--,Tg(n)}var Lp=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new He,this.onMicrotaskEmpty=new He,this.onStable=new He,this.onError=new He}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function ZN(n){return cC(n,"__ignore_ng_zone__")}function JN(n){return cC(n,"__scheduler_tick__")}function cC(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Kn=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&hp(e);for(;t&&hp(t);)t=hp(t);return t||null}},XN=new q("",{providedIn:"root",factory:()=>{let n=P(Ce),e=P(Kn);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function eP(){return Hl(mt(),be())}function Hl(n,e){return new bn(Zt(n,e))}var bn=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=eP}}return n})();function lC(n){return(n.flags&128)===128}var dC=new Map,tP=0;function nP(){return tP++}function rP(n){dC.set(n[Ol],n)}function jp(n){dC.delete(n[Ol])}var PE="__ngContext__";function Or(n,e){Mr(e)?(n[PE]=e[Ol],rP(e)):n[PE]=e}function hC(n){return pC(n[xa])}function fC(n){return pC(n[sn])}function pC(n){for(;n!==null&&!Jn(n);)n=n[sn];return n}var Up;function gC(n){Up=n}function iP(){if(Up!==void 0)return Up;if(typeof document<"u")return document;throw new z(210,!1)}var Sg=new q("",{providedIn:"root",factory:()=>oP}),oP="ng",Ag=new q(""),Tn=new q("",{providedIn:"platform",factory:()=>"unknown"});var Rg=new q("",{providedIn:"root",factory:()=>iP().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var sP="h",aP="b";var uP=()=>null;function Mg(n,e,t=!1){return uP(n,e,t)}var mC=!1,cP=new q("",{providedIn:"root",factory:()=>mC});var Zc;function lP(){if(Zc===void 0&&(Zc=null,_p.trustedTypes))try{Zc=_p.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Zc}function OE(n){return lP()?.createScriptURL(n)||n}var wl=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ZE})`}};function Fa(n){return n instanceof wl?n.changingThisBreaksApplicationSecurity:n}function xg(n,e){let t=dP(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${ZE})`)}return t===e}function dP(n){return n instanceof wl&&n.getTypeName()||null}var hP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function yC(n){return n=String(n),n.match(hP)?n:"unsafe:"+n}var zl=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(zl||{});function Ng(n){let e=_C();return e?e.sanitize(zl.URL,n)||"":xg(n,"URL")?Fa(n):yC(No(n))}function fP(n){let e=_C();if(e)return OE(e.sanitize(zl.RESOURCE_URL,n)||"");if(xg(n,"ResourceURL"))return OE(Fa(n));throw new z(904,!1)}function pP(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?fP:Ng}function vC(n,e,t){return pP(e,t)(n)}function _C(){let n=be();return n&&n[In].sanitizer}var gP=/^>|^->|<!--|-->|--!>|<!-$/g,mP=/(<|>)/g,yP="\u200B$1\u200B";function vP(n){return n.replace(gP,e=>e.replace(mP,yP))}function IC(n){return n instanceof Function?n():n}function _P(n){return(n??P(et)).get(Tn)==="browser"}var Qn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Qn||{}),IP;function Pg(n,e){return IP(n,e)}function Ao(n,e,t,r,i){if(r!=null){let o,s=!1;Jn(r)?o=r:Mr(r)&&(s=!0,r=r[Zn]);let a=En(r);n===0&&t!==null?i==null?bC(e,t,a):El(e,t,a,i||null,!0):n===1&&t!==null?El(e,t,a,i||null,!0):n===2?FP(e,a,s):n===3&&e.destroyNode(a),o!=null&&LP(e,n,o,t,i)}}function wP(n,e){return n.createText(e)}function EP(n,e,t){n.setValue(e,t)}function CP(n,e){return n.createComment(vP(e))}function wC(n,e,t){return n.createElement(e,t)}function DP(n,e){EC(n,e),e[Zn]=null,e[un]=null}function bP(n,e,t,r,i,o){r[Zn]=i,r[un]=e,Gl(n,r,t,1,i,o)}function EC(n,e){e[In].changeDetectionScheduler?.notify(9),Gl(n,e,e[ze],2,null,null)}function TP(n){let e=n[xa];if(!e)return fp(n[de],n);for(;e;){let t=null;if(Mr(e))t=e[xa];else{let r=e[Qt];r&&(t=r)}if(!t){for(;e&&!e[sn]&&e!==n;)Mr(e)&&fp(e[de],e),e=e[bt];e===null&&(e=n),Mr(e)&&fp(e[de],e),t=e&&e[sn]}e=t}}function SP(n,e,t,r){let i=Qt+r,o=t.length;r>0&&(t[i-1][sn]=e),r<o-Qt?(e[sn]=t[i],a0(t,Qt+r,e)):(t.push(e),e[sn]=null),e[bt]=t;let s=e[Vo];s!==null&&t!==s&&CC(s,e);let a=e[Lo];a!==null&&a.insertView(n),Rp(e),e[ee]|=128}function CC(n,e){let t=n[fl],r=e[bt];if(Mr(r))n[ee]|=pl.HasTransplantedViews;else{let i=r[bt][wn];e[wn]!==i&&(n[ee]|=pl.HasTransplantedViews)}t===null?n[fl]=[e]:t.push(e)}function Og(n,e){let t=n[fl],r=t.indexOf(e);t.splice(r,1)}function Bp(n,e){if(n.length<=Qt)return;let t=Qt+e,r=n[t];if(r){let i=r[Vo];i!==null&&i!==n&&Og(i,r),e>0&&(n[t-1][sn]=r[sn]);let o=ul(n,Qt+e);DP(r[de],r);let s=o[Lo];s!==null&&s.detachView(o[de]),r[bt]=null,r[sn]=null,r[ee]&=-129}return r}function DC(n,e){if(!(e[ee]&256)){let t=e[ze];t.destroyNode&&Gl(n,e,t,3,null,null),TP(e)}}function fp(n,e){if(e[ee]&256)return;let t=_e(null);try{e[ee]&=-129,e[ee]|=256,e[Kt]&&Lf(e[Kt]),RP(n,e),AP(n,e),e[de].type===1&&e[ze].destroy();let r=e[Vo];if(r!==null&&Jn(e[bt])){r!==e[bt]&&Og(r,e);let i=e[Lo];i!==null&&i.detachView(n)}jp(e)}finally{_e(t)}}function AP(n,e){let t=n.cleanup,r=e[dl];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[dl]=null);let i=e[Rr];if(i!==null){e[Rr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function RP(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Ai)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];yn(4,a,c);try{c.call(a)}finally{yn(5,a,c)}}else{yn(4,i,o);try{o.call(i)}finally{yn(5,i,o)}}}}}function MP(n,e,t){return xP(n,e.parent,t)}function xP(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Zn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===_n.None||o===_n.Emulated)return null}return Zt(r,t)}}function El(n,e,t,r,i){n.insertBefore(e,t,r,i)}function bC(n,e,t){n.appendChild(e,t)}function kE(n,e,t,r,i){r!==null?El(n,e,t,r,i):bC(n,e,t)}function TC(n,e){return n.parentNode(e)}function NP(n,e){return n.nextSibling(e)}function PP(n,e,t){return kP(n,e,t)}function OP(n,e,t){return n.type&40?Zt(n,t):null}var kP=OP,FE;function ql(n,e,t,r){let i=MP(n,r,e),o=e[ze],s=r.parent||e[un],a=PP(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)kE(o,i,t[c],a,!1);else kE(o,i,t,a,!1);FE!==void 0&&FE(o,r,e,t,i)}function Ta(n,e){if(e!==null){let t=e.type;if(t&3)return Zt(e,n);if(t&4)return $p(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Ta(n,r);{let i=n[e.index];return Jn(i)?$p(-1,i):En(i)}}else{if(t&128)return Ta(n,e.next);if(t&32)return Pg(e,n)()||En(n[e.index]);{let r=SC(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ti(n[wn]);return Ta(i,r)}else return Ta(n,e.next)}}}return null}function SC(n,e){if(e!==null){let r=n[wn][un],i=e.projection;return r.projection[i]}return null}function $p(n,e){let t=Qt+n+1;if(t<e.length){let r=e[t],i=r[de].firstChild;if(i!==null)return Ta(r,i)}return e[bi]}function FP(n,e,t){n.removeChild(null,e,t)}function kg(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&Or(En(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)kg(n,e,t.child,r,i,o,!1),Ao(e,n,i,a,o);else if(c&32){let l=Pg(t,r),h;for(;h=l();)Ao(e,n,i,h,o);Ao(e,n,i,a,o)}else c&16?VP(n,e,r,t,i,o):Ao(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Gl(n,e,t,r,i,o){kg(t,r,n.firstChild,e,i,o,!1)}function VP(n,e,t,r,i,o){let s=t[wn],c=s[un].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let h=c[l];Ao(e,n,i,h,o)}else{let l=c,h=s[bt];lC(r)&&(l.flags|=128),kg(n,e,l,h,i,o,!0)}}function LP(n,e,t,r,i){let o=t[bi],s=En(t);o!==s&&Ao(e,n,r,o,i);for(let a=Qt;a<t.length;a++){let c=t[a];Gl(c[de],c,n,e,r,o)}}function jP(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Qn.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Qn.Important),n.setStyle(t,r,i,o))}}function UP(n,e,t){n.setAttribute(e,"style",t)}function AC(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function RC(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Cp(n,e,r),i!==null&&AC(n,e,i),o!==null&&UP(n,e,o)}var Xn={};function K(n=1){MC(gt(),be(),Ni()+n,!1)}function MC(n,e,t,r){if(!r)if((e[ee]&3)===3){let o=n.preOrderCheckHooks;o!==null&&nl(e,o,t)}else{let o=n.preOrderHooks;o!==null&&rl(e,o,0,t)}Si(t)}function L(n,e=ae.Default){let t=be();if(t===null)return Y(n,e);let r=mt();return rC(r,t,Ct(n),e)}function xC(){let n="invalid";throw new Error(n)}function NC(n,e,t,r,i,o){let s=_e(null);try{let a=null;i&xr.SignalBased&&(a=e[r][Gn]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&xr.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):S0(e,a,r,o)}finally{_e(s)}}function BP(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Si(~i);else{let o=i,s=t[++r],a=t[++r];CN(s,o);let c=e[o];a(2,c)}}}finally{Si(-1)}}function Wl(n,e,t,r,i,o,s,a,c,l,h){let p=e.blueprint.slice();return p[Zn]=i,p[ee]=r|4|128|8|64,(l!==null||n&&n[ee]&2048)&&(p[ee]|=2048),O0(p),p[bt]=p[Go]=n,p[an]=t,p[In]=s||n&&n[In],p[ze]=a||n&&n[ze],p[Fo]=c||n&&n[Fo]||null,p[un]=o,p[Ol]=nP(),p[ll]=h,p[b0]=l,p[wn]=e.type==2?n[wn]:p,p}function Va(n,e,t,r,i){let o=n.data[e];if(o===null)o=$P(n,e,t,r,i),EN()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=yN();o.injectorIndex=s===null?-1:s.injectorIndex}return xi(o,!0),o}function $P(n,e,t,r,i){let o=j0(),s=vg(),a=s?o:o&&o.parent,c=n.data[e]=WP(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function PC(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function OC(n,e,t,r,i){let o=Ni(),s=r&2;try{Si(-1),s&&e.length>Yt&&MC(n,e,Yt,!1),yn(s?2:0,i),t(r,i)}finally{Si(o),yn(s?3:1,i)}}function Fg(n,e,t){if(mg(e)){let r=_e(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{_e(r)}}}function Vg(n,e,t){L0()&&(XP(n,e,t,Zt(t,e)),(t.flags&64)===64&&LC(n,e,t))}function Lg(n,e,t=Zt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function kC(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=jg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function jg(n,e,t,r,i,o,s,a,c,l,h){let p=Yt+r,y=p+i,w=HP(p,y),S=typeof l=="function"?l():l;return w[de]={type:n,blueprint:w,template:t,queries:null,viewQuery:a,declTNode:e,data:w.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:S,incompleteFirstPass:!1,ssrId:h}}function HP(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Xn);return t}function zP(n,e,t,r){let o=r.get(cP,mC)||t===_n.ShadowDom,s=n.selectRootElement(e,o);return qP(s),s}function qP(n){GP(n)}var GP=()=>null;function WP(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return pN()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function VE(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=xr.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?LE(r,t,l,a,c):LE(r,t,l,a)}return r}function LE(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function KP(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],c=null,l=null;for(let h=r;h<i;h++){let p=o[h],y=t?t.get(p):null,w=y?y.inputs:null,S=y?y.outputs:null;c=VE(0,p.inputs,h,c,w),l=VE(1,p.outputs,h,l,S);let x=c!==null&&s!==null&&!fg(e)?lO(c,h,s):null;a.push(x)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function QP(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function FC(n,e,t,r,i,o,s,a){let c=Zt(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(Bg(n,t,h,r,i),kl(e)&&YP(t,e.index)):e.type&3?(r=QP(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function YP(n,e){let t=Br(e,n);t[ee]&16||(t[ee]|=64)}function Ug(n,e,t,r){if(L0()){let i=r===null?null:{"":-1},o=tO(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&VC(n,e,t,s,i,a),i&&nO(t,r,i)}t.mergedAttrs=Ra(t.mergedAttrs,t.attrs)}function VC(n,e,t,r,i,o){for(let l=0;l<r.length;l++)Pp(vl(t,e),n,r[l].type);iO(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,c=PC(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=Ra(t.mergedAttrs,h.hostAttrs),oO(n,t,e,c,h),rO(c,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}KP(n,t,o)}function ZP(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;JP(s)!=a&&s.push(a),s.push(t,r,o)}}function JP(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function XP(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;kl(t)&&sO(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||vl(t,e),Or(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let c=n.data[a],l=Uo(e,n,a,t);if(Or(l,e),s!==null&&cO(e,a-i,l,c,t,s),Pr(c)){let h=Br(t.index,e);h[an]=Uo(e,n,a,t)}}}function LC(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=DN();try{Si(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];Mp(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&eO(c,l)}}finally{Si(-1),Mp(s)}}function eO(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function tO(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(kx(e,s.selectors,!1))if(r||(r=[]),Pr(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;Hp(n,e,c)}else r.unshift(s),Hp(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Hp(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function nO(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new z(-301,!1);r.push(e[i],o)}}}function rO(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Pr(e)&&(t[""]=n)}}function iO(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function oO(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Di(i.type,!0)),s=new Ai(o,Pr(i),L);n.blueprint[r]=s,t[r]=s,ZP(n,e,r,PC(n,t,i.hostVars,Xn),i)}function sO(n,e,t){let r=Zt(e,n),i=kC(t),o=n[In].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=Kl(n,Wl(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function aO(n,e,t,r,i,o){let s=Zt(n,e);uO(e[ze],s,o,n.value,t,r,i)}function uO(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?No(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function cO(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],h=s[a++],p=s[a++];NC(r,t,c,l,h,p)}}function lO(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function jC(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function UC(n,e){let t=n.contentQueries;if(t!==null){let r=_e(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];H0(o),a.contentQueries(2,e[s],s)}}}finally{_e(r)}}}function Kl(n,e){return n[xa]?n[CE][sn]=e:n[xa]=e,n[CE]=e,e}function zp(n,e,t){H0(0);let r=_e(null);try{e(n,t)}finally{_e(r)}}function dO(n){return n[dl]??=[]}function hO(n){return n.cleanup??=[]}function BC(n,e){let t=n[Fo],r=t?t.get(Kn,null):null;r&&r.handleError(e)}function Bg(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],c=t[o++],l=e[s],h=n.data[s];NC(h,l,r,a,c,i)}}function $C(n,e,t){let r=x0(e,n);EP(n[ze],r,t)}function fO(n,e){let t=Br(e,n),r=t[de];pO(r,t);let i=t[Zn];i!==null&&t[ll]===null&&(t[ll]=Mg(i,t[Fo])),$g(r,t,t[an])}function pO(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function $g(n,e,t){_g(e);try{let r=n.viewQuery;r!==null&&zp(1,r,t);let i=n.template;i!==null&&OC(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Lo]?.finishViewCreation(n),n.staticContentQueries&&UC(n,e),n.staticViewQueries&&zp(2,n.viewQuery,t);let o=n.components;o!==null&&gO(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ee]&=-5,Ig()}}function gO(n,e){for(let t=0;t<e.length;t++)fO(n,e[t])}function mO(n,e,t,r){let i=_e(null);try{let o=e.tView,a=n[ee]&4096?4096:16,c=Wl(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[Vo]=l;let h=n[Lo];return h!==null&&(c[Lo]=h.createEmbeddedView(o)),$g(o,c,t),c}finally{_e(i)}}function jE(n,e){return!e||e.firstChild===null||lC(n)}function yO(n,e,t,r=!0){let i=e[de];if(SP(i,e,n,t),r){let s=$p(t,n),a=e[ze],c=TC(a,n[bi]);c!==null&&bP(i,n[un],a,e,c,s)}let o=e[ll];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Cl(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(En(o)),Jn(o)&&vO(o,r);let s=t.type;if(s&8)Cl(n,e,t.child,r);else if(s&32){let a=Pg(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=SC(e,t);if(Array.isArray(a))r.push(...a);else{let c=Ti(e[wn]);Cl(c[de],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function vO(n,e){for(let t=Qt;t<n.length;t++){let r=n[t],i=r[de].firstChild;i!==null&&Cl(r[de],r,i,e)}n[bi]!==n[Zn]&&e.push(n[bi])}var HC=[];function _O(n){return n[Kt]??IO(n)}function IO(n){let e=HC.pop()??Object.create(EO);return e.lView=n,e}function wO(n){n.lView[Kt]!==n&&(n.lView=null,HC.push(n))}var EO=ce(F({},wa),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Ll(n.lView)},consumerOnSignalRead(){this.lView[Kt]=this}});function CO(n){let e=n[Kt]??Object.create(DO);return e.lView=n,e}var DO=ce(F({},wa),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Ti(n.lView);for(;e&&!zC(e[de]);)e=Ti(e);e&&k0(e)},consumerOnSignalRead(){this.lView[Kt]=this}});function zC(n){return n.type!==2}var bO=100;function qC(n,e=!0,t=0){let r=n[In],i=r.rendererFactory,o=!1;o||i.begin?.();try{TO(n,t)}catch(s){throw e&&BC(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function TO(n,e){let t=B0();try{bE(!0),qp(n,e);let r=0;for(;Vl(n);){if(r===bO)throw new z(103,!1);r++,qp(n,1)}}finally{bE(t)}}function SO(n,e,t,r){let i=e[ee];if((i&256)===256)return;let o=!1,s=!1;!o&&e[In].inlineEffectRunner?.flush(),_g(e);let a=!0,c=null,l=null;o||(zC(n)?(l=_O(e),c=Cc(l)):Rw()===null?(a=!1,l=CO(e),c=Cc(l)):e[Kt]&&(Lf(e[Kt]),e[Kt]=null));try{O0(e),wN(n.bindingStartIndex),t!==null&&OC(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let w=n.preOrderCheckHooks;w!==null&&nl(e,w,null)}else{let w=n.preOrderHooks;w!==null&&rl(e,w,0,null),cp(e,0)}if(s||AO(e),GC(e,0),n.contentQueries!==null&&UC(n,e),!o)if(h){let w=n.contentCheckHooks;w!==null&&nl(e,w)}else{let w=n.contentHooks;w!==null&&rl(e,w,1),cp(e,1)}BP(n,e);let p=n.components;p!==null&&KC(e,p,0);let y=n.viewQuery;if(y!==null&&zp(2,y,r),!o)if(h){let w=n.viewCheckHooks;w!==null&&nl(e,w)}else{let w=n.viewHooks;w!==null&&rl(e,w,2),cp(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[up]){for(let w of e[up])w();e[up]=null}o||(e[ee]&=-73)}catch(h){throw o||Ll(e),h}finally{l!==null&&(Ff(l,c),a&&wO(l)),Ig()}}function GC(n,e){for(let t=hC(n);t!==null;t=fC(t))for(let r=Qt;r<t.length;r++){let i=t[r];WC(i,e)}}function AO(n){for(let e=hC(n);e!==null;e=fC(e)){if(!(e[ee]&pl.HasTransplantedViews))continue;let t=e[fl];for(let r=0;r<t.length;r++){let i=t[r];k0(i)}}}function RO(n,e,t){let r=Br(e,n);WC(r,t)}function WC(n,e){yg(n)&&qp(n,e)}function qp(n,e){let r=n[de],i=n[ee],o=n[Kt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Vf(o)),s||=!1,o&&(o.dirty=!1),n[ee]&=-9217,s)SO(r,n,r.template,n[an]);else if(i&8192){GC(n,1);let a=r.components;a!==null&&KC(n,a,1)}}function KC(n,e,t){for(let r=0;r<e.length;r++)RO(n,e[r],t)}function Hg(n,e){let t=B0()?64:1088;for(n[In].changeDetectionScheduler?.notify(e);n;){n[ee]|=t;let r=Ti(n);if(Sp(n)&&!r)return n;n=r}return null}var Ri=class{get rootNodes(){let e=this._lView,t=e[de];return Cl(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[an]}set context(e){this._lView[an]=e}get destroyed(){return(this._lView[ee]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[bt];if(Jn(e)){let t=e[hl],r=t?t.indexOf(this):-1;r>-1&&(Bp(e,r),ul(t,r))}this._attachedToViewContainer=!1}DC(this._lView[de],this._lView)}onDestroy(e){F0(this._lView,e)}markForCheck(){Hg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ee]&=-129}reattach(){Rp(this._lView),this._lView[ee]|=128}detectChanges(){this._lView[ee]|=1024,qC(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new z(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Sp(this._lView),t=this._lView[Vo];t!==null&&!e&&Og(t,this._lView),EC(this._lView[de],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new z(902,!1);this._appRef=e;let t=Sp(this._lView),r=this._lView[Vo];r!==null&&!t&&CC(r,this._lView),Rp(this._lView)}},Qo=(()=>{class n{static{this.__NG_ELEMENT_ID__=NO}}return n})(),MO=Qo,xO=class extends MO{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=mO(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Ri(i)}};function NO(){return QC(mt(),be())}function QC(n,e){return n.type&4?new xO(e,n,Hl(n,e)):null}var g5=new RegExp(`^(\\d+)*(${aP}|${sP})*(.*)`);var PO=()=>null;function UE(n,e){return PO(n,e)}var Bo=class{},Ql=new q("",{providedIn:"root",factory:()=>!1});var YC=new q(""),ZC=new q(""),Gp=class{},Dl=class{};function OO(n){let e=Error(`No component factory found for ${Dt(n)}.`);return e[kO]=n,e}var kO="ngComponent";var Wp=class{resolveComponentFactory(e){throw OO(e)}},$o=class{static{this.NULL=new Wp}},Ho=class{},er=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>FO()}}return n})();function FO(){let n=be(),e=mt(),t=Br(e.index,n);return(Mr(t)?t:n)[ze]}var VO=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>null})}}return n})();function bl(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=fE(i,a);else if(o==2){let c=a,l=e[++s];r=fE(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Tl=class extends $o{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Nr(e);return new zo(t,this.ngModule)}};function BE(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:xr.None;e?t.push({propName:s,templateName:r,isSignal:(a&xr.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function LO(n){let e=n.toLowerCase();return e==="svg"?sN:e==="math"?aN:null}var zo=class extends Dl{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=BE(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return BE(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=jx(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=_e(null);try{i=i||this.ngModule;let s=i instanceof jt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new xp(e,s):e,c=a.get(Ho,null);if(c===null)throw new z(407,!1);let l=a.get(VO,null),h=a.get(Bo,null),p={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},y=c.createRenderer(null,this.componentDef),w=this.componentDef.selectors[0][0]||"div",S=r?zP(y,r,this.componentDef.encapsulation,a):wC(y,w,LO(w)),x=512;this.componentDef.signals?x|=4096:this.componentDef.onPush||(x|=16);let M=null;S!==null&&(M=Mg(S,a,!0));let j=jg(0,null,null,1,0,null,null,null,null,null,null),W=Wl(null,j,null,x,null,null,p,y,a,null,M);_g(W);let Q,le,ke=null;try{let ne=this.componentDef,C,m=null;ne.findHostDirectiveDefs?(C=[],m=new Map,ne.findHostDirectiveDefs(ne,C,m),C.push(ne)):C=[ne];let _=jO(W,S);ke=UO(_,S,ne,C,W,p,y),le=N0(j,Yt),S&&HO(y,ne,S,r),t!==void 0&&zO(le,this.ngContentSelectors,t),Q=$O(ke,ne,C,m,W,[qO]),$g(j,W,null)}catch(ne){throw ke!==null&&jp(ke),jp(W),ne}finally{Ig()}return new Kp(this.componentType,Q,Hl(le,W),W,le)}finally{_e(o)}}},Kp=class extends Gp{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Ri(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;Bg(o[de],o,i,e,t),this.previousInputValues.set(e,t);let s=Br(this._tNode.index,o);Hg(s,1)}}get injector(){return new Ci(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function jO(n,e){let t=n[de],r=Yt;return n[r]=e,Va(t,r,2,"#host",null)}function UO(n,e,t,r,i,o,s){let a=i[de];BO(r,n,e,s);let c=null;e!==null&&(c=Mg(e,i[Fo]));let l=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=Wl(i,kC(t),null,h,i[n.index],n,o,l,null,null,c);return a.firstCreatePass&&Hp(a,n,r.length-1),Kl(i,p),i[n.index]=p}function BO(n,e,t,r){for(let i of n)e.mergedAttrs=Ra(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(bl(e,e.mergedAttrs,!0),t!==null&&RC(r,t,e))}function $O(n,e,t,r,i,o){let s=mt(),a=i[de],c=Zt(s,i);VC(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let p=s.directiveStart+h,y=Uo(i,a,p,s);Or(y,i)}LC(a,i,s),c&&Or(c,i);let l=Uo(i,a,s.directiveStart+s.componentOffset,s);if(n[an]=i[an]=l,o!==null)for(let h of o)h(l,e);return Fg(a,s,i),l}function HO(n,e,t,r){if(r)Cp(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=Ux(e.selectors[0]);i&&Cp(n,t,i),o&&o.length>0&&AC(n,t,o.join(" "))}}function zO(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function qO(){let n=mt();$l(be()[de],n)}var $r=(()=>{class n{static{this.__NG_ELEMENT_ID__=GO}}return n})();function GO(){let n=mt();return KO(n,be())}var WO=$r,JC=class extends WO{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Hl(this._hostTNode,this._hostLView)}get injector(){return new Ci(this._hostTNode,this._hostLView)}get parentInjector(){let e=Eg(this._hostTNode,this._hostLView);if(Z0(e)){let t=ml(e,this._hostLView),r=gl(e),i=t[de].data[r+8];return new Ci(i,t)}else return new Ci(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=$E(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Qt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=UE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,jE(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!nN(e),a;if(s)a=t;else{let S=t||{};a=S.index,r=S.injector,i=S.projectableNodes,o=S.environmentInjector||S.ngModuleRef}let c=s?e:new zo(Nr(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let x=(s?l:this.parentInjector).get(jt,null);x&&(o=x)}let h=Nr(c.componentType??{}),p=UE(this._lContainer,h?.id??null),y=p?.firstChild??null,w=c.create(l,i,y,o);return this.insertImpl(w.hostView,a,jE(this._hostTNode,p)),w}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(uN(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[bt],l=new JC(c,c[un],c[bt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return yO(s,i,o,r),e.attachToViewContainerRef(),a0(pp(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=$E(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Bp(this._lContainer,t);r&&(ul(pp(this._lContainer),t),DC(r[de],r))}detach(e){let t=this._adjustIndex(e,-1),r=Bp(this._lContainer,t);return r&&ul(pp(this._lContainer),t)!=null?new Ri(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function $E(n){return n[hl]}function pp(n){return n[hl]||(n[hl]=[])}function KO(n,e){let t,r=e[n.index];return Jn(r)?t=r:(t=jC(r,e,null,n),e[n.index]=t,Kl(e,t)),YO(t,e,n,r),new JC(t,n,e)}function QO(n,e){let t=n[ze],r=t.createComment(""),i=Zt(e,n),o=TC(t,i);return El(t,o,r,NP(t,i),!1),r}var YO=XO,ZO=()=>!1;function JO(n,e,t){return ZO(n,e,t)}function XO(n,e,t,r){if(n[bi])return;let i;t.type&8?i=En(r):i=QO(e,t),n[bi]=i}var HE=new Set;function Yo(n){HE.has(n)||(HE.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function ek(n){return typeof n=="function"&&n[Gn]!==void 0}function La(n,e){Yo("NgSignals");let t=Uw(n),r=t[Gn];return e?.equal&&(r.equal=e.equal),t.set=i=>jf(r,i),t.update=i=>Bw(r,i),t.asReadonly=tk.bind(t),t}function tk(){let n=this[Gn];if(n.readonlyFn===void 0){let e=()=>this();e[Gn]=n,n.readonlyFn=e}return n.readonlyFn}function XC(n){return ek(n)&&typeof n.set=="function"}function nk(n){return Object.getPrototypeOf(n.prototype).constructor}function Sn(n){let e=nk(n.type),t=!0,r=[n];for(;e;){let i;if(Pr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new z(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Jc(n.inputs),s.inputTransforms=Jc(n.inputTransforms),s.declaredInputs=Jc(n.declaredInputs),s.outputs=Jc(n.outputs);let a=i.hostBindings;a&&ak(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&ok(n,c),l&&sk(n,l),rk(n,i),ax(n.outputs,i.outputs),Pr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Sn&&(t=!1)}}e=Object.getPrototypeOf(e)}ik(r)}function rk(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function ik(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ra(i.hostAttrs,t=Ra(t,i.hostAttrs))}}function Jc(n){return n===Po?{}:n===Wt?[]:n}function ok(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function sk(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function ak(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function zg(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var kr=class{},Na=class{};var Qp=class extends kr{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Tl(this);let o=y0(e);this._bootstrapComponents=IC(o.bootstrap),this._r3Injector=sC(e,t,[{provide:kr,useValue:this},{provide:$o,useValue:this.componentFactoryResolver},...r],Dt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Yp=class extends Na{constructor(e){super(),this.moduleType=e}create(e){return new Qp(this.moduleType,e,[])}};var Sl=class extends kr{constructor(e){super(),this.componentFactoryResolver=new Tl(this),this.instance=null;let t=new Ma([...e.providers,{provide:kr,useValue:this},{provide:$o,useValue:this.componentFactoryResolver}],e.parent||gg(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Yl(n,e,t=null){return new Sl({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function eD(n){return ck(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function uk(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function ck(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function lk(n,e,t){return n[e]=t}function Fr(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function dk(n,e,t,r){let i=Fr(n,e,t);return Fr(n,e+1,r)||i}function hk(n){return(n.flags&32)===32}function fk(n,e,t,r,i,o,s,a,c){let l=e.consts,h=Va(e,n,4,s||null,a||null);Ug(e,t,h,jo(l,c)),$l(e,h);let p=h.tView=jg(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function pk(n,e,t,r,i,o,s,a,c,l){let h=t+Yt,p=e.firstCreatePass?fk(h,e,n,r,i,o,s,a,c):e.data[h];xi(p,!1);let y=gk(e,n,p,t);Ul()&&ql(e,n,y,p),Or(y,n);let w=jC(y,n,y,p);return n[h]=w,Kl(n,w),JO(w,p,n),Fl(p)&&Vg(e,n,p),c!=null&&Lg(n,p,l),p}function je(n,e,t,r,i,o,s,a){let c=be(),l=gt(),h=jo(l.consts,o);return pk(c,l,n,e,t,r,i,h,s,a),je}var gk=mk;function mk(n,e,t,r){return Bl(!0),e[ze].createComment("")}var Ro=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Ro||{}),tD=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}}return n})(),Zp=class n{constructor(){this.ngZone=P(Ce),this.scheduler=P(Bo),this.errorHandler=P(Kn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Ro.EarlyRead,Ro.Write,Ro.MixedReadWrite,Ro.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}},Jp=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function qg(n,e){!e?.injector&&tN(qg);let t=e?.injector??P(et);return _P(t)?(Yo("NgAfterNextRender"),vk(n,t,e,!0)):_k}function yk(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function vk(n,e,t,r){let i=e.get(tD);i.impl??=e.get(Zp);let o=t?.phase??Ro.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(Dg):null,a=new Jp(i.impl,yk(n,o),r,s);return i.impl.register(a),a}var _k={destroy(){}};function ja(n,e,t,r){let i=be(),o=jl();if(Fr(i,o,e)){let s=gt(),a=wg();aO(a,i,n,e,t,r)}return ja}function Ik(n,e,t,r){return Fr(n,jl(),t)?e+No(t)+r:Xn}function wk(n,e,t,r,i,o){let s=IN(),a=dk(n,s,t,i);return $0(2),a?e+No(t)+r+No(i)+o:Xn}function Xc(n,e){return n<<17|e<<2}function Mi(n){return n>>17&32767}function Ek(n){return(n&2)==2}function Ck(n,e){return n&131071|e<<17}function Xp(n){return n|2}function qo(n){return(n&131068)>>2}function gp(n,e){return n&-131069|e<<2}function Dk(n){return(n&1)===1}function eg(n){return n|1}function bk(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Mi(s),c=qo(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||ka(p,h)>0)&&(l=!0)}else h=t;if(i)if(c!==0){let y=Mi(n[a+1]);n[r+1]=Xc(y,a),y!==0&&(n[y+1]=gp(n[y+1],r)),n[a+1]=Ck(n[a+1],r)}else n[r+1]=Xc(a,0),a!==0&&(n[a+1]=gp(n[a+1],r)),a=r;else n[r+1]=Xc(c,0),a===0?a=r:n[c+1]=gp(n[c+1],r),c=r;l&&(n[r+1]=Xp(n[r+1])),zE(n,h,r,!0),zE(n,h,r,!1),Tk(e,h,n,r,o),s=Xc(a,c),o?e.classBindings=s:e.styleBindings=s}function Tk(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&ka(o,e)>=0&&(t[r+1]=eg(t[r+1]))}function zE(n,e,t,r){let i=n[t+1],o=e===null,s=r?Mi(i):qo(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];Sk(c,e)&&(a=!0,n[s+1]=r?eg(l):Xp(l)),s=r?Mi(l):qo(l)}a&&(n[t+1]=r?Xp(i):eg(i))}function Sk(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?ka(n,e)>=0:!1}function Ie(n,e,t){let r=be(),i=jl();if(Fr(r,i,e)){let o=gt(),s=wg();FC(o,s,r,n,e,r[ze],t,!1)}return Ie}function qE(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";Bg(n,t,o[s],s,r)}function Zl(n,e){return Ak(n,e,null,!0),Zl}function Ak(n,e,t,r){let i=be(),o=gt(),s=$0(2);if(o.firstUpdatePass&&Mk(o,n,s,r),e!==Xn&&Fr(i,s,e)){let a=o.data[Ni()];kk(o,a,i,i[ze],n,i[s+1]=Fk(e,t),r,s)}}function Rk(n,e){return e>=n.expandoStartIndex}function Mk(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Ni()],s=Rk(n,t);Vk(o,r)&&e===null&&!s&&(e=!1),e=xk(i,o,e,r),bk(i,o,e,t,s,r)}}function xk(n,e,t,r){let i=bN(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=mp(null,n,e,t,r),t=Pa(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=mp(i,n,e,t,r),o===null){let c=Nk(n,e,r);c!==void 0&&Array.isArray(c)&&(c=mp(null,n,e,c[1],r),c=Pa(c,e.attrs,r),Pk(n,e,r,c))}else o=Ok(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function Nk(n,e,t){let r=t?e.classBindings:e.styleBindings;if(qo(r)!==0)return n[Mi(r)]}function Pk(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Mi(i)]=r}function Ok(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Pa(r,s,t)}return Pa(r,e.attrs,t)}function mp(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Pa(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Pa(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Sx(n,s,t?!0:e[++o]))}return n===void 0?null:n}function kk(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],h=Dk(l)?GE(c,e,t,i,qo(l),s):void 0;if(!Al(h)){Al(o)||Ek(l)&&(o=GE(c,null,t,i,a,s));let p=x0(Ni(),t);jP(r,s,p,i,o)}}function GE(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),h=l?c[1]:c,p=h===null,y=t[i+1];y===Xn&&(y=p?Wt:void 0);let w=p?sp(y,r):h===r?y:void 0;if(l&&!Al(w)&&(w=sp(c,r)),Al(w)&&(a=w,s))return a;let S=n[i+1];i=s?Mi(S):qo(S)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=sp(c,r))}return a}function Al(n){return n!==void 0}function Fk(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Dt(Fa(n)))),n}function Vk(n,e){return(n.flags&(e?8:16))!==0}function Lk(n,e,t,r,i,o){let s=e.consts,a=jo(s,i),c=Va(e,n,2,r,a);return Ug(e,t,c,jo(s,o)),c.attrs!==null&&bl(c,c.attrs,!1),c.mergedAttrs!==null&&bl(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function V(n,e,t,r){let i=be(),o=gt(),s=Yt+n,a=i[ze],c=o.firstCreatePass?Lk(s,o,i,e,t,r):o.data[s],l=jk(o,i,c,a,e,n);i[s]=l;let h=Fl(c);return xi(c,!0),RC(a,l,c),!hk(c)&&Ul()&&ql(o,i,l,c),dN()===0&&Or(l,i),hN(),h&&(Vg(o,i,c),Fg(o,c,i)),r!==null&&Lg(i,c),V}function O(){let n=mt();vg()?U0():(n=n.parent,xi(n,!1));let e=n;gN(e)&&mN(),fN();let t=gt();return t.firstCreatePass&&($l(t,n),mg(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&NN(e)&&qE(t,e,be(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&PN(e)&&qE(t,e,be(),e.stylesWithoutHost,!1),O}function Ze(n,e,t,r){return V(n,e,t,r),O(),Ze}var jk=(n,e,t,r,i,o)=>(Bl(!0),wC(r,i,AN()));function Uk(n,e,t,r,i){let o=e.consts,s=jo(o,r),a=Va(e,n,8,"ng-container",s);s!==null&&bl(a,s,!0);let c=jo(o,i);return Ug(e,t,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function At(n,e,t){let r=be(),i=gt(),o=n+Yt,s=i.firstCreatePass?Uk(o,i,r,e,t):i.data[o];xi(s,!0);let a=Bk(i,r,s,n);return r[o]=a,Ul()&&ql(i,r,a,s),Or(a,r),Fl(s)&&(Vg(i,r,s),Fg(i,s,r)),t!=null&&Lg(r,s),At}function Rt(){let n=mt(),e=gt();return vg()?U0():(n=n.parent,xi(n,!1)),e.firstCreatePass&&($l(e,n),mg(n)&&e.queries.elementEnd(n)),Rt}var Bk=(n,e,t,r)=>(Bl(!0),CP(e[ze],""));function Pt(){return be()}var Rl="en-US";var $k=Rl;function Hk(n){typeof n=="string"&&($k=n.toLowerCase().replace(/_/g,"-"))}var zk=(n,e,t)=>{};function Se(n,e,t,r){let i=be(),o=gt(),s=mt();return nD(o,i,i[ze],s,n,e,r),Se}function qk(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[dl],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function nD(n,e,t,r,i,o,s){let a=Fl(r),l=n.firstCreatePass&&hO(n),h=e[an],p=dO(e),y=!0;if(r.type&3||s){let x=Zt(r,e),M=s?s(x):x,j=p.length,W=s?le=>s(En(le[r.index])):r.index,Q=null;if(!s&&a&&(Q=qk(n,e,i,r.index)),Q!==null){let le=Q.__ngLastListenerFn__||Q;le.__ngNextListenerFn__=o,Q.__ngLastListenerFn__=o,y=!1}else{o=KE(r,e,h,o),zk(x,i,o);let le=t.listen(M,i,o);p.push(o,le),l&&l.push(i,W,j,j+1)}}else o=KE(r,e,h,o);let w=r.outputs,S;if(y&&w!==null&&(S=w[i])){let x=S.length;if(x)for(let M=0;M<x;M+=2){let j=S[M],W=S[M+1],ke=e[j][W].subscribe(o),ne=p.length;p.push(o,ke),l&&l.push(i,r.index,ne,-(ne+1))}}}function WE(n,e,t,r){let i=_e(null);try{return yn(6,e,t),t(r)!==!1}catch(o){return BC(n,o),!1}finally{yn(7,e,t),_e(i)}}function KE(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?Br(n.index,e):e;Hg(s,5);let a=WE(e,t,r,o),c=i.__ngNextListenerFn__;for(;c;)a=WE(e,t,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function me(n=1){return SN(n)}function Gk(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function rD(n){let e=vN();return P0(e,Yt+n)}function B(n,e=""){let t=be(),r=gt(),i=n+Yt,o=r.firstCreatePass?Va(r,i,1,e,null):r.data[i],s=Wk(r,t,o,e,n);t[i]=s,Ul()&&ql(r,t,s,o),xi(o,!1)}var Wk=(n,e,t,r,i)=>(Bl(!0),wP(e[ze],r));function Zo(n){return Ot("",n,""),Zo}function Ot(n,e,t){let r=be(),i=Ik(r,n,e,t);return i!==Xn&&$C(r,Ni(),i),Ot}function Pi(n,e,t,r,i){let o=be(),s=wk(o,n,e,t,r,i);return s!==Xn&&$C(o,Ni(),s),Pi}function An(n,e,t){XC(e)&&(e=e());let r=be(),i=jl();if(Fr(r,i,e)){let o=gt(),s=wg();FC(o,s,r,n,e,r[ze],t,!1)}return An}function tr(n,e){let t=XC(n);return t&&n.set(e),t}function Rn(n,e){let t=be(),r=gt(),i=mt();return nD(r,t,t[ze],i,n,e),Rn}function Kk(n,e,t){let r=gt();if(r.firstCreatePass){let i=Pr(n);tg(t,r.data,r.blueprint,i,!0),tg(e,r.data,r.blueprint,i,!1)}}function tg(n,e,t,r,i){if(n=Ct(n),Array.isArray(n))for(let o=0;o<n.length;o++)tg(n[o],e,t,r,i);else{let o=gt(),s=be(),a=mt(),c=ko(n)?n:Ct(n.provide),l=C0(n),h=a.providerIndexes&1048575,p=a.directiveStart,y=a.providerIndexes>>20;if(ko(n)||!n.multi){let w=new Ai(l,i,L),S=vp(c,e,i?h:h+y,p);S===-1?(Pp(vl(a,s),o,c),yp(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(w),s.push(w)):(t[S]=w,s[S]=w)}else{let w=vp(c,e,h+y,p),S=vp(c,e,h,h+y),x=w>=0&&t[w],M=S>=0&&t[S];if(i&&!M||!i&&!x){Pp(vl(a,s),o,c);let j=Zk(i?Yk:Qk,t.length,i,r,l);!i&&M&&(t[S].providerFactory=j),yp(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(j),s.push(j)}else{let j=iD(t[i?S:w],l,!i&&r);yp(o,n,w>-1?w:S,j)}!i&&r&&M&&t[S].componentProviders++}}}function yp(n,e,t,r){let i=ko(e),o=Kx(e);if(i||o){let c=(o?Ct(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,c]):l[h+1].push(r,c)}else l.push(t,c)}}}function iD(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function vp(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Qk(n,e,t,r){return ng(this.multi,[])}function Yk(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Uo(t,t[de],this.providerFactory.index,r);o=a.slice(0,s),ng(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],ng(i,o);return o}function ng(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function Zk(n,e,t,r,i){let o=new Ai(n,t,L);return o.multi=[],o.index=e,o.componentProviders=0,iD(o,i,r&&!t),o}function Jo(n,e=[]){return t=>{t.providersResolver=(r,i)=>Kk(r,i?i(n):n,e)}}var Jk=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=I0(!1,t.type),i=r.length>0?Yl([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=H({token:n,providedIn:"environment",factory:()=>new n(Y(jt))})}}return n})();function nt(n){Yo("NgStandalone"),n.getStandaloneInjector=e=>e.get(Jk).getOrCreateStandaloneInjector(n)}function Xk(n,e){let t=n[e];return t===Xn?void 0:t}function e1(n,e,t,r,i,o){let s=e+t;return Fr(n,s,i)?lk(n,s+1,o?r.call(o,i):r(i)):Xk(n,s+1)}function Hr(n,e){let t=gt(),r,i=n+Yt;t.firstCreatePass?(r=t1(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Di(r.type,!0)),s,a=Nt(L);try{let c=yl(!1),l=o();return yl(c),Gk(t,be(),i,l),l}finally{Nt(a)}}function t1(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function zr(n,e,t){let r=n+Yt,i=be(),o=P0(i,r);return n1(i,r)?e1(i,_N(),e,o.transform,t,o):o.transform(t)}function n1(n,e){return n[de].data[e].pure}function oD(n,e){return QC(n,e)}var Yn=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},sD=new Yn("18.2.13");var Jl=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var aD=new q("");function qr(n){return!!n&&typeof n.then=="function"}function Gg(n){return!!n&&typeof n.subscribe=="function"}var Xl=new q(""),uD=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=P(Xl,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(qr(o))t.push(o);else if(Gg(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ed=new q("");function r1(){jw(()=>{throw new z(600,!1)})}function i1(n){return n.isBoundToModule}var o1=10;function s1(n,e,t){try{let r=t();return qr(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var Oi=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=P(XN),this.afterRenderManager=P(tD),this.zonelessEnabled=P(Ql),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Xe,this.afterTick=new Xe,this.componentTypes=[],this.components=[],this.isStable=P(Ko).hasPendingTasks.pipe(se(t=>!t)),this._injector=P(jt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Dl;if(!this._injector.get(uD).done){let y=!i&&m0(t),w=!1;throw new z(405,w)}let s;i?s=t:s=this._injector.get($o).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=i1(s)?void 0:this._injector.get(kr),c=r||s.selector,l=s.create(et.NULL,[],c,a),h=l.location.nativeElement,p=l.injector.get(aD,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),il(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new z(101,!1);let t=_e(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,_e(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Ho,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<o1;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)a1(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Vl(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;il(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(ed,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>il(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new z(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function il(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function a1(n,e,t,r){if(!t&&!Vl(n))return;qC(n,e,t&&!r?0:1)}var rg=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},td=(()=>{class n{compileModuleSync(t){return new Yp(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=y0(t),o=IC(i.declarations).reduce((s,a)=>{let c=Nr(a);return c&&s.push(new zo(c)),s},[]);return new rg(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var u1=(()=>{class n{constructor(){this.zone=P(Ce),this.changeDetectionScheduler=P(Bo),this.applicationRef=P(Oi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),c1=new q("",{factory:()=>!1});function cD({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ce(ce(F({},dD()),{scheduleInRootZone:t})),[{provide:Ce,useFactory:n},{provide:Oo,multi:!0,useFactory:()=>{let r=P(u1,{optional:!0});return()=>r.initialize()}},{provide:Oo,multi:!0,useFactory:()=>{let r=P(l1);return()=>{r.initialize()}}},e===!0?{provide:YC,useValue:!0}:[],{provide:ZC,useValue:t??aC}]}function lD(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=cD({ngZoneFactory:()=>{let i=dD(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Yo("NgZone_CoalesceEvent"),new Ce(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Cn([{provide:c1,useValue:!0},{provide:Ql,useValue:!1},r])}function dD(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var l1=(()=>{class n{constructor(){this.subscription=new Ve,this.initialized=!1,this.zone=P(Ce),this.pendingTasks=P(Ko)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ce.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ce.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var d1=(()=>{class n{constructor(){this.appRef=P(Oi),this.taskService=P(Ko),this.ngZone=P(Ce),this.zonelessEnabled=P(Ql),this.disableScheduling=P(YC,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ve,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Il):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(P(ZC,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Lp||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?ME:uC;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Il+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,ME(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function h1(){return typeof $localize<"u"&&$localize.locale||Rl}var Wg=new q("",{providedIn:"root",factory:()=>P(Wg,ae.Optional|ae.SkipSelf)||h1()});var ig=new q("");function el(n){return!n.moduleRef}function f1(n){let e=el(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ce);return t.run(()=>{el(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Kn,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),el(n)){let o=()=>e.destroy(),s=n.platformInjector.get(ig);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(ig);s.add(o),n.moduleRef.onDestroy(()=>{il(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return s1(r,t,()=>{let o=e.get(uD);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Wg,Rl);if(Hk(s||Rl),el(n)){let a=e.get(Oi);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return p1(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function p1(n,e){let t=n.injector.get(Oi);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new z(-403,!1);e.push(n)}var ol=null;function g1(n=[],e){return et.create({name:e,providers:[{provide:Pl,useValue:"platform"},{provide:ig,useValue:new Set([()=>ol=null])},...n]})}function m1(n=[]){if(ol)return ol;let e=g1(n);return ol=e,r1(),y1(e),e}function y1(n){n.get(Ag,null)?.forEach(t=>t())}var Gr=(()=>{class n{static{this.__NG_ELEMENT_ID__=v1}}return n})();function v1(n){return _1(mt(),be(),(n&16)===16)}function _1(n,e,t){if(kl(n)&&!t){let r=Br(n.index,e);return new Ri(r,r)}else if(n.type&175){let r=e[wn];return new Ri(r,e)}return null}var og=class{constructor(){}supports(e){return eD(e)}create(e){return new sg(e)}},I1=(n,e)=>e,sg=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||I1}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<QE(r,i,o)?t:r,a=QE(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=c-i;if(l!=h){for(let y=0;y<l;y++){let w=y<o.length?o[y]:o[y]=0,S=w+y;h<=S&&S<l&&(o[y]=w+1)}let p=s.previousIndex;o[p]=h-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!eD(e))throw new z(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,uk(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new ag(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Ml),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Ml),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},ag=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},ug=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Ml=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new ug,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function QE(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function YE(){return new Kg([new og])}var Kg=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:YE})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||YE()),deps:[[n,new dg,new pt]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new z(901,!1)}}return n})();function hD(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=m1(r),o=[cD({}),{provide:Bo,useExisting:d1},...t||[]],s=new Sl({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return f1({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function Wr(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Ua(n,e){Yo("NgSignals");let t=Fw(n);return e?.equal&&(t[Gn].equal=e.equal),t}function cn(n){let e=_e(null);try{return n()}finally{_e(e)}}function fD(n){let e=Nr(n);if(!e)return null;let t=new zo(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var _D=null;function rr(){return _D}function ID(n){_D??=n}var nd=class{};var kt=new q(""),nm=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>P(w1),providedIn:"platform"})}}return n})(),wD=new q(""),w1=(()=>{class n extends nm{constructor(){super(),this._doc=P(kt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return rr().getBaseHref(this._doc)}onPopState(t){let r=rr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=rr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function rm(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function pD(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function nr(n){return n&&n[0]!=="?"?"?"+n:n}var Mn=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>P(im),providedIn:"root"})}}return n})(),ED=new q(""),im=(()=>{class n extends Mn{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??P(kt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return rm(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+nr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+nr(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+nr(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(Y(nm),Y(ED,8))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),om=(()=>{class n extends Mn{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=rm(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+nr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+nr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(Y(nm),Y(ED,8))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Xo=(()=>{class n{constructor(t){this._subject=new He,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=D1(pD(gD(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+nr(r))}normalize(t){return n.stripTrailingSlash(C1(this._basePath,gD(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+nr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+nr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=nr}static{this.joinWithSlash=rm}static{this.stripTrailingSlash=pD}static{this.\u0275fac=function(r){return new(r||n)(Y(Mn))}}static{this.\u0275prov=H({token:n,factory:()=>E1(),providedIn:"root"})}}return n})();function E1(){return new Xo(Y(Mn))}function C1(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function gD(n){return n.replace(/\/index.html$/,"")}function D1(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function CD(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Qg=/\s+/,mD=[],DD=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=mD,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split(Qg):mD}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(Qg):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(Qg).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(L(bn),L(er))}}static{this.\u0275dir=Le({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var Yg=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},es=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Yg(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),yD(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);yD(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(L($r),L(Qo),L(Kg))}}static{this.\u0275dir=Le({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function yD(n,e){n.context.$implicit=e.item}var Kr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Zg,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){vD("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){vD("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(L($r),L(Qo))}}static{this.\u0275dir=Le({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),Zg=class{constructor(){this.$implicit=null,this.ngIf=null}};function vD(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Dt(e)}'.`)}var rd=class{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}},ts=(()=>{class n{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,this._caseCount===0&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews.push(t)}_matchCase(t){let r=t===this._ngSwitch;return this._lastCasesMatched||=r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews.length>0&&t!==this._defaultUsed){this._defaultUsed=t;for(let r of this._defaultViews)r.enforceState(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Le({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0})}}return n})(),od=(()=>{class n{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new rd(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static{this.\u0275fac=function(r){return new(r||n)(L($r),L(Qo),L(ts,9))}}static{this.\u0275dir=Le({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0})}}return n})(),sd=(()=>{class n{constructor(t,r,i){i._addDefault(new rd(t,r))}static{this.\u0275fac=function(r){return new(r||n)(L($r),L(Qo),L(ts,9))}}static{this.\u0275dir=Le({type:n,selectors:[["","ngSwitchDefault",""]],standalone:!0})}}return n})();function b1(n,e){return new z(2100,!1)}var Jg=class{createSubscription(e,t){return cn(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){cn(()=>e.unsubscribe())}},Xg=class{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}},T1=new Xg,S1=new Jg,Qr=(()=>{class n{constructor(t){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(qr(t))return T1;if(Gg(t))return S1;throw b1(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||n)(L(Gr,16))}}static{this.\u0275pipe=f0({name:"async",type:n,pure:!1,standalone:!0})}}return n})();var Mt=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=jr({type:n})}static{this.\u0275inj=Lr({})}}return n})(),sm="browser",A1="server";function R1(n){return n===sm}function am(n){return n===A1}var bD=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>R1(P(Tn))?new em(P(kt),window):new tm})}}return n})(),em=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=M1(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function M1(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var tm=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},id=class{};var lm=class extends nd{constructor(){super(...arguments),this.supportsDOMEvents=!0}},dm=class n extends lm{static makeCurrent(){ID(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=x1();return t==null?null:N1(t)}resetBaseElement(){Ba=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return CD(document.cookie,e)}},Ba=null;function x1(){return Ba=Ba||document.querySelector("base"),Ba?Ba.getAttribute("href"):null}function N1(n){return new URL(n,document.baseURI).pathname}var P1=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),hm=new q(""),RD=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new z(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(Y(hm),Y(Ce))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),ad=class{constructor(e){this._doc=e}},um="ng-app-id",MD=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=am(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${um}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(um),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(um,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(Y(kt),Y(Sg),Y(Rg,8),Y(Tn))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),cm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},pm=/%COMP%/g,xD="%COMP%",O1=`_nghost-${xD}`,k1=`_ngcontent-${xD}`,F1=!0,V1=new q("",{providedIn:"root",factory:()=>F1});function L1(n){return k1.replace(pm,n)}function j1(n){return O1.replace(pm,n)}function ND(n,e){return e.map(t=>t.replace(pm,n))}var TD=(()=>{class n{constructor(t,r,i,o,s,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=am(a),this.defaultRenderer=new $a(t,s,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===_n.ShadowDom&&(r=ce(F({},r),{encapsulation:_n.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof ud?i.applyToHost(t):i instanceof Ha&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case _n.Emulated:o=new ud(c,l,r,this.appId,h,s,a,p);break;case _n.ShadowDom:return new fm(c,l,t,r,s,a,this.nonce,p);default:o=new Ha(c,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(Y(RD),Y(MD),Y(Sg),Y(V1),Y(kt),Y(Tn),Y(Ce),Y(Rg))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),$a=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(cm[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(SD(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(SD(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new z(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=cm[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=cm[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Qn.DashCase|Qn.Important)?e.style.setProperty(t,r,i&Qn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Qn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=rr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function SD(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var fm=class extends $a{constructor(e,t,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=ND(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ha=class extends $a{constructor(e,t,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?ND(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},ud=class extends Ha{constructor(e,t,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,t,r,o,s,a,c,l),this.contentAttr=L1(l),this.hostAttr=j1(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},U1=(()=>{class n extends ad{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(Y(kt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),AD=["alt","control","meta","shift"],B1={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$1={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},H1=(()=>{class n extends ad{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>rr().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),AD.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=B1[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),AD.forEach(s=>{if(s!==i){let a=$1[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(Y(kt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function PD(n,e){return hD(F({rootComponent:n},z1(e)))}function z1(n){return{appProviders:[...Q1,...n?.providers??[]],platformProviders:K1}}function q1(){dm.makeCurrent()}function G1(){return new Kn}function W1(){return gC(document),document}var K1=[{provide:Tn,useValue:sm},{provide:Ag,useValue:q1,multi:!0},{provide:kt,useFactory:W1,deps:[]}];var Q1=[{provide:Pl,useValue:"root"},{provide:Kn,useFactory:G1,deps:[]},{provide:hm,useClass:U1,multi:!0,deps:[kt,Ce,Tn]},{provide:hm,useClass:H1,multi:!0,deps:[kt]},TD,MD,RD,{provide:Ho,useExisting:TD},{provide:id,useClass:P1,deps:[]},[]];var OD=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(Y(kt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var oe="primary",iu=Symbol("RouteTitle"),_m=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function us(n){return new _m(n)}function Z1(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function J1(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!xn(n[t],e[t]))return!1;return!0}function xn(n,e){let t=n?Im(n):void 0,r=e?Im(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!qD(n[i],e[i]))return!1;return!0}function Im(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function qD(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function GD(n){return n.length>0?n[n.length-1]:null}function Zr(n){return Xf(n)?n:qr(n)?Ne(Promise.resolve(n)):Z(n)}var X1={exact:KD,subset:QD},WD={exact:eF,subset:tF,ignored:()=>!0};function kD(n,e,t){return X1[t.paths](n.root,e.root,t.matrixParams)&&WD[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function eF(n,e){return xn(n,e)}function KD(n,e,t){if(!Fi(n.segments,e.segments)||!dd(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!KD(n.children[r],e.children[r],t))return!1;return!0}function tF(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>qD(n[t],e[t]))}function QD(n,e,t){return YD(n,e,e.segments,t)}function YD(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Fi(i,t)||e.hasChildren()||!dd(i,t,r))}else if(n.segments.length===t.length){if(!Fi(n.segments,t)||!dd(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!QD(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Fi(n.segments,i)||!dd(n.segments,i,r)||!n.children[oe]?!1:YD(n.children[oe],e,o,r)}}function dd(n,e,t){return e.every((r,i)=>WD[t](n[i].parameters,r.parameters))}var or=class{constructor(e=new De([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=us(this.queryParams),this._queryParamMap}toString(){return iF.serialize(this)}},De=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return hd(this)}},ki=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=us(this.parameters),this._parameterMap}toString(){return JD(this)}};function nF(n,e){return Fi(n,e)&&n.every((t,r)=>xn(t.parameters,e[r].parameters))}function Fi(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function rF(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===oe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==oe&&(t=t.concat(e(i,r)))}),t}var ou=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>new cs,providedIn:"root"})}}return n})(),cs=class{parse(e){let t=new Em(e);return new or(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${za(e.root,!0)}`,r=aF(e.queryParams),i=typeof e.fragment=="string"?`#${oF(e.fragment)}`:"";return`${t}${r}${i}`}},iF=new cs;function hd(n){return n.segments.map(e=>JD(e)).join("/")}function za(n,e){if(!n.hasChildren())return hd(n);if(e){let t=n.children[oe]?za(n.children[oe],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==oe&&r.push(`${i}:${za(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=rF(n,(r,i)=>i===oe?[za(n.children[oe],!1)]:[`${i}:${za(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[oe]!=null?`${hd(n)}/${t[0]}`:`${hd(n)}/(${t.join("//")})`}}function ZD(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function cd(n){return ZD(n).replace(/%3B/gi,";")}function oF(n){return encodeURI(n)}function wm(n){return ZD(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function fd(n){return decodeURIComponent(n)}function FD(n){return fd(n.replace(/\+/g,"%20"))}function JD(n){return`${wm(n.path)}${sF(n.parameters)}`}function sF(n){return Object.entries(n).map(([e,t])=>`;${wm(e)}=${wm(t)}`).join("")}function aF(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${cd(t)}=${cd(i)}`).join("&"):`${cd(t)}=${cd(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var uF=/^[^\/()?;#]+/;function gm(n){let e=n.match(uF);return e?e[0]:""}var cF=/^[^\/()?;=#]+/;function lF(n){let e=n.match(cF);return e?e[0]:""}var dF=/^[^=?&#]+/;function hF(n){let e=n.match(dF);return e?e[0]:""}var fF=/^[^&#]+/;function pF(n){let e=n.match(fF);return e?e[0]:""}var Em=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new De([],{}):new De([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[oe]=new De(e,t)),r}parseSegment(){let e=gm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new z(4009,!1);return this.capture(e),new ki(fd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=lF(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=gm(this.remaining);i&&(r=i,this.capture(r))}e[fd(t)]=fd(r)}parseQueryParam(e){let t=hF(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=pF(this.remaining);s&&(r=s,this.capture(r))}let i=FD(t),o=FD(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=gm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new z(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=oe);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[oe]:new De([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new z(4011,!1)}};function XD(n){return n.segments.length>0?new De([],{[oe]:n}):n}function eb(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=eb(i);if(r===oe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new De(n.segments,e);return gF(t)}function gF(n){if(n.numberOfChildren===1&&n.children[oe]){let e=n.children[oe];return new De(n.segments.concat(e.segments),e.children)}return n}function Vi(n){return n instanceof or}function mF(n,e,t=null,r=null){let i=tb(n);return nb(i,e,t,r)}function tb(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new De(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=XD(r);return e??i}function nb(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return mm(i,i,i,t,r);let o=yF(e);if(o.toRoot())return mm(i,i,new De([],{}),t,r);let s=vF(o,i,n),a=s.processChildren?Wa(s.segmentGroup,s.index,o.commands):ib(s.segmentGroup,s.index,o.commands);return mm(i,s.segmentGroup,a,t,r)}function pd(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Ya(n){return typeof n=="object"&&n!=null&&n.outlets}function mm(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=rb(n,e,t);let a=XD(eb(s));return new or(a,o,i)}function rb(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=rb(o,e,t)}),new De(n.segments,r)}var gd=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&pd(r[0]))throw new z(4003,!1);let i=r.find(Ya);if(i&&i!==GD(r))throw new z(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function yF(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new gd(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new gd(t,e,r)}var os=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function vF(n,e,t){if(n.isAbsolute)return new os(e,!0,0);if(!t)return new os(e,!1,NaN);if(t.parent===null)return new os(t,!0,0);let r=pd(n.commands[0])?0:1,i=t.segments.length-1+r;return _F(t,i,n.numberOfDoubleDots)}function _F(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new z(4005,!1);i=r.segments.length}return new os(r,!1,i-o)}function IF(n){return Ya(n[0])?n[0].outlets:{[oe]:n}}function ib(n,e,t){if(n??=new De([],{}),n.segments.length===0&&n.hasChildren())return Wa(n,e,t);let r=wF(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new De(n.segments.slice(0,r.pathIndex),{});return o.children[oe]=new De(n.segments.slice(r.pathIndex),n.children),Wa(o,0,i)}else return r.match&&i.length===0?new De(n.segments,{}):r.match&&!n.hasChildren()?Cm(n,e,t):r.match?Wa(n,0,i):Cm(n,e,t)}function Wa(n,e,t){if(t.length===0)return new De(n.segments,{});{let r=IF(t),i={};if(Object.keys(r).some(o=>o!==oe)&&n.children[oe]&&n.numberOfChildren===1&&n.children[oe].segments.length===0){let o=Wa(n.children[oe],e,t);return new De(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=ib(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new De(n.segments,i)}}function wF(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Ya(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!LD(c,l,s))return o;r+=2}else{if(!LD(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Cm(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Ya(o)){let c=EF(o.outlets);return new De(r,c)}if(i===0&&pd(t[0])){let c=n.segments[e];r.push(new ki(c.path,VD(t[0]))),i++;continue}let s=Ya(o)?o.outlets[oe]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&pd(a)?(r.push(new ki(s,VD(a))),i+=2):(r.push(new ki(s,{})),i++)}return new De(r,{})}function EF(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Cm(new De([],{}),0,r))}),e}function VD(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function LD(n,e,t){return n==t.path&&xn(e,t.parameters)}var Ka="imperative",rt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(rt||{}),Jt=class{constructor(e,t){this.id=e,this.url=t}},ls=class extends Jt{constructor(e,t,r="imperative",i=null){super(e,t),this.type=rt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Nn=class extends Jt{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=rt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Bt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Bt||{}),md=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(md||{}),ir=class extends Jt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=rt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Yr=class extends Jt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=rt.NavigationSkipped}},Za=class extends Jt{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=rt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},yd=class extends Jt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=rt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Dm=class extends Jt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=rt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bm=class extends Jt{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=rt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Tm=class extends Jt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=rt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sm=class extends Jt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=rt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Am=class{constructor(e){this.route=e,this.type=rt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Rm=class{constructor(e){this.route=e,this.type=rt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Mm=class{constructor(e){this.snapshot=e,this.type=rt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},xm=class{constructor(e){this.snapshot=e,this.type=rt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Nm=class{constructor(e){this.snapshot=e,this.type=rt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pm=class{constructor(e){this.snapshot=e,this.type=rt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vd=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=rt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Ja=class{},ds=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function CF(n,e){return n.providers&&!n._injector&&(n._injector=Yl(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ln(n){return n.outlet||oe}function DF(n,e){let t=n.filter(r=>ln(r)===e);return t.push(...n.filter(r=>ln(r)!==e)),t}function su(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Om=class{get injector(){return su(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new au(this.rootInjector),this.attachRef=null}},au=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Om(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(Y(jt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),_d=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=km(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=km(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Fm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Fm(e,this._root).map(t=>t.value)}};function km(n,e){if(n===e.value)return e;for(let t of e.children){let r=km(n,t);if(r)return r}return null}function Fm(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Fm(n,t);if(r.length)return r.unshift(e),r}return[]}var Ut=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function is(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Id=class extends _d{constructor(e,t){super(e),this.snapshot=t,qm(this,e)}toString(){return this.snapshot.toString()}};function ob(n){let e=bF(n),t=new Qe([new ki("",{})]),r=new Qe({}),i=new Qe({}),o=new Qe({}),s=new Qe(""),a=new Pn(t,r,o,s,i,oe,n,e.root);return a.snapshot=e.root,new Id(new Ut(a,[]),e)}function bF(n){let e={},t={},r={},i="",o=new ss([],e,r,i,t,oe,n,null,{});return new Ed("",new Ut(o,[]))}var Pn=class{constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(se(l=>l[iu]))??Z(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(se(e=>us(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(se(e=>us(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function wd(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:F(F({},e.params),n.params),data:F(F({},e.data),n.data),resolve:F(F(F(F({},n.data),e.data),i?.data),n._resolvedData)}:r={params:F({},n.params),data:F({},n.data),resolve:F(F({},n.data),n._resolvedData??{})},i&&ab(i)&&(r.resolve[iu]=i.title),r}var ss=class{get title(){return this.data?.[iu]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=us(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=us(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Ed=class extends _d{constructor(e,t){super(t),this.url=e,qm(this,t)}toString(){return sb(this._root)}};function qm(n,e){e.value._routerState=n,e.children.forEach(t=>qm(n,t))}function sb(n){let e=n.children.length>0?` { ${n.children.map(sb).join(", ")} } `:"";return`${n.value}${e}`}function ym(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,xn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),xn(e.params,t.params)||n.paramsSubject.next(t.params),J1(e.url,t.url)||n.urlSubject.next(t.url),xn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Vm(n,e){let t=xn(n.params,e.params)&&nF(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Vm(n.parent,e.parent))}function ab(n){return typeof n.title=="string"||n.title===null}var uu=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=oe,this.activateEvents=new He,this.deactivateEvents=new He,this.attachEvents=new He,this.detachEvents=new He,this.parentContexts=P(au),this.location=P($r),this.changeDetector=P(Gr),this.inputBinder=P(Td,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new z(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new z(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new z(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new z(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Lm(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Le({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ur]})}}return n})(),Lm=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Pn?this.route:e===au?this.childContexts:this.parent.get(e,t)}},Td=new q(""),jD=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Da([r.queryParams,r.params,r.data]).pipe(Gt(([o,s,a],c)=>(a=F(F(F({},o),s),a),c===0?Z(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=fD(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function TF(n,e,t){let r=Xa(n,e._root,t?t._root:void 0);return new Id(r,e)}function Xa(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=SF(n,e,t);return new Ut(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Xa(n,a)),s}}let r=AF(e.value),i=e.children.map(o=>Xa(n,o));return new Ut(r,i)}}function SF(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Xa(n,r,i);return Xa(n,r)})}function AF(n){return new Pn(new Qe(n.url),new Qe(n.params),new Qe(n.queryParams),new Qe(n.fragment),new Qe(n.data),n.outlet,n.component,n)}var eu=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},ub="ngNavigationCancelingError";function Cd(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Vi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=cb(!1,Bt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function cb(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[ub]=!0,t.cancellationCode=e,t}function RF(n){return lb(n)&&Vi(n.url)}function lb(n){return!!n&&n[ub]}var MF=(n,e,t,r)=>se(i=>(new jm(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),jm=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ym(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=is(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=is(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=is(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=is(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Pm(o.value.snapshot))}),e.children.length&&this.forwardEvent(new xm(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(ym(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),ym(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Dd=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},as=class{constructor(e,t){this.component=e,this.route=t}};function xF(n,e,t){let r=n._root,i=e?e._root:null;return qa(r,i,t,[r.value])}function NF(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function fs(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!e0(n)?n:e.get(n):r}function qa(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=is(e);return n.children.forEach(s=>{PF(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Qa(a,t.getContext(s),i)),i}function PF(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=OF(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Dd(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?qa(n,e,a?a.children:null,r,i):qa(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new as(a.outlet.component,s))}else s&&Qa(e,a,i),i.canActivateChecks.push(new Dd(r)),o.component?qa(n,null,a?a.children:null,r,i):qa(n,null,t,r,i);return i}function OF(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Fi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Fi(n.url,e.url)||!xn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Vm(n,e)||!xn(n.queryParams,e.queryParams);case"paramsChange":default:return!Vm(n,e)}}function Qa(n,e,t){let r=is(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Qa(s,e.children.getContext(o),t):Qa(s,null,t):Qa(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new as(e.outlet.component,i)):t.canDeactivateChecks.push(new as(null,i)):t.canDeactivateChecks.push(new as(null,i))}function cu(n){return typeof n=="function"}function kF(n){return typeof n=="boolean"}function FF(n){return n&&cu(n.canLoad)}function VF(n){return n&&cu(n.canActivate)}function LF(n){return n&&cu(n.canActivateChild)}function jF(n){return n&&cu(n.canDeactivate)}function UF(n){return n&&cu(n.canMatch)}function db(n){return n instanceof Wn||n?.name==="EmptyError"}var ld=Symbol("INITIAL_VALUE");function hs(){return Gt(n=>Da(n.map(e=>e.pipe(rn(1),ip(ld)))).pipe(se(e=>{for(let t of e)if(t!==!0){if(t===ld)return ld;if(t===!1||BF(t))return t}return!0}),qt(e=>e!==ld),rn(1)))}function BF(n){return Vi(n)||n instanceof eu}function $F(n,e){return $e(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Z(ce(F({},t),{guardsResult:!0})):HF(s,r,i,n).pipe($e(a=>a&&kF(a)?zF(r,o,n,e):Z(a)),se(a=>ce(F({},t),{guardsResult:a})))})}function HF(n,e,t,r){return Ne(n).pipe($e(i=>QF(i.component,i.route,t,e,r)),mn(i=>i!==!0,!0))}function zF(n,e,t,r){return Ne(e).pipe(Ei(i=>Do(GF(i.route.parent,r),qF(i.route,r),KF(n,i.path,t),WF(n,i.route,t))),mn(i=>i!==!0,!0))}function qF(n,e){return n!==null&&e&&e(new Nm(n)),Z(!0)}function GF(n,e){return n!==null&&e&&e(new Mm(n)),Z(!0)}function WF(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Z(!0);let i=r.map(o=>Kc(()=>{let s=su(e)??t,a=fs(o,s),c=VF(a)?a.canActivate(e,n):Dn(s,()=>a(e,n));return Zr(c).pipe(mn())}));return Z(i).pipe(hs())}function KF(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>NF(s)).filter(s=>s!==null).map(s=>Kc(()=>{let a=s.guards.map(c=>{let l=su(s.node)??t,h=fs(c,l),p=LF(h)?h.canActivateChild(r,n):Dn(l,()=>h(r,n));return Zr(p).pipe(mn())});return Z(a).pipe(hs())}));return Z(o).pipe(hs())}function QF(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Z(!0);let s=o.map(a=>{let c=su(e)??i,l=fs(a,c),h=jF(l)?l.canDeactivate(n,e,t,r):Dn(c,()=>l(n,e,t,r));return Zr(h).pipe(mn())});return Z(s).pipe(hs())}function YF(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return Z(!0);let o=i.map(s=>{let a=fs(s,n),c=FF(a)?a.canLoad(e,t):Dn(n,()=>a(e,t));return Zr(c)});return Z(o).pipe(hs(),hb(r))}function hb(n){return qf(Ye(e=>{if(typeof e!="boolean")throw Cd(n,e)}),se(e=>e===!0))}function ZF(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return Z(!0);let o=i.map(s=>{let a=fs(s,n),c=UF(a)?a.canMatch(e,t):Dn(n,()=>a(e,t));return Zr(c)});return Z(o).pipe(hs(),hb(r))}var tu=class{constructor(e){this.segmentGroup=e||null}},nu=class extends Error{constructor(e){super(),this.urlTree=e}};function rs(n){return Eo(new tu(n))}function JF(n){return Eo(new z(4e3,!1))}function XF(n){return Eo(cb(!1,Bt.GuardRejected))}var Um=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Z(r);if(i.numberOfChildren>1||!i.children[oe])return JF(`${e.redirectTo}`);i=i.children[oe]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:h,url:p,outlet:y,params:w,data:S,title:x}=i,M=Dn(o,()=>a({params:w,data:S,queryParams:c,fragment:l,routeConfig:h,url:p,outlet:y,title:x}));if(M instanceof or)throw new nu(M);t=M}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new nu(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new or(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new De(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new z(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Bm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function eV(n,e,t,r,i){let o=fb(n,e,t);return o.matched?(r=CF(e,r),ZF(r,e,t,i).pipe(se(s=>s===!0?o:F({},Bm)))):Z(o)}function fb(n,e,t){if(e.path==="**")return tV(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?F({},Bm):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Z1)(t,n,e);if(!i)return F({},Bm);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?F(F({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function tV(n){return{matched:!0,parameters:n.length>0?GD(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function UD(n,e,t,r){return t.length>0&&iV(n,t,r)?{segmentGroup:new De(e,rV(r,new De(t,n.children))),slicedSegments:[]}:t.length===0&&oV(n,t,r)?{segmentGroup:new De(n.segments,nV(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new De(n.segments,n.children),slicedSegments:t}}function nV(n,e,t,r){let i={};for(let o of t)if(Sd(n,e,o)&&!r[ln(o)]){let s=new De([],{});i[ln(o)]=s}return F(F({},r),i)}function rV(n,e){let t={};t[oe]=e;for(let r of n)if(r.path===""&&ln(r)!==oe){let i=new De([],{});t[ln(r)]=i}return t}function iV(n,e,t){return t.some(r=>Sd(n,e,r)&&ln(r)!==oe)}function oV(n,e,t){return t.some(r=>Sd(n,e,r))}function Sd(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function sV(n,e,t){return e.length===0&&!n.children[t]}var $m=class{};function aV(n,e,t,r,i,o,s="emptyOnly"){return new Hm(n,e,t,r,i,s,o).recognize()}var uV=31,Hm=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Um(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new z(4002,`'${e.segmentGroup}'`)}recognize(){let e=UD(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(se(({children:t,rootSnapshot:r})=>{let i=new Ut(r,t),o=new Ed("",i),s=mF(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new ss([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),oe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,oe,t).pipe(se(r=>({children:r,rootSnapshot:t})),Tr(r=>{if(r instanceof nu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof tu?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(se(s=>s instanceof Ut?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ne(o).pipe(Ei(s=>{let a=r.children[s],c=DF(t,s);return this.processSegmentGroup(e,c,a,s,i)}),rp((s,a)=>(s.push(...a),s)),Sr(null),np(),$e(s=>{if(s===null)return rs(r);let a=pb(s);return cV(a),Z(a)}))}processSegment(e,t,r,i,o,s,a){return Ne(t).pipe(Ei(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(Tr(l=>{if(l instanceof tu)return Z(null);throw l}))),mn(c=>!!c),Tr(c=>{if(db(c))return sV(r,i,o)?Z(new $m):rs(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return ln(r)!==s&&(s===oe||!Sd(i,o,r))?rs(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):rs(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:y}=fb(t,i,o);if(!c)return rs(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>uV&&(this.allowRedirects=!1));let w=new ss(o,l,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,BD(i),ln(i),i.component??i._loadedComponent??null,i,$D(i)),S=wd(w,a,this.paramsInheritanceStrategy);w.params=Object.freeze(S.params),w.data=Object.freeze(S.data);let x=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,w,e);return this.applyRedirects.lineralizeSegments(i,x).pipe($e(M=>this.processSegment(e,r,t,M.concat(y),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=eV(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Gt(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Gt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:y,remainingSegments:w}=c,S=new ss(y,p,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,BD(r),ln(r),r.component??r._loadedComponent??null,r,$D(r)),x=wd(S,s,this.paramsInheritanceStrategy);S.params=Object.freeze(x.params),S.data=Object.freeze(x.data);let{segmentGroup:M,slicedSegments:j}=UD(t,y,w,l);if(j.length===0&&M.hasChildren())return this.processChildren(h,l,M,S).pipe(se(Q=>new Ut(S,Q)));if(l.length===0&&j.length===0)return Z(new Ut(S,[]));let W=ln(r)===o;return this.processSegment(h,l,M,j,W?oe:o,!0,S).pipe(se(Q=>new Ut(S,Q instanceof Ut?[Q]:[])))}))):rs(t)))}getChildConfig(e,t,r){return t.children?Z({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Z({routes:t._loadedRoutes,injector:t._loadedInjector}):YF(e,t,r,this.urlSerializer).pipe($e(i=>i?this.configLoader.loadChildren(e,t).pipe(Ye(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):XF(t))):Z({routes:[],injector:e})}};function cV(n){n.sort((e,t)=>e.value.outlet===oe?-1:t.value.outlet===oe?1:e.value.outlet.localeCompare(t.value.outlet))}function lV(n){let e=n.value.routeConfig;return e&&e.path===""}function pb(n){let e=[],t=new Set;for(let r of n){if(!lV(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=pb(r.children);e.push(new Ut(r.value,i))}return e.filter(r=>!t.has(r))}function BD(n){return n.data||{}}function $D(n){return n.resolve||{}}function dV(n,e,t,r,i,o){return $e(s=>aV(n,e,t,r,s.extractedUrl,i,o).pipe(se(({state:a,tree:c})=>ce(F({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function hV(n,e){return $e(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Z(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of gb(c))s.add(l);let a=0;return Ne(s).pipe(Ei(c=>o.has(c)?fV(c,r,n,e):(c.data=wd(c,c.parent,n).resolve,Z(void 0))),Ye(()=>a++),bo(1),$e(c=>a===s.size?Z(t):Lt))})}function gb(n){let e=n.children.map(t=>gb(t)).flat();return[n,...e]}function fV(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!ab(i)&&(o[iu]=i.title),pV(o,n,e,r).pipe(se(s=>(n._resolvedData=s,n.data=wd(n,n.parent,t).resolve,null)))}function pV(n,e,t,r){let i=Im(n);if(i.length===0)return Z({});let o={};return Ne(i).pipe($e(s=>gV(n[s],e,t,r).pipe(mn(),Ye(a=>{if(a instanceof eu)throw Cd(new cs,a);o[s]=a}))),bo(1),tp(o),Tr(s=>db(s)?Lt:Eo(s)))}function gV(n,e,t,r){let i=su(e)??r,o=fs(n,i),s=o.resolve?o.resolve(e,t):Dn(i,()=>o(e,t));return Zr(s)}function vm(n){return Gt(e=>{let t=n(e);return t?Ne(t).pipe(se(()=>e)):Z(e)})}var mb=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===oe);return r}getResolvedTitleForRoute(t){return t.data[iu]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>P(mV),providedIn:"root"})}}return n})(),mV=(()=>{class n extends mb{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(Y(OD))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),lu=new q("",{providedIn:"root",factory:()=>({})}),yV=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=tt({type:n,selectors:[["ng-component"]],standalone:!0,features:[nt],decls:1,vars:0,template:function(r,i){r&1&&Ze(0,"router-outlet")},dependencies:[uu],encapsulation:2})}}return n})();function Gm(n){let e=n.children&&n.children.map(Gm),t=e?ce(F({},n),{children:e}):F({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==oe&&(t.component=yV),t}var ru=new q(""),Wm=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=P(td)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Z(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Zr(t.loadComponent()).pipe(se(yb),Ye(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),ba(()=>{this.componentLoaders.delete(t)})),i=new vo(r,()=>new Xe).pipe(yo());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=vV(r,this.compiler,t,this.onLoadEndListener).pipe(ba(()=>{this.childrenLoaders.delete(r)})),s=new vo(o,()=>new Xe).pipe(yo());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function vV(n,e,t,r){return Zr(n.loadChildren()).pipe(se(yb),$e(i=>i instanceof Na||Array.isArray(i)?Z(i):Ne(e.compileModuleAsync(i))),se(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(ru,[],{optional:!0,self:!0}).flat()),{routes:s.map(Gm),injector:o}}))}function _V(n){return n&&typeof n=="object"&&"default"in n}function yb(n){return _V(n)?n.default:n}var Km=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>P(IV),providedIn:"root"})}}return n})(),IV=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),vb=new q(""),_b=new q("");function wV(n,e,t){let r=n.get(_b),i=n.get(kt);return n.get(Ce).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),EV(n))),{onViewTransitionCreated:c}=r;return c&&Dn(n,()=>c({transition:a,from:e,to:t})),s})}function EV(n){return new Promise(e=>{qg({read:()=>setTimeout(e)},{injector:n})})}var CV=new q(""),Qm=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Xe,this.transitionAbortSubject=new Xe,this.configLoader=P(Wm),this.environmentInjector=P(jt),this.urlSerializer=P(ou),this.rootContexts=P(au),this.location=P(Xo),this.inputBindingEnabled=P(Td,{optional:!0})!==null,this.titleStrategy=P(mb),this.options=P(lu,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=P(Km),this.createViewTransition=P(vb,{optional:!0}),this.navigationErrorHandler=P(CV,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Z(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Am(i)),r=i=>this.events.next(new Rm(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(ce(F(F({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new Qe({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ka,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(qt(o=>o.id!==0),se(o=>ce(F({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Gt(o=>{let s=!1,a=!1;return Z(o).pipe(Gt(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Bt.SupersededByNewNavigation),Lt;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?ce(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new Yr(c.id,this.urlSerializer.serialize(c.rawUrl),p,md.IgnoredSameUrlNavigation)),c.resolve(!1),Lt}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return Z(c).pipe(Gt(p=>{let y=this.transitions?.getValue();return this.events.next(new ls(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),y!==this.transitions?.getValue()?Lt:Promise.resolve(p)}),dV(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ye(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=ce(F({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let y=new yd(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(y)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:p,extractedUrl:y,source:w,restoredState:S,extras:x}=c,M=new ls(p,this.urlSerializer.serialize(y),w,S);this.events.next(M);let j=ob(this.rootComponentType).snapshot;return this.currentTransition=o=ce(F({},c),{targetSnapshot:j,urlAfterRedirects:y,extras:ce(F({},x),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,Z(o)}else{let p="";return this.events.next(new Yr(c.id,this.urlSerializer.serialize(c.extractedUrl),p,md.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Lt}}),Ye(c=>{let l=new Dm(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),se(c=>(this.currentTransition=o=ce(F({},c),{guards:xF(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),$F(this.environmentInjector,c=>this.events.next(c)),Ye(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Cd(this.urlSerializer,c.guardsResult);let l=new bm(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),qt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Bt.GuardRejected),!1)),vm(c=>{if(c.guards.canActivateChecks.length)return Z(c).pipe(Ye(l=>{let h=new Tm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Gt(l=>{let h=!1;return Z(l).pipe(hV(this.paramsInheritanceStrategy,this.environmentInjector),Ye({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Bt.NoDataFromResolver)}}))}),Ye(l=>{let h=new Sm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),vm(c=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(Ye(y=>{h.component=y}),se(()=>{})));for(let y of h.children)p.push(...l(y));return p};return Da(l(c.targetSnapshot.root)).pipe(Sr(null),rn(1))}),vm(()=>this.afterPreactivation()),Gt(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return h?Ne(h).pipe(se(()=>o)):Z(o)}),se(c=>{let l=TF(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=ce(F({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),Ye(()=>{this.events.next(new Ja)}),MF(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),rn(1),Ye({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Nn(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),op(this.transitionAbortSubject.pipe(Ye(c=>{throw c}))),ba(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Bt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Tr(c=>{if(a=!0,lb(c))this.events.next(new ir(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),RF(c)?this.events.next(new ds(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Za(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let h=Dn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof eu){let{message:p,cancellationCode:y}=Cd(this.urlSerializer,h);this.events.next(new ir(o.id,this.urlSerializer.serialize(o.extractedUrl),p,y)),this.events.next(new ds(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(c);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return Lt}))}))}cancelNavigationTransition(t,r,i){let o=new ir(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function DV(n){return n!==Ka}var bV=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>P(TV),providedIn:"root"})}}return n})(),zm=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},TV=(()=>{class n extends zm{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Wo(n)))(i||n)}})()}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ib=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>P(SV),providedIn:"root"})}}return n})(),SV=(()=>{class n extends Ib{constructor(){super(...arguments),this.location=P(Xo),this.urlSerializer=P(ou),this.options=P(lu,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=P(Km),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new or,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=ob(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof ls)this.stateMemento=this.createStateMemento();else if(t instanceof Yr)this.rawUrlTree=r.initialUrl;else if(t instanceof yd){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Ja?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof ir&&(t.code===Bt.GuardRejected||t.code===Bt.NoDataFromResolver)?this.restoreHistory(r):t instanceof Za?this.restoreHistory(r,!0):t instanceof Nn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof or?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=F(F({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=F(F({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Wo(n)))(i||n)}})()}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ga=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Ga||{});function wb(n,e){n.events.pipe(qt(t=>t instanceof Nn||t instanceof ir||t instanceof Za||t instanceof Yr),se(t=>t instanceof Nn||t instanceof Yr?Ga.COMPLETE:(t instanceof ir?t.code===Bt.Redirect||t.code===Bt.SupersededByNewNavigation:!1)?Ga.REDIRECTING:Ga.FAILED),qt(t=>t!==Ga.REDIRECTING),rn(1)).subscribe(()=>{e()})}function AV(n){throw n}var RV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},MV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},xe=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=P(Jl),this.stateManager=P(Ib),this.options=P(lu,{optional:!0})||{},this.pendingTasks=P(Ko),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=P(Qm),this.urlSerializer=P(ou),this.location=P(Xo),this.urlHandlingStrategy=P(Km),this._events=new Xe,this.errorHandler=this.options.errorHandler||AV,this.navigated=!1,this.routeReuseStrategy=P(bV),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=P(ru,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!P(Td,{optional:!0}),this.eventsSubscription=new Ve,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof ir&&r.code!==Bt.Redirect&&r.code!==Bt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Nn)this.navigated=!0;else if(r instanceof ds){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=F({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||DV(i.source)},s);this.scheduleNavigation(a,Ka,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}NV(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ka,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=F({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Gm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=F(F({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let y=i?i.snapshot:this.routerState.snapshot.root;p=tb(y)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return nb(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Vi(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Ka,null,r)}navigate(t,r={skipLocationChange:!1}){return xV(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=F({},RV):r===!1?i=F({},MV):i=r,Vi(t))return kD(this.currentUrlTree,t,i);let o=this.parseUrl(t);return kD(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((p,y)=>{a=p,c=y});let h=this.pendingTasks.add();return wb(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function xV(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new z(4008,!1)}function NV(n){return!(n instanceof Ja)&&!(n instanceof ds)}var Eb=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new Xe,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Nn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Vi(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:vC(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Vi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(L(xe),L(Pn),Cg("tabindex"),L(er),L(bn),L(Mn))}}static{this.\u0275dir=Le({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&Se("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&ja("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Wr],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Wr],replaceUrl:[2,"replaceUrl","replaceUrl",Wr],routerLink:"routerLink"},standalone:!0,features:[zg,Ur]})}}return n})();var bd=class{};var PV=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(qt(t=>t instanceof Nn),Ei(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Yl(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Ne(i).pipe(Co())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=Z(null);let o=i.pipe($e(s=>s===null?Z(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Ne([o,s]).pipe(Co())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(Y(xe),Y(td),Y(jt),Y(bd),Y(Wm))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Cb=new q(""),OV=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ls?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Nn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Yr&&t.code===md.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof vd&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new vd(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){xC()}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function Db(n,...e){return Cn([{provide:ru,multi:!0,useValue:n},[],{provide:Pn,useFactory:bb,deps:[xe]},{provide:ed,multi:!0,useFactory:Tb},e.map(t=>t.\u0275providers)])}function bb(n){return n.routerState.root}function ps(n,e){return{\u0275kind:n,\u0275providers:e}}function Tb(){let n=P(et);return e=>{let t=n.get(Oi);if(e!==t.components[0])return;let r=n.get(xe),i=n.get(Sb);n.get(Ym)===1&&r.initialNavigation(),n.get(Ab,null,ae.Optional)?.setUpPreloading(),n.get(Cb,null,ae.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Sb=new q("",{factory:()=>new Xe}),Ym=new q("",{providedIn:"root",factory:()=>1});function kV(){return ps(2,[{provide:Ym,useValue:0},{provide:Xl,multi:!0,deps:[et],useFactory:e=>{let t=e.get(wD,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(xe),o=e.get(Sb);wb(i,()=>{r(!0)}),e.get(Qm).afterPreactivation=()=>(r(!0),o.closed?Z(void 0):o),i.initialNavigation()}))}}])}function FV(){return ps(3,[{provide:Xl,multi:!0,useFactory:()=>{let e=P(xe);return()=>{e.setUpLocationChangeListener()}}},{provide:Ym,useValue:2}])}var Ab=new q("");function VV(n){return ps(0,[{provide:Ab,useExisting:PV},{provide:bd,useExisting:n}])}function Rb(){return ps(6,[{provide:Mn,useClass:om}])}function LV(){return ps(8,[jD,{provide:Td,useExisting:jD}])}function jV(n){let e=[{provide:vb,useValue:wV},{provide:_b,useValue:F({skipNextTransition:!!n?.skipInitialTransition},n)}];return ps(9,e)}var HD=new q("ROUTER_FORROOT_GUARD"),UV=[Xo,{provide:ou,useClass:cs},xe,au,{provide:Pn,useFactory:bb,deps:[xe]},Wm,[]],Mb=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[UV,[],{provide:ru,multi:!0,useValue:t},{provide:HD,useFactory:zV,deps:[[xe,new pt,new dg]]},{provide:lu,useValue:r||{}},r?.useHash?$V():HV(),BV(),r?.preloadingStrategy?VV(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?qV(r):[],r?.bindToComponentInputs?LV().\u0275providers:[],r?.enableViewTransitions?jV().\u0275providers:[],GV()]}}static forChild(t){return{ngModule:n,providers:[{provide:ru,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(Y(HD,8))}}static{this.\u0275mod=jr({type:n})}static{this.\u0275inj=Lr({})}}return n})();function BV(){return{provide:Cb,useFactory:()=>{let n=P(bD),e=P(Ce),t=P(lu),r=P(Qm),i=P(ou);return t.scrollOffset&&n.setOffset(t.scrollOffset),new OV(i,r,n,e,t)}}}function $V(){return{provide:Mn,useClass:om}}function HV(){return{provide:Mn,useClass:im}}function zV(n){return"guarded"}function qV(n){return[n.initialNavigation==="disabled"?FV().\u0275providers:[],n.initialNavigation==="enabledBlocking"?kV().\u0275providers:[]]}var zD=new q("");function GV(){return[{provide:zD,useFactory:Tb},{provide:ed,multi:!0,useExisting:zD}]}var Nb=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},WV=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Pb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,y=(a&15)<<2|l>>6,w=l&63;c||(w=64,s||(y=64)),r.push(t[h],t[p],t[y],t[w])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Nb(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):WV(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new Jm;let y=o<<2|a>>4;if(r.push(y),l!==64){let w=a<<4&240|l>>2;if(r.push(w),p!==64){let S=l<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Jm=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},KV=function(n){let e=Nb(n);return Pb.encodeByteArray(e,!0)},du=function(n){return KV(n).replace(/\./g,"")},ey=function(n){try{return Pb.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function QV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var YV=()=>QV().__FIREBASE_DEFAULTS__,ZV=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},JV=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&ey(n[1]);return e&&JSON.parse(e)},Rd=()=>{try{return YV()||ZV()||JV()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},ty=n=>{var e,t;return(t=(e=Rd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Ob=n=>{let e=ty(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},ny=()=>{var n;return(n=Rd())===null||n===void 0?void 0:n.config},ry=n=>{var e;return(e=Rd())===null||e===void 0?void 0:e[`_${n}`]};var Ad=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function kb(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[du(JSON.stringify(t)),du(JSON.stringify(s)),""].join(".")}function it(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Fb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(it())}function XV(){var n;let e=(n=Rd())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Vb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Lb(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function jb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ub(){let n=it();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Bb(){return!XV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function iy(){try{return typeof indexedDB=="object"}catch{return!1}}function $b(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var eL="FirebaseError",$t=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=eL,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sr.prototype.create)}},sr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?tL(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new $t(i,a,r)}};function tL(n,e){return n.replace(nL,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var nL=/\{\$([^}]+)}/g;function Hb(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Li(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(xb(o)&&xb(s)){if(!Li(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function xb(n){return n!==null&&typeof n=="object"}function hu(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function gs(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function ms(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function zb(n,e){let t=new Xm(n,e);return t.subscribe.bind(t)}var Xm=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");rL(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Zm),i.error===void 0&&(i.error=Zm),i.complete===void 0&&(i.complete=Zm);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function rL(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Zm(){}var P8=4*60*60*1e3;function at(n){return n&&n._delegate?n._delegate:n}var Xt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ji="[DEFAULT]";var oy=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Ad;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(oL(e))try{this.getOrInitializeService({instanceIdentifier:ji})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ji){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ji){return this.instances.has(e)}getOptions(e=ji){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:iL(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ji){return this.component?this.component.multipleInstances?e:ji:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function iL(n){return n===ji?void 0:n}function oL(n){return n.instantiationMode==="EAGER"}var Md=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new oy(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var sL=[],pe=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(pe||{}),aL={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},uL=pe.INFO,cL={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},lL=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=cL[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Xr=class{constructor(e){this.name=e,this._logLevel=uL,this._logHandler=lL,this._userLogHandler=null,sL.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?aL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}};var dL=(n,e)=>e.some(t=>n instanceof t),qb,Gb;function hL(){return qb||(qb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fL(){return Gb||(Gb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Wb=new WeakMap,ay=new WeakMap,Kb=new WeakMap,sy=new WeakMap,cy=new WeakMap;function pL(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(On(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&Wb.set(t,n)}).catch(()=>{}),cy.set(e,n),e}function gL(n){if(ay.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});ay.set(n,e)}var uy={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ay.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Kb.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return On(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Qb(n){uy=n(uy)}function mL(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(xd(this),e,...t);return Kb.set(r,e.sort?e.sort():[e]),On(r)}:fL().includes(n)?function(...e){return n.apply(xd(this),e),On(Wb.get(this))}:function(...e){return On(n.apply(xd(this),e))}}function yL(n){return typeof n=="function"?mL(n):(n instanceof IDBTransaction&&gL(n),dL(n,hL())?new Proxy(n,uy):n)}function On(n){if(n instanceof IDBRequest)return pL(n);if(sy.has(n))return sy.get(n);let e=yL(n);return e!==n&&(sy.set(n,e),cy.set(e,n)),e}var xd=n=>cy.get(n);function Zb(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=On(s);return r&&s.addEventListener("upgradeneeded",c=>{r(On(s.result),c.oldVersion,c.newVersion,On(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var vL=["get","getKey","getAll","getAllKeys","count"],_L=["put","add","delete","clear"],ly=new Map;function Yb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ly.get(e))return ly.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=_L.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||vL.includes(t)))return;let o=function(s,...a){return v(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&c.done]))[0]})};return ly.set(e,o),o}Qb(n=>ce(F({},n),{get:(e,t,r)=>Yb(e,t)||n.get(e,t,r),has:(e,t)=>!!Yb(e,t)||n.has(e,t)}));var hy=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(IL(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function IL(n){let e=n.getComponent();return e?.type==="VERSION"}var fy="@firebase/app",Jb="0.10.13";var ar=new Xr("@firebase/app"),wL="@firebase/app-compat",EL="@firebase/analytics-compat",CL="@firebase/analytics",DL="@firebase/app-check-compat",bL="@firebase/app-check",TL="@firebase/auth",SL="@firebase/auth-compat",AL="@firebase/database",RL="@firebase/data-connect",ML="@firebase/database-compat",xL="@firebase/functions",NL="@firebase/functions-compat",PL="@firebase/installations",OL="@firebase/installations-compat",kL="@firebase/messaging",FL="@firebase/messaging-compat",VL="@firebase/performance",LL="@firebase/performance-compat",jL="@firebase/remote-config",UL="@firebase/remote-config-compat",BL="@firebase/storage",$L="@firebase/storage-compat",HL="@firebase/firestore",zL="@firebase/vertexai-preview",qL="@firebase/firestore-compat",GL="firebase",WL="10.14.1";var py="[DEFAULT]",KL={[fy]:"fire-core",[wL]:"fire-core-compat",[CL]:"fire-analytics",[EL]:"fire-analytics-compat",[bL]:"fire-app-check",[DL]:"fire-app-check-compat",[TL]:"fire-auth",[SL]:"fire-auth-compat",[AL]:"fire-rtdb",[RL]:"fire-data-connect",[ML]:"fire-rtdb-compat",[xL]:"fire-fn",[NL]:"fire-fn-compat",[PL]:"fire-iid",[OL]:"fire-iid-compat",[kL]:"fire-fcm",[FL]:"fire-fcm-compat",[VL]:"fire-perf",[LL]:"fire-perf-compat",[jL]:"fire-rc",[UL]:"fire-rc-compat",[BL]:"fire-gcs",[$L]:"fire-gcs-compat",[HL]:"fire-fst",[qL]:"fire-fst-compat",[zL]:"fire-vertex","fire-js":"fire-js",[GL]:"fire-js-all"};var fu=new Map,QL=new Map,gy=new Map;function Xb(n,e){try{n.container.addComponent(e)}catch(t){ar.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ti(n){let e=n.name;if(gy.has(e))return ar.debug(`There were multiple attempts to register component ${e}.`),!1;gy.set(e,n);for(let t of fu.values())Xb(t,n);for(let t of QL.values())Xb(t,n);return!0}function gu(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function dn(n){return n.settings!==void 0}var YL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ei=new sr("app","Firebase",YL);var my=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ei.create("app-deleted",{appName:this._name})}};var ni=WL;function _y(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:py,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ei.create("bad-app-name",{appName:String(i)});if(t||(t=ny()),!t)throw ei.create("no-options");let o=fu.get(i);if(o){if(Li(t,o.options)&&Li(r,o.config))return o;throw ei.create("duplicate-app",{appName:i})}let s=new Md(i);for(let c of gy.values())s.addComponent(c);let a=new my(t,r,s);return fu.set(i,a),a}function ys(n=py){let e=fu.get(n);if(!e&&n===py&&ny())return _y();if(!e)throw ei.create("no-app",{appName:n});return e}function Nd(){return Array.from(fu.values())}function Je(n,e,t){var r;let i=(r=KL[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ar.warn(a.join(" "));return}ti(new Xt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var ZL="firebase-heartbeat-database",JL=1,pu="firebase-heartbeat-store",dy=null;function rT(){return dy||(dy=Zb(ZL,JL,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(pu)}catch(t){console.warn(t)}}}}).catch(n=>{throw ei.create("idb-open",{originalErrorMessage:n.message})})),dy}function XL(n){return v(this,null,function*(){try{let t=(yield rT()).transaction(pu),r=yield t.objectStore(pu).get(iT(n));return yield t.done,r}catch(e){if(e instanceof $t)ar.warn(e.message);else{let t=ei.create("idb-get",{originalErrorMessage:e?.message});ar.warn(t.message)}}})}function eT(n,e){return v(this,null,function*(){try{let r=(yield rT()).transaction(pu,"readwrite");yield r.objectStore(pu).put(e,iT(n)),yield r.done}catch(t){if(t instanceof $t)ar.warn(t.message);else{let r=ei.create("idb-set",{originalErrorMessage:t?.message});ar.warn(r.message)}}})}function iT(n){return`${n.name}!${n.options.appId}`}var e4=1024,t4=30*24*60*60*1e3,yy=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new vy(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=tT();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{let a=new Date(s.date).valueOf();return Date.now()-a<=t4}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ar.warn(r)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=tT(),{heartbeatsToSend:r,unsentEntries:i}=n4(this._heartbeatsCache.heartbeats),o=du(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return ar.warn(t),""}})}};function tT(){return new Date().toISOString().substring(0,10)}function n4(n,e=e4){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),nT(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),nT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var vy=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return iy()?$b().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield XL(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return eT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return eT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function nT(n){return du(JSON.stringify({version:2,heartbeats:n})).length}function r4(n){ti(new Xt("platform-logger",e=>new hy(e),"PRIVATE")),ti(new Xt("heartbeat",e=>new yy(e),"PRIVATE")),Je(fy,Jb,n),Je(fy,Jb,"esm2017"),Je("fire-js","")}r4("");var i4="firebase",o4="10.14.1";Je(i4,o4,"app");var Bi=new Yn("ANGULARFIRE2_VERSION");function Od(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var mu=(n,e)=>{let t=e?[e]:Nd(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},_s=class{constructor(){return mu(s4)}},s4="app-check";function vs(){}var Pd=class{zone;delegate;constructor(e,t=Zf){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},Iy=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vs,{},vs,vs)),t.pipe(Ye({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Is=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Pd(Zone.current)),this.insideAngular=t.run(()=>new Pd(Zone.current,Yf)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(Y(Ce))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function kd(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function a4(n){return kd().ngZone.runOutsideAngular(()=>n())}function Ui(n){return kd().ngZone.run(()=>n())}function u4(n){return c4(kd())(n)}function c4(n){return function(t){return t=t.lift(new Iy(n.ngZone)),t.pipe(br(n.outsideAngular),Dr(n.insideAngular))}}var l4=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Ui(()=>n.apply(void 0,r))},ut=(n,e)=>function(){let t,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(t||=Ui(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vs,{},vs,vs))),r[o]=l4(r[o],t));let i=a4(()=>n.apply(this,r));if(!e)if(i instanceof he){let o=kd();return i.pipe(br(o.outsideAngular),Dr(o.insideAngular))}else return Ui(()=>i);return i instanceof he?i.pipe(u4):i instanceof Promise?Ui(()=>new Promise((o,s)=>i.then(a=>Ui(()=>o(a)),a=>Ui(()=>s(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:Ui(()=>i)};var ur=class{constructor(e){return e}},$i=class{constructor(){return Nd()}};function d4(n){return n&&n.length===1?n[0]:new ur(ys())}var wy=new q("angularfire2._apps"),h4={provide:ur,useFactory:d4,deps:[[new pt,wy]]},f4={provide:$i,deps:[[new pt,wy]]};function p4(n){return(e,t)=>{let r=t.get(Tn);Je("angularfire",Bi.full,"core"),Je("angularfire",Bi.full,"app"),Je("angular",sD.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new ur(i)}}function oT(n,...e){return Cn([h4,f4,{provide:wy,useFactory:p4(n),multi:!0,deps:[Ce,et,Is,...e]}])}var sT=ut(_y,!0);function CT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var DT=CT,bT=new sr("auth","Firebase",CT());var Bd=new Xr("@firebase/auth");function g4(n,...e){Bd.logLevel<=pe.WARN&&Bd.warn(`Auth (${ni}): ${n}`,...e)}function Vd(n,...e){Bd.logLevel<=pe.ERROR&&Bd.error(`Auth (${ni}): ${n}`,...e)}function Fn(n,...e){throw zy(n,...e)}function Hi(n,...e){return zy(n,...e)}function TT(n,e,t){let r=Object.assign(Object.assign({},DT()),{[e]:t});return new sr("auth","Firebase",r).create(e,{appName:n.name})}function dr(n){return TT(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zy(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return bT.create(n,...e)}function J(n,e,...t){if(!n)throw zy(e,...t)}function cr(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Vd(e),new Error(e)}function ii(n,e){n||cr(e)}function by(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function m4(){return aT()==="http:"||aT()==="https:"}function aT(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function y4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(m4()||Lb()||"connection"in navigator)?navigator.onLine:!0}function v4(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var zi=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,ii(t>e,"Short delay should be less than long delay!"),this.isMobile=Fb()||jb()}get(){return y4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function qy(n,e){ii(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var $d=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;cr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;cr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;cr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var _4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var I4=new zi(3e4,6e4);function oi(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function si(o,s,a,c){return v(this,arguments,function*(n,e,t,r,i={}){return ST(n,i,()=>v(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=hu(Object.assign({key:n.config.apiKey},h)).slice(1),y=yield n._getAdditionalHeaders();y["Content-Type"]="application/json",n.languageCode&&(y["X-Firebase-Locale"]=n.languageCode);let w=Object.assign({method:e,headers:y},l);return Vb()||(w.referrerPolicy="no-referrer"),$d.fetch()(AT(n,n.config.apiHost,t,p),w)}))})}function ST(n,e,t){return v(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},_4),e);try{let i=new Ty(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Fd(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fd(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Fd(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw Fd(n,"user-disabled",s);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw TT(n,h,l);Fn(n,h)}}catch(i){if(i instanceof $t)throw i;Fn(n,"network-request-failed",{message:String(i)})}})}function Du(o,s,a,c){return v(this,arguments,function*(n,e,t,r,i={}){let l=yield si(n,e,t,r,i);return"mfaPendingCredential"in l&&Fn(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function AT(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?qy(n.config,i):`${n.config.apiScheme}://${i}`}function w4(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Ty=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Hi(this.auth,"network-request-failed")),I4.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Fd(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Hi(n,e,r);return i.customData._tokenResponse=t,i}function uT(n){return n!==void 0&&n.enterprise!==void 0}var Sy=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return w4(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function E4(n,e){return v(this,null,function*(){return si(n,"GET","/v2/recaptchaConfig",oi(n,e))})}function C4(n,e){return v(this,null,function*(){return si(n,"POST","/v1/accounts:delete",e)})}function RT(n,e){return v(this,null,function*(){return si(n,"POST","/v1/accounts:lookup",e)})}function yu(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Gy(n,e=!1){return v(this,null,function*(){let t=at(n),r=yield t.getIdToken(e),i=Wy(r);J(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:yu(Ey(i.auth_time)),issuedAtTime:yu(Ey(i.iat)),expirationTime:yu(Ey(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Ey(n){return Number(n)*1e3}function Wy(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Vd("JWT malformed, contained fewer than 3 sections"),null;try{let i=ey(t);return i?JSON.parse(i):(Vd("Failed to decode base64 JWT payload"),null)}catch(i){return Vd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function cT(n){let e=Wy(n);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function _u(n,e,t=!1){return v(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof $t&&D4(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function D4({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Ay=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),t)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Iu=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=yu(this.lastLoginAt),this.creationTime=yu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Hd(n){return v(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield _u(n,RT(t,{idToken:r}));J(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?MT(o.providerUserInfo):[],a=b4(n.providerData,s),c=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,h=c?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Iu(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function Ky(n){return v(this,null,function*(){let e=at(n);yield Hd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function b4(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function MT(n){return n.map(e=>{var{providerId:t}=e,r=Jf(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function T4(n,e){return v(this,null,function*(){let t=yield ST(n,{},()=>v(this,null,function*(){let r=hu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=AT(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",$d.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function S4(n,e){return v(this,null,function*(){return si(n,"POST","/v2/accounts:revokeToken",oi(n,e))})}var vu=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){J(e.length!==0,"internal-error");let t=cT(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return v(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield T4(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(J(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(J(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(J(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return cr("not implemented")}};function ri(n,e){J(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var ws=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Jf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ay(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Iu(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let t=yield _u(this,this.stsTokenManager.getToken(this.auth,e));return J(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Gy(this,e)}reload(){return Ky(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Hd(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(dn(this.auth.app))return Promise.reject(dr(this.auth));let e=yield this.getIdToken();return yield _u(this,C4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,c,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,y=(i=t.email)!==null&&i!==void 0?i:void 0,w=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,S=(s=t.photoURL)!==null&&s!==void 0?s:void 0,x=(a=t.tenantId)!==null&&a!==void 0?a:void 0,M=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,j=(l=t.createdAt)!==null&&l!==void 0?l:void 0,W=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:Q,emailVerified:le,isAnonymous:ke,providerData:ne,stsTokenManager:C}=t;J(Q&&C,e,"internal-error");let m=vu.fromJSON(this.name,C);J(typeof Q=="string",e,"internal-error"),ri(p,e.name),ri(y,e.name),J(typeof le=="boolean",e,"internal-error"),J(typeof ke=="boolean",e,"internal-error"),ri(w,e.name),ri(S,e.name),ri(x,e.name),ri(M,e.name),ri(j,e.name),ri(W,e.name);let _=new n({uid:Q,auth:e,email:y,emailVerified:le,displayName:p,isAnonymous:ke,photoURL:S,phoneNumber:w,tenantId:x,stsTokenManager:m,createdAt:j,lastLoginAt:W});return ne&&Array.isArray(ne)&&(_.providerData=ne.map(E=>Object.assign({},E))),M&&(_._redirectEventId=M),_}static _fromIdTokenResponse(e,t,r=!1){return v(this,null,function*(){let i=new vu;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Hd(o),o})}static _fromGetAccountInfoResponse(e,t,r){return v(this,null,function*(){let i=t.users[0];J(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?MT(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new vu;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Iu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,l),c})}};var lT=new Map;function lr(n){ii(n instanceof Function,"Expected a class definition");let e=lT.get(n);return e?(ii(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,lT.set(n,e),e)}var A4=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(t,r){return v(this,null,function*(){this.storage[t]=r})}_get(t){return v(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return v(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Ry=A4;function Ld(n,e,t){return`firebase:${n}:${e}:${t}`}var zd=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Ld(this.userKey,i.apiKey,o),this.fullPersistenceKey=Ld("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?ws._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return v(this,null,function*(){if(!t.length)return new n(lr(Ry),e,r);let i=(yield Promise.all(t.map(l=>v(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||lr(Ry),s=Ld(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(s);if(h){let p=ws._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>v(this,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function dT(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(OT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(FT(e))return"Blackberry";if(VT(e))return"Webos";if(NT(e))return"Safari";if((e.includes("chrome/")||PT(e))&&!e.includes("edge/"))return"Chrome";if(kT(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function xT(n=it()){return/firefox\//i.test(n)}function NT(n=it()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function PT(n=it()){return/crios\//i.test(n)}function OT(n=it()){return/iemobile/i.test(n)}function kT(n=it()){return/android/i.test(n)}function FT(n=it()){return/blackberry/i.test(n)}function VT(n=it()){return/webos/i.test(n)}function Qy(n=it()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function R4(n=it()){var e;return Qy(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function M4(){return Ub()&&document.documentMode===10}function LT(n=it()){return Qy(n)||kT(n)||VT(n)||FT(n)||/windows phone/i.test(n)||OT(n)}function jT(n,e=[]){let t;switch(n){case"Browser":t=dT(it());break;case"Worker":t=`${dT(it())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ni}/${r}`}var My=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function x4(t){return v(this,arguments,function*(n,e={}){return si(n,"GET","/v2/passwordPolicy",oi(n,e))})}var N4=6,xy=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:N4,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Ny=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qd(this),this.idTokenSubscription=new qd(this),this.beforeStateQueue=new My(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=lr(t)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield zd.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let t=yield RT(this,{idToken:e}),r=yield ws._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var t;if(dn(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield Hd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=v4()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(dn(this.app))return Promise.reject(dr(this));let t=e?at(e):null;return t&&J(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return v(this,null,function*(){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return dn(this.app)?Promise.reject(dr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return dn(this.app)?Promise.reject(dr(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(lr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield x4(this),t=new xy(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new sr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield S4(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&lr(e)||this._popupRedirectResolver;J(t,this,"argument-error"),this.redirectPersistenceManager=yield zd.create(this,[lr(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return v(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&g4(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Gi(n){return at(n)}var qd=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=zb(t=>this.observer=t)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Jd={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function P4(n){Jd=n}function UT(n){return Jd.loadJS(n)}function O4(){return Jd.recaptchaEnterpriseScript}function k4(){return Jd.gapiScript}function BT(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var F4="recaptcha-enterprise",V4="NO_RECAPTCHA",Py=class{constructor(e){this.type=F4,this.auth=Gi(e)}verify(e="verify",t=!1){return v(this,null,function*(){function r(o){return v(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>v(this,null,function*(){E4(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new Sy(c);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(c=>{a(c)})}))})}function i(o,s,a){let c=window.grecaptcha;uT(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(V4)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&uT(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=O4();c.length!==0&&(c+=a),UT(c).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function hT(n,e,t,r=!1){return v(this,null,function*(){let i=new Py(n),o;try{o=yield i.verify(t)}catch{o=yield i.verify(t,!0)}let s=Object.assign({},e);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s})}function Oy(n,e,t,r){return v(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=yield hT(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(o=>v(this,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let s=yield hT(n,e,t,t==="getOobCode");return r(n,s)}else return Promise.reject(o)}))})}function Yy(n,e){let t=gu(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Li(o,e??{}))return i;Fn(i,"already-initialized")}return t.initialize({options:e})}function L4(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(lr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Zy(n,e,t){let r=Gi(n);J(r._canInitEmulator,r,"emulator-config-failed"),J(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=$T(e),{host:s,port:a}=j4(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||U4()}function $T(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function j4(n){let e=$T(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:fT(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:fT(s)}}}function fT(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function U4(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var wu=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return cr("not implemented")}_getIdTokenResponse(e){return cr("not implemented")}_linkToIdToken(e,t){return cr("not implemented")}_getReauthenticationResolver(e){return cr("not implemented")}};function B4(n,e){return v(this,null,function*(){return si(n,"POST","/v1/accounts:signUp",e)})}function $4(n,e){return v(this,null,function*(){return Du(n,"POST","/v1/accounts:signInWithPassword",oi(n,e))})}function H4(n,e){return v(this,null,function*(){return Du(n,"POST","/v1/accounts:signInWithEmailLink",oi(n,e))})}function z4(n,e){return v(this,null,function*(){return Du(n,"POST","/v1/accounts:signInWithEmailLink",oi(n,e))})}var Eu=class n extends wu{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return v(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Oy(e,t,"signInWithPassword",$4);case"emailLink":return H4(e,{email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}})}_linkToIdToken(e,t){return v(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Oy(e,r,"signUpPassword",B4);case"emailLink":return z4(e,{idToken:t,email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Cy(n,e){return v(this,null,function*(){return Du(n,"POST","/v1/accounts:signInWithIdp",oi(n,e))})}function q4(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function G4(n){let e=gs(ms(n)).link,t=e?gs(ms(e)).deep_link_id:null,r=gs(ms(n)).deep_link_id;return(r?gs(ms(r)).link:null)||r||t||e||n}var Gd=class n{constructor(e){var t,r,i,o,s,a;let c=gs(ms(e)),l=(t=c.apiKey)!==null&&t!==void 0?t:null,h=(r=c.oobCode)!==null&&r!==void 0?r:null,p=q4((i=c.mode)!==null&&i!==void 0?i:null);J(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=c.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=G4(e);try{return new n(t)}catch{return null}}};var HT=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Eu._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=Gd.parseLink(r);return J(i,"argument-error"),Eu._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Wd=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var ky=class extends Wd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function W4(n,e){return v(this,null,function*(){return Du(n,"POST","/v1/accounts:signUp",oi(n,e))})}var Es=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return v(this,null,function*(){let o=yield ws._fromIdTokenResponse(e,r,i),s=pT(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=pT(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function pT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Fy=class n extends $t{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function zT(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Fy._fromErrorAndOperation(n,o,e,r):o})}function K4(n,e,t=!1){return v(this,null,function*(){let r=yield _u(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Es._forOperation(n,"link",r)})}function Q4(n,e,t=!1){return v(this,null,function*(){let{auth:r}=n;if(dn(r.app))return Promise.reject(dr(r));let i="reauthenticate";try{let o=yield _u(n,zT(r,i,e,n),t);J(o.idToken,r,"internal-error");let s=Wy(o.idToken);J(s,r,"internal-error");let{sub:a}=s;return J(n.uid===a,r,"user-mismatch"),Es._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Fn(r,"user-mismatch"),o}})}function qT(n,e,t=!1){return v(this,null,function*(){if(dn(n.app))return Promise.reject(dr(n));let r="signIn",i=yield zT(n,r,e),o=yield Es._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function Jy(n,e){return v(this,null,function*(){return qT(Gi(n),e)})}function GT(n){return v(this,null,function*(){let e=Gi(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Xy(n,e,t){return v(this,null,function*(){if(dn(n.app))return Promise.reject(dr(n));let r=Gi(n),s=yield Oy(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",W4).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&GT(n),c}),a=yield Es._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function ev(n,e,t){return dn(n.app)?Promise.reject(dr(n)):Jy(at(n),HT.credential(e,t)).catch(r=>v(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&GT(n),r}))}function Xd(n,e,t,r){return at(n).onIdTokenChanged(e,t,r)}function tv(n,e,t){return at(n).beforeAuthStateChanged(e,t)}function eh(n,e,t,r){return at(n).onAuthStateChanged(e,t,r)}function nv(n){return at(n).signOut()}var Kd="__sak";var Qd=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Kd,"1"),this.storage.removeItem(Kd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var Y4=1e3,Z4=10,J4=(()=>{class n extends Qd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=LT(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);M4()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,Z4):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},Y4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return v(this,null,function*(){yield Er(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return v(this,null,function*(){let r=yield Er(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return v(this,null,function*(){yield Er(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),WT=J4;var X4=(()=>{class n extends Qd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),rv=X4;function e2(n){return Promise.all(n.map(e=>v(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var t2=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return v(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(h=>v(this,null,function*(){return h(r.origin,s)})),l=yield e2(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function KT(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Vy=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let l=KT("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let y=p;if(y.data.eventId===l)switch(y.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(y.data.response);break;default:clearTimeout(h),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function kn(){return window}function n2(n){kn().location.href=n}function QT(){return typeof kn().WorkerGlobalScope<"u"&&typeof kn().importScripts=="function"}function r2(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function i2(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function o2(){return QT()?self:null}var YT="firebaseLocalStorageDb",s2=1,Yd="firebaseLocalStorage",ZT="fbase_key",qi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function th(n,e){return n.transaction([Yd],e?"readwrite":"readonly").objectStore(Yd)}function a2(){let n=indexedDB.deleteDatabase(YT);return new qi(n).toPromise()}function Ly(){let n=indexedDB.open(YT,s2);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Yd,{keyPath:ZT})}catch(i){t(i)}}),n.addEventListener("success",()=>v(this,null,function*(){let r=n.result;r.objectStoreNames.contains(Yd)?e(r):(r.close(),yield a2(),e(yield Ly()))}))})}function gT(n,e,t){return v(this,null,function*(){let r=th(n,!0).put({[ZT]:e,value:t});return new qi(r).toPromise()})}function u2(n,e){return v(this,null,function*(){let t=th(n,!1).get(e),r=yield new qi(t).toPromise();return r===void 0?null:r.value})}function mT(n,e){let t=th(n,!0).delete(e);return new qi(t).toPromise()}var c2=800,l2=3,d2=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield Ly(),this.db)})}_withRetries(t){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>l2)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return QT()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=t2._getInstance(o2()),this.receiver._subscribe("keyChanged",(t,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var t,r;if(this.activeServiceWorker=yield r2(),!this.activeServiceWorker)return;this.sender=new Vy(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||i2()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Ly();return yield gT(t,Kd,"1"),yield mT(t,Kd),!0}catch{}return!1})}_withPendingWrite(t){return v(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>gT(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return v(this,null,function*(){let r=yield this._withRetries(i=>u2(i,t));return this.localCache[t]=r,r})}_remove(t){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>mT(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return v(this,null,function*(){let t=yield this._withRetries(o=>{let s=th(o,!1).getAll();return new qi(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),c2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),JT=d2;var TW=BT("rcb"),SW=new zi(3e4,6e4);function h2(n,e){return e?lr(e):(J(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Cu=class extends wu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Cy(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Cy(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Cy(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function f2(n){return qT(n.auth,new Cu(n),n.bypassAuthState)}function p2(n){let{auth:e,user:t}=n;return J(t,e,"internal-error"),Q4(t,new Cu(n),n.bypassAuthState)}function g2(n){return v(this,null,function*(){let{auth:e,user:t}=n;return J(t,e,"internal-error"),K4(t,new Cu(n),n.bypassAuthState)})}var jy=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return f2;case"linkViaPopup":case"linkViaRedirect":return g2;case"reauthViaPopup":case"reauthViaRedirect":return p2;default:Fn(this.auth,"internal-error")}}resolve(e){ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var AW=new zi(2e3,1e4);var m2="pendingRedirect",jd=new Map,Uy=class n extends jy{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=jd.get(this.auth._key());if(!e){try{let r=(yield y2(this.resolver,this.auth))?yield Er(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}jd.set(this.auth._key(),e)}return this.bypassAuthState||jd.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return Er(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Er(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function y2(n,e){return v(this,null,function*(){let t=I2(e),r=_2(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function v2(n,e){jd.set(n._key(),e)}function _2(n){return lr(n._redirectPersistence)}function I2(n){return Ld(m2,n.config.apiKey,n.name)}function w2(n,e,t=!1){return v(this,null,function*(){if(dn(n.app))return Promise.reject(dr(n));let r=Gi(n),i=h2(r,e),s=yield new Uy(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var E2=10*60*1e3,By=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!C2(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!XT(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Hi(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=E2&&this.cachedEventUids.clear(),this.cachedEventUids.has(yT(e))}saveEventToCache(e){this.cachedEventUids.add(yT(e)),this.lastProcessedEventTime=Date.now()}};function yT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function XT({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function C2(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XT(n);default:return!1}}function D2(t){return v(this,arguments,function*(n,e={}){return si(n,"GET","/v1/projects",e)})}var b2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,T2=/^https?/;function S2(n){return v(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield D2(n);for(let t of e)try{if(A2(t))return}catch{}Fn(n,"unauthorized-domain")})}function A2(n){let e=by(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!T2.test(t))return!1;if(b2.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var R2=new zi(3e4,6e4);function vT(){let n=kn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function M2(n){return new Promise((e,t)=>{var r,i,o;function s(){vT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vT(),t(Hi(n,"network-request-failed"))},timeout:R2.get()})}if(!((i=(r=kn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=kn().gapi)===null||o===void 0)&&o.load)s();else{let a=BT("iframefcb");return kn()[a]=()=>{gapi.load?s():t(Hi(n,"network-request-failed"))},UT(`${k4()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw Ud=null,e})}var Ud=null;function x2(n){return Ud=Ud||M2(n),Ud}var N2=new zi(5e3,15e3),P2="__/auth/iframe",O2="emulator/auth/iframe",k2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},F2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function V2(n){let e=n.config;J(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?qy(e,O2):`https://${n.config.authDomain}/${P2}`,r={apiKey:e.apiKey,appName:n.name,v:ni},i=F2.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${hu(r).slice(1)}`}function L2(n){return v(this,null,function*(){let e=yield x2(n),t=kn().gapi;return J(t,n,"internal-error"),e.open({where:document.body,url:V2(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:k2,dontclear:!0},r=>new Promise((i,o)=>v(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Hi(n,"network-request-failed"),a=kn().setTimeout(()=>{o(s)},N2.get());function c(){kn().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var j2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},U2=500,B2=600,$2="_blank",H2="http://localhost",Zd=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function z2(n,e,t,r=U2,i=B2){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},j2),{width:r.toString(),height:i.toString(),top:o,left:s}),l=it().toLowerCase();t&&(a=PT(l)?$2:t),xT(l)&&(e=e||H2,c.scrollbars="yes");let h=Object.entries(c).reduce((y,[w,S])=>`${y}${w}=${S},`,"");if(R4(l)&&a!=="_self")return q2(e||"",a),new Zd(null);let p=window.open(e||"",a,h);J(p,n,"popup-blocked");try{p.focus()}catch{}return new Zd(p)}function q2(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var G2="__/auth/handler",W2="emulator/auth/handler",K2=encodeURIComponent("fac");function _T(n,e,t,r,i,o){return v(this,null,function*(){J(n.config.authDomain,n,"auth-domain-config-required"),J(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ni,eventId:i};if(e instanceof Wd){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",Hb(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof ky){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=yield n._getAppCheckToken(),l=c?`#${K2}=${encodeURIComponent(c)}`:"";return`${Q2(n)}?${hu(a).slice(1)}${l}`})}function Q2({config:n}){return n.emulator?qy(n,W2):`https://${n.authDomain}/${G2}`}var Dy="webStorageSupport",$y=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rv,this._completeRedirectFn=w2,this._overrideRedirectResult=v2}_openPopup(e,t,r,i){return v(this,null,function*(){var o;ii((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield _T(e,t,r,by(),i);return z2(e,s,KT())})}_openRedirect(e,t,r,i){return v(this,null,function*(){yield this._originValidation(e);let o=yield _T(e,t,r,by(),i);return n2(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(ii(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return v(this,null,function*(){let t=yield L2(e),r=new By(e);return t.register("authEvent",i=>(J(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Dy,{type:Dy},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[Dy];s!==void 0&&t(!!s),Fn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=S2(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return LT()||NT()||Qy()}},eS=$y;var IT="@firebase/auth",wT="1.7.9";var Hy=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Y2(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Z2(n){ti(new Xt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;J(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jT(n)},l=new Ny(r,i,o,c);return L4(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ti(new Xt("auth-internal",e=>{let t=Gi(e.getProvider("auth").getImmediate());return(r=>new Hy(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Je(IT,wT,Y2(n)),Je(IT,wT,"esm2017")}var J2=5*60,X2=ry("authIdTokenMaxAge")||J2,ET=null,ej=n=>e=>v(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>X2)return;let i=t?.token;ET!==i&&(ET=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function iv(n=ys()){let e=gu(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Yy(n,{popupRedirectResolver:eS,persistence:[JT,WT,rv]}),r=ry("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=ej(o.toString());tv(t,s,()=>s(t.currentUser)),Xd(t,a=>s(a))}}let i=ty("auth");return i&&Zy(t,`http://${i}`),t}function tj(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}P4({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Hi("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",tj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Z2("Browser");function nS(n){return new he(function(e){var t=eh(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var rS="auth",hr=class{constructor(e){return e}},bu=class{constructor(){return mu(rS)}};var ov=new q("angularfire2.auth-instances");function Hj(n,e){let t=Od(rS,n,e);return t&&new hr(t)}function zj(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new hr(r)}}var qj={provide:bu,deps:[[new pt,ov]]},Gj={provide:hr,useFactory:Hj,deps:[[new pt,ov],ur]};function iS(n,...e){return Je("angularfire",Bi.full,"auth"),Cn([Gj,qj,{provide:ov,useFactory:zj(n),multi:!0,deps:[Ce,et,Is,$i,[new pt,_s],...e]}])}var oS=ut(nS,!0);var sS=ut(Xy,!0);var aS=ut(iv,!0);var uS=ut(ev,!0);var cS=ut(nv,!0);var en=(()=>{class n{auth;userSubject=new Qe(void 0);user$=this.userSubject.asObservable();constructor(t){this.auth=t,this.auth.onAuthStateChanged(r=>this.userSubject.next(r))}loginEmail(t,r){return v(this,null,function*(){return uS(this.auth,t,r)})}registerEmail(t,r){return v(this,null,function*(){return sS(this.auth,t,r)})}logout(){return v(this,null,function*(){yield cS(this.auth)})}getUser(){return this.userSubject.value}isLoggedIn(){let t=!!this.userSubject.value;return console.log("[AuthService] isLoggedIn \u2192",t),t}get currentUser(){return this.auth.currentUser}static \u0275fac=function(r){return new(r||n)(Y(hr))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Wj(n,e){n&1&&(At(0),Ze(1,"div"),Rt())}function Kj(n,e){n&1&&(V(0,"div",9)(1,"a",10),B(2,"\u0412\u043E\u0439\u0442\u0438"),O()())}function Qj(n,e){if(n&1&&(At(0),je(1,Kj,3,0,"div",8),Rt()),n&2){let t=me();K(),Ie("ngIf",!t.isAuthPage())}}function Yj(n,e){n&1&&(At(0),V(1,"a",11),B(2,"\u041B\u0438\u0447\u043D\u044B\u0439 \u043A\u0430\u0431\u0438\u043D\u0435\u0442"),O(),Rt())}var dS=(()=>{class n{auth;router;user$;constructor(t,r){this.auth=t,this.router=r,this.user$=this.auth.user$}isAuthPage(){let t=this.router.url;return t.includes("/login")||t.includes("/register")}static \u0275fac=function(r){return new(r||n)(L(en),L(xe))};static \u0275cmp=tt({type:n,selectors:[["app-layout"]],standalone:!0,features:[nt],decls:12,vars:5,consts:[[1,"wrapper"],[1,"header"],["routerLink","/dashboard",1,"logo"],[1,"auth"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"main"],["class","link-wrapper",4,"ngIf"],[1,"link-wrapper"],["routerLink","/login",1,"link"],["routerLink","/profile",1,"link"]],template:function(r,i){r&1&&(V(0,"div",0)(1,"header",1)(2,"a",2),B(3,"tester."),O(),V(4,"div",3),At(5,4),Hr(6,"async"),je(7,Wj,2,0,"ng-container",5)(8,Qj,2,1,"ng-container",5)(9,Yj,3,0,"ng-container",6),Rt(),O()(),V(10,"main",7),Ze(11,"router-outlet"),O()()),r&2&&(K(5),Ie("ngSwitch",zr(6,3,i.user$)),K(2),Ie("ngSwitchCase",void 0),K(),Ie("ngSwitchCase",null))},dependencies:[Mt,Kr,ts,od,sd,Qr,uu,Eb],styles:[".wrapper[_ngcontent-%COMP%]{max-width:1500px;margin:0 auto;padding:1rem 2.5rem;height:100%;height:100vh}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:1rem;flex-wrap:wrap}.header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{font-size:8rem;font-style:italic;font-weight:900;letter-spacing:-.03em}.header[_ngcontent-%COMP%]   .auth[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.header[_ngcontent-%COMP%]   .auth[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{background-color:#fff;padding:.8rem 1.6rem;border-radius:1rem;color:inherit;font-size:1.75rem;font-weight:400;line-height:120%}.main[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}"]})}return n})();function Zj(n,e){n&1&&(At(0),V(1,"div"),B(2,"\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430..."),O(),Rt())}function Jj(n,e){if(n&1){let t=Pt();At(0),V(1,"aside",3)(2,"div",4)(3,"div",5),Ze(4,"img",6)(5,"img",7),O(),V(6,"span"),B(7,"\u043F\u0440\u043E\u0445\u043E\u0434\u0438 \u0442\u0435\u0441\u0442 \u0431\u0435\u0437 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"),O()(),V(8,"div",4)(9,"div",5),Ze(10,"img",8),O(),V(11,"span"),B(12,"\u0445\u043E\u0447\u0435\u0448\u044C \u0430\u043D\u0430\u043B\u0438\u0437, \u0442\u0435\u043E\u0440\u0438\u044E \u0438 \u0437\u0430\u0434\u0430\u0447\u0438? \u0421\u043D\u0430\u0447\u0430\u043B\u0430 \u0432\u043E\u0439\u0434\u0438 \u0432 \u043B\u0438\u0447\u043D\u044B\u0439 \u043A\u0430\u0431\u0438\u043D\u0435\u0442"),O()(),V(13,"div",4)(14,"div",5),Ze(15,"img",9),O(),V(16,"span"),B(17,"\u0440\u0430\u0437\u0432\u0438\u0432\u0430\u0439\u0441\u044F \u0448\u0430\u0433 \u0437\u0430 \u0448\u0430\u0433\u043E\u043C \u0438 \u0440\u0430\u0434\u0443\u0439\u0441\u044F \u043F\u0440\u043E\u0433\u0440\u0435\u0441\u0441\u0443! \u{1F680}"),O()()(),V(18,"div",10)(19,"button",11),Se("click",function(){Tt(t);let i=me();return St(i.startQuiz())}),B(20," \u041D\u0430\u0447\u0430\u0442\u044C \u0442\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 "),O()(),Rt()}}function Xj(n,e){if(n&1){let t=Pt();At(0),V(1,"aside",3)(2,"div",4)(3,"div",5),Ze(4,"img",6)(5,"img",7),O(),V(6,"span"),B(7,"\u043F\u0440\u043E\u0445\u043E\u0434\u0438 \u0442\u0435\u0441\u0442"),O()(),V(8,"div",4)(9,"div",5),Ze(10,"img",12),O(),V(11,"span"),B(12,"\u0438\u0437\u0443\u0447\u0438 \u0442\u0435\u043E\u0440\u0438\u044E \u0438 \u0440\u0435\u0448\u0438 \u0437\u0430\u0434\u0430\u0447\u0438 \u043F\u0440\u0438 \u043E\u0448\u0438\u0431\u043A\u0430\u0445"),O()(),V(13,"div",4)(14,"div",5),Ze(15,"img",9),O(),V(16,"span"),B(17,"\u0440\u0430\u0437\u0432\u0438\u0432\u0430\u0439\u0441\u044F \u0448\u0430\u0433 \u0437\u0430 \u0448\u0430\u0433\u043E\u043C \u0438 \u0440\u0430\u0434\u0443\u0439\u0441\u044F \u043F\u0440\u043E\u0433\u0440\u0435\u0441\u0441\u0443! \u{1F680}"),O()()(),V(18,"div",10)(19,"button",11),Se("click",function(){Tt(t);let i=me();return St(i.startQuiz())}),B(20," \u041D\u0430\u0447\u0430\u0442\u044C \u0442\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 "),O()(),Rt()}}var hS=(()=>{class n{router;auth;user$;constructor(t,r){this.router=t,this.auth=r,this.user$=this.auth.user$}startQuiz(){this.router.navigate(["/quiz"])}static \u0275fac=function(r){return new(r||n)(L(xe),L(en))};static \u0275cmp=tt({type:n,selectors:[["app-dashboard"]],standalone:!0,features:[nt],decls:5,vars:5,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"info"],[1,"card"],[1,"card-img"],["src","/test.gif","alt","test",1,"test"],["src","/student.gif","alt","student",1,"test"],["src","/study.gif","alt","study",1,"study"],["src","/happy.gif","alt","happy",1,"happy"],[1,"start"],[1,"start-button",3,"click"],["src","/study1.gif","alt","study",1,"study"]],template:function(r,i){r&1&&(At(0,0),Hr(1,"async"),je(2,Zj,3,0,"ng-container",1)(3,Jj,21,0,"ng-container",1)(4,Xj,21,0,"ng-container",2),Rt()),r&2&&(Ie("ngSwitch",zr(1,3,i.user$)),K(2),Ie("ngSwitchCase",void 0),K(),Ie("ngSwitchCase",null))},dependencies:[Mt,ts,od,sd,Qr],styles:[".info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;max-width:35%}.info[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-end;gap:1rem;min-height:20rem;background-color:#fff;border-radius:16px;padding:2rem}.info[_ngcontent-%COMP%]   .card-img[_ngcontent-%COMP%]{display:flex;gap:2rem}.info[_ngcontent-%COMP%]   .test[_ngcontent-%COMP%]{width:100px;height:auto}.info[_ngcontent-%COMP%]   .study[_ngcontent-%COMP%], .info[_ngcontent-%COMP%]   .happy[_ngcontent-%COMP%]{width:200px;height:auto}.info[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:inherit;font-size:1.8rem;font-weight:400;line-height:120%}.start[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;background-color:#fff;border-radius:16px}.start-button[_ngcontent-%COMP%]{color:inherit;font-size:2rem;font-weight:400;line-height:120%;display:flex;background-color:#e9e8e8d9;border-radius:16px;padding:1.5rem 5rem}@media (max-width: 768px){.info[_ngcontent-%COMP%]   .test[_ngcontent-%COMP%]{width:50px;height:auto}.info[_ngcontent-%COMP%]   .study[_ngcontent-%COMP%], .info[_ngcontent-%COMP%]   .happy[_ngcontent-%COMP%]{width:100px;height:auto}}@media (max-width: 480px){.info[_ngcontent-%COMP%]{max-width:100%}.info[_ngcontent-%COMP%]   .test[_ngcontent-%COMP%]{width:100px;height:auto}.info[_ngcontent-%COMP%]   .study[_ngcontent-%COMP%], .info[_ngcontent-%COMP%]   .happy[_ngcontent-%COMP%]{width:200px;height:auto}.start[_ngcontent-%COMP%]{background-color:#e9e8e8d9}.start[_ngcontent-%COMP%]   .start-button[_ngcontent-%COMP%]{background-color:#fff}}"]})}return n})();var wS=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(L(er),L(bn))}}static{this.\u0275dir=Le({type:n})}}return n})(),ES=(()=>{class n extends wS{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Wo(n)))(i||n)}})()}static{this.\u0275dir=Le({type:n,features:[Sn]})}}return n})(),av=new q("");var eU={provide:av,useExisting:Vr(()=>ai),multi:!0};function tU(){let n=rr()?rr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var nU=new q(""),ai=(()=>{class n extends wS{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!tU())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(L(er),L(bn),L(nU,8))}}static{this.\u0275dir=Le({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Se("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Jo([eU]),Sn]})}}return n})();function rU(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var uv=new q(""),CS=new q("");function iU(n){return rU(n.value)?{required:!0}:null}function fS(n){return null}function DS(n){return n!=null}function bS(n){return qr(n)?Ne(n):n}function TS(n){let e={};return n.forEach(t=>{e=t!=null?F(F({},e),t):e}),Object.keys(e).length===0?null:e}function SS(n,e){return e.map(t=>t(n))}function oU(n){return!n.validate}function AS(n){return n.map(e=>oU(e)?e:t=>e.validate(t))}function sU(n){if(!n)return null;let e=n.filter(DS);return e.length==0?null:function(t){return TS(SS(t,e))}}function cv(n){return n!=null?sU(AS(n)):null}function aU(n){if(!n)return null;let e=n.filter(DS);return e.length==0?null:function(t){let r=SS(t,e).map(bS);return ep(r).pipe(se(TS))}}function lv(n){return n!=null?aU(AS(n)):null}function pS(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function uU(n){return n._rawValidators}function cU(n){return n._rawAsyncValidators}function sv(n){return n?Array.isArray(n)?n:[n]:[]}function rh(n,e){return Array.isArray(n)?n.includes(e):n===e}function gS(n,e){let t=sv(e);return sv(n).forEach(i=>{rh(t,i)||t.push(i)}),t}function mS(n,e){return sv(e).filter(t=>!rh(n,t))}var ih=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=cv(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=lv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},bs=class extends ih{get formDirective(){return null}get path(){return null}},Ts=class extends ih{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},oh=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},lU={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Q6=ce(F({},lU),{"[class.ng-submitted]":"isSubmitted"}),As=(()=>{class n extends oh{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(L(Ts,2))}}static{this.\u0275dir=Le({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Zl("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Sn]})}}return n})(),ch=(()=>{class n extends oh{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(L(bs,10))}}static{this.\u0275dir=Le({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Zl("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Sn]})}}return n})();var Su="VALID",nh="INVALID",Cs="PENDING",Au="DISABLED",Ss=class{},sh=class extends Ss{constructor(e,t){super(),this.value=e,this.source=t}},Mu=class extends Ss{constructor(e,t){super(),this.pristine=e,this.source=t}},xu=class extends Ss{constructor(e,t){super(),this.touched=e,this.source=t}},Ds=class extends Ss{constructor(e,t){super(),this.status=e,this.source=t}};function RS(n){return(lh(n)?n.validators:n)||null}function dU(n){return Array.isArray(n)?cv(n):n||null}function MS(n,e){return(lh(e)?e.asyncValidators:n)||null}function hU(n){return Array.isArray(n)?lv(n):n||null}function lh(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function fU(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new z(1e3,"");if(!r[t])throw new z(1001,"")}function pU(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new z(1002,"")})}var ah=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Ua(()=>this.statusReactive()),this.statusReactive=La(void 0),this._pristine=Ua(()=>this.pristineReactive()),this.pristineReactive=La(!0),this._touched=Ua(()=>this.touchedReactive()),this.touchedReactive=La(!1),this._events=new Xe,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return cn(this.statusReactive)}set status(e){cn(()=>this.statusReactive.set(e))}get valid(){return this.status===Su}get invalid(){return this.status===nh}get pending(){return this.status==Cs}get disabled(){return this.status===Au}get enabled(){return this.status!==Au}get pristine(){return cn(this.pristineReactive)}set pristine(e){cn(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return cn(this.touchedReactive)}set touched(e){cn(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(gS(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(gS(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(mS(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(mS(e,this._rawAsyncValidators))}hasValidator(e){return rh(this._rawValidators,e)}hasAsyncValidator(e){return rh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ce(F({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new xu(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new xu(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ce(F({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Mu(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Mu(!0,r))}markAsPending(e={}){this.status=Cs;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ds(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ce(F({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Au,this.errors=null,this._forEachChild(i=>{i.disable(ce(F({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new sh(this.value,r)),this._events.next(new Ds(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ce(F({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Su,this._forEachChild(r=>{r.enable(ce(F({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ce(F({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Su||this.status===Cs)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new sh(this.value,t)),this._events.next(new Ds(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ce(F({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Au:Su}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Cs,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=bS(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Ds(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new He,this.statusChanges=new He}_calculateStatus(){return this._allControlsDisabled()?Au:this.errors?nh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Cs)?Cs:this._anyControlsHaveStatus(nh)?nh:Su}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Mu(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new xu(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){lh(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=dU(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=hU(this._rawAsyncValidators)}},uh=class extends ah{constructor(e,t,r){super(RS(t),MS(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){pU(this,!0,e),Object.keys(e).forEach(r=>{fU(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var dh=new q("CallSetDisabledState",{providedIn:"root",factory:()=>hh}),hh="always";function gU(n,e){return[...e.path,n]}function xS(n,e,t=hh){NS(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),yU(n,e),_U(n,e),vU(n,e),mU(n,e)}function yS(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function mU(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function NS(n,e){let t=uU(n);e.validator!==null?n.setValidators(pS(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=cU(n);e.asyncValidator!==null?n.setAsyncValidators(pS(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();yS(e._rawValidators,i),yS(e._rawAsyncValidators,i)}function yU(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&PS(n,e)})}function vU(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&PS(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function PS(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function _U(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function IU(n,e){n==null,NS(n,e)}function wU(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function EU(n){return Object.getPrototypeOf(n.constructor)===ES}function CU(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function DU(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===ai?t=o:EU(o)?r=o:i=o}),i||r||t||null}var bU={provide:bs,useExisting:Vr(()=>Nu)},Ru=Promise.resolve(),Nu=(()=>{class n extends bs{get submitted(){return cn(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=Ua(()=>this.submittedReactive()),this.submittedReactive=La(!1),this._directives=new Set,this.ngSubmit=new He,this.form=new uh({},cv(t),lv(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Ru.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),xS(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Ru.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Ru.then(()=>{let r=this._findContainer(t.path),i=new uh({});IU(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Ru.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Ru.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),CU(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(L(uv,10),L(CS,10),L(dh,8))}}static{this.\u0275dir=Le({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Se("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Jo([bU]),Sn]})}}return n})();function vS(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function _S(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var TU=class extends ah{constructor(e=null,t,r){super(RS(t),MS(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),lh(t)&&(t.nonNullable||t.initialValueIsDefault)&&(_S(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){vS(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){vS(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){_S(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var SU={provide:Ts,useExisting:Vr(()=>Wi)},IS=Promise.resolve(),Wi=(()=>{class n extends Ts{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new TU,this._registered=!1,this.name="",this.update=new He,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=DU(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),wU(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){xS(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){IS.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Wr(r);IS.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?gU(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(L(bs,9),L(uv,10),L(CS,10),L(av,10),L(Gr,8),L(dh,8))}}static{this.\u0275dir=Le({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Jo([SU]),Sn,Ur]})}}return n})(),fh=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Le({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var AU={provide:av,useExisting:Vr(()=>dv),multi:!0};var RU=(()=>{class n{constructor(){this._accessors=[]}add(t,r){this._accessors.push([t,r])}remove(t){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===t){this._accessors.splice(r,1);return}}select(t){this._accessors.forEach(r=>{this._isSameGroup(r,t)&&r[1]!==t&&r[1].fireUncheck(t.value)})}_isSameGroup(t,r){return t[0].control?t[0]._parent===r._control._parent&&t[1].name===r.name:!1}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),dv=(()=>{class n extends ES{constructor(t,r,i,o){super(t,r),this._registry=i,this._injector=o,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=P(dh,{optional:!0})??hh}ngOnInit(){this._control=this._injector.get(Ts),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}setDisabledState(t){(this.setDisabledStateFired||t||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",t),this.setDisabledStateFired=!0}fireUncheck(t){this.writeValue(t)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}static{this.\u0275fac=function(r){return new(r||n)(L(er),L(bn),L(RU),L(et))}}static{this.\u0275dir=Le({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(r,i){r&1&&Se("change",function(){return i.onChange()})("blur",function(){return i.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[Jo([AU]),Sn]})}}return n})();var MU=(()=>{class n{constructor(){this._validator=fS}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):fS,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Le({type:n,features:[Ur]})}}return n})();var xU={provide:uv,useExisting:Vr(()=>Pu),multi:!0};var Pu=(()=>{class n extends MU{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Wr,this.createValidator=t=>iU}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Wo(n)))(i||n)}})()}static{this.\u0275dir=Le({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&ja("required",i._enabled?"":null)},inputs:{required:"required"},features:[Jo([xU]),Sn]})}}return n})();var NU=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=jr({type:n})}static{this.\u0275inj=Lr({})}}return n})();var ui=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:dh,useValue:t.callSetDisabledState??hh}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=jr({type:n})}static{this.\u0275inj=Lr({imports:[NU]})}}return n})();var OS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},kS={};var ci,fv;(function(){var n;function e(C,m){function _(){}_.prototype=m.prototype,C.D=m.prototype,C.prototype=new _,C.prototype.constructor=C,C.C=function(E,D,T){for(var I=Array(arguments.length-2),Hn=2;Hn<arguments.length;Hn++)I[Hn-2]=arguments[Hn];return m.prototype[D].apply(E,I)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,m,_){_||(_=0);var E=Array(16);if(typeof m=="string")for(var D=0;16>D;++D)E[D]=m.charCodeAt(_++)|m.charCodeAt(_++)<<8|m.charCodeAt(_++)<<16|m.charCodeAt(_++)<<24;else for(D=0;16>D;++D)E[D]=m[_++]|m[_++]<<8|m[_++]<<16|m[_++]<<24;m=C.g[0],_=C.g[1],D=C.g[2];var T=C.g[3],I=m+(T^_&(D^T))+E[0]+3614090360&4294967295;m=_+(I<<7&4294967295|I>>>25),I=T+(D^m&(_^D))+E[1]+3905402710&4294967295,T=m+(I<<12&4294967295|I>>>20),I=D+(_^T&(m^_))+E[2]+606105819&4294967295,D=T+(I<<17&4294967295|I>>>15),I=_+(m^D&(T^m))+E[3]+3250441966&4294967295,_=D+(I<<22&4294967295|I>>>10),I=m+(T^_&(D^T))+E[4]+4118548399&4294967295,m=_+(I<<7&4294967295|I>>>25),I=T+(D^m&(_^D))+E[5]+1200080426&4294967295,T=m+(I<<12&4294967295|I>>>20),I=D+(_^T&(m^_))+E[6]+2821735955&4294967295,D=T+(I<<17&4294967295|I>>>15),I=_+(m^D&(T^m))+E[7]+4249261313&4294967295,_=D+(I<<22&4294967295|I>>>10),I=m+(T^_&(D^T))+E[8]+1770035416&4294967295,m=_+(I<<7&4294967295|I>>>25),I=T+(D^m&(_^D))+E[9]+2336552879&4294967295,T=m+(I<<12&4294967295|I>>>20),I=D+(_^T&(m^_))+E[10]+4294925233&4294967295,D=T+(I<<17&4294967295|I>>>15),I=_+(m^D&(T^m))+E[11]+2304563134&4294967295,_=D+(I<<22&4294967295|I>>>10),I=m+(T^_&(D^T))+E[12]+1804603682&4294967295,m=_+(I<<7&4294967295|I>>>25),I=T+(D^m&(_^D))+E[13]+4254626195&4294967295,T=m+(I<<12&4294967295|I>>>20),I=D+(_^T&(m^_))+E[14]+2792965006&4294967295,D=T+(I<<17&4294967295|I>>>15),I=_+(m^D&(T^m))+E[15]+1236535329&4294967295,_=D+(I<<22&4294967295|I>>>10),I=m+(D^T&(_^D))+E[1]+4129170786&4294967295,m=_+(I<<5&4294967295|I>>>27),I=T+(_^D&(m^_))+E[6]+3225465664&4294967295,T=m+(I<<9&4294967295|I>>>23),I=D+(m^_&(T^m))+E[11]+643717713&4294967295,D=T+(I<<14&4294967295|I>>>18),I=_+(T^m&(D^T))+E[0]+3921069994&4294967295,_=D+(I<<20&4294967295|I>>>12),I=m+(D^T&(_^D))+E[5]+3593408605&4294967295,m=_+(I<<5&4294967295|I>>>27),I=T+(_^D&(m^_))+E[10]+38016083&4294967295,T=m+(I<<9&4294967295|I>>>23),I=D+(m^_&(T^m))+E[15]+3634488961&4294967295,D=T+(I<<14&4294967295|I>>>18),I=_+(T^m&(D^T))+E[4]+3889429448&4294967295,_=D+(I<<20&4294967295|I>>>12),I=m+(D^T&(_^D))+E[9]+568446438&4294967295,m=_+(I<<5&4294967295|I>>>27),I=T+(_^D&(m^_))+E[14]+3275163606&4294967295,T=m+(I<<9&4294967295|I>>>23),I=D+(m^_&(T^m))+E[3]+4107603335&4294967295,D=T+(I<<14&4294967295|I>>>18),I=_+(T^m&(D^T))+E[8]+1163531501&4294967295,_=D+(I<<20&4294967295|I>>>12),I=m+(D^T&(_^D))+E[13]+2850285829&4294967295,m=_+(I<<5&4294967295|I>>>27),I=T+(_^D&(m^_))+E[2]+4243563512&4294967295,T=m+(I<<9&4294967295|I>>>23),I=D+(m^_&(T^m))+E[7]+1735328473&4294967295,D=T+(I<<14&4294967295|I>>>18),I=_+(T^m&(D^T))+E[12]+2368359562&4294967295,_=D+(I<<20&4294967295|I>>>12),I=m+(_^D^T)+E[5]+4294588738&4294967295,m=_+(I<<4&4294967295|I>>>28),I=T+(m^_^D)+E[8]+2272392833&4294967295,T=m+(I<<11&4294967295|I>>>21),I=D+(T^m^_)+E[11]+1839030562&4294967295,D=T+(I<<16&4294967295|I>>>16),I=_+(D^T^m)+E[14]+4259657740&4294967295,_=D+(I<<23&4294967295|I>>>9),I=m+(_^D^T)+E[1]+2763975236&4294967295,m=_+(I<<4&4294967295|I>>>28),I=T+(m^_^D)+E[4]+1272893353&4294967295,T=m+(I<<11&4294967295|I>>>21),I=D+(T^m^_)+E[7]+4139469664&4294967295,D=T+(I<<16&4294967295|I>>>16),I=_+(D^T^m)+E[10]+3200236656&4294967295,_=D+(I<<23&4294967295|I>>>9),I=m+(_^D^T)+E[13]+681279174&4294967295,m=_+(I<<4&4294967295|I>>>28),I=T+(m^_^D)+E[0]+3936430074&4294967295,T=m+(I<<11&4294967295|I>>>21),I=D+(T^m^_)+E[3]+3572445317&4294967295,D=T+(I<<16&4294967295|I>>>16),I=_+(D^T^m)+E[6]+76029189&4294967295,_=D+(I<<23&4294967295|I>>>9),I=m+(_^D^T)+E[9]+3654602809&4294967295,m=_+(I<<4&4294967295|I>>>28),I=T+(m^_^D)+E[12]+3873151461&4294967295,T=m+(I<<11&4294967295|I>>>21),I=D+(T^m^_)+E[15]+530742520&4294967295,D=T+(I<<16&4294967295|I>>>16),I=_+(D^T^m)+E[2]+3299628645&4294967295,_=D+(I<<23&4294967295|I>>>9),I=m+(D^(_|~T))+E[0]+4096336452&4294967295,m=_+(I<<6&4294967295|I>>>26),I=T+(_^(m|~D))+E[7]+1126891415&4294967295,T=m+(I<<10&4294967295|I>>>22),I=D+(m^(T|~_))+E[14]+2878612391&4294967295,D=T+(I<<15&4294967295|I>>>17),I=_+(T^(D|~m))+E[5]+4237533241&4294967295,_=D+(I<<21&4294967295|I>>>11),I=m+(D^(_|~T))+E[12]+1700485571&4294967295,m=_+(I<<6&4294967295|I>>>26),I=T+(_^(m|~D))+E[3]+2399980690&4294967295,T=m+(I<<10&4294967295|I>>>22),I=D+(m^(T|~_))+E[10]+4293915773&4294967295,D=T+(I<<15&4294967295|I>>>17),I=_+(T^(D|~m))+E[1]+2240044497&4294967295,_=D+(I<<21&4294967295|I>>>11),I=m+(D^(_|~T))+E[8]+1873313359&4294967295,m=_+(I<<6&4294967295|I>>>26),I=T+(_^(m|~D))+E[15]+4264355552&4294967295,T=m+(I<<10&4294967295|I>>>22),I=D+(m^(T|~_))+E[6]+2734768916&4294967295,D=T+(I<<15&4294967295|I>>>17),I=_+(T^(D|~m))+E[13]+1309151649&4294967295,_=D+(I<<21&4294967295|I>>>11),I=m+(D^(_|~T))+E[4]+4149444226&4294967295,m=_+(I<<6&4294967295|I>>>26),I=T+(_^(m|~D))+E[11]+3174756917&4294967295,T=m+(I<<10&4294967295|I>>>22),I=D+(m^(T|~_))+E[2]+718787259&4294967295,D=T+(I<<15&4294967295|I>>>17),I=_+(T^(D|~m))+E[9]+3951481745&4294967295,C.g[0]=C.g[0]+m&4294967295,C.g[1]=C.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,C.g[2]=C.g[2]+D&4294967295,C.g[3]=C.g[3]+T&4294967295}r.prototype.u=function(C,m){m===void 0&&(m=C.length);for(var _=m-this.blockSize,E=this.B,D=this.h,T=0;T<m;){if(D==0)for(;T<=_;)i(this,C,T),T+=this.blockSize;if(typeof C=="string"){for(;T<m;)if(E[D++]=C.charCodeAt(T++),D==this.blockSize){i(this,E),D=0;break}}else for(;T<m;)if(E[D++]=C[T++],D==this.blockSize){i(this,E),D=0;break}}this.h=D,this.o+=m},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var m=1;m<C.length-8;++m)C[m]=0;var _=8*this.o;for(m=C.length-8;m<C.length;++m)C[m]=_&255,_/=256;for(this.u(C),C=Array(16),m=_=0;4>m;++m)for(var E=0;32>E;E+=8)C[_++]=this.g[m]>>>E&255;return C};function o(C,m){var _=a;return Object.prototype.hasOwnProperty.call(_,C)?_[C]:_[C]=m(C)}function s(C,m){this.h=m;for(var _=[],E=!0,D=C.length-1;0<=D;D--){var T=C[D]|0;E&&T==m||(_[D]=T,E=!1)}this.g=_}var a={};function c(C){return-128<=C&&128>C?o(C,function(m){return new s([m|0],0>m?-1:0)}):new s([C|0],0>C?-1:0)}function l(C){if(isNaN(C)||!isFinite(C))return p;if(0>C)return M(l(-C));for(var m=[],_=1,E=0;C>=_;E++)m[E]=C/_|0,_*=4294967296;return new s(m,0)}function h(C,m){if(C.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(C.charAt(0)=="-")return M(h(C.substring(1),m));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=l(Math.pow(m,8)),E=p,D=0;D<C.length;D+=8){var T=Math.min(8,C.length-D),I=parseInt(C.substring(D,D+T),m);8>T?(T=l(Math.pow(m,T)),E=E.j(T).add(l(I))):(E=E.j(_),E=E.add(l(I)))}return E}var p=c(0),y=c(1),w=c(16777216);n=s.prototype,n.m=function(){if(x(this))return-M(this).m();for(var C=0,m=1,_=0;_<this.g.length;_++){var E=this.i(_);C+=(0<=E?E:4294967296+E)*m,m*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(S(this))return"0";if(x(this))return"-"+M(this).toString(C);for(var m=l(Math.pow(C,6)),_=this,E="";;){var D=le(_,m).g;_=j(_,D.j(m));var T=((0<_.g.length?_.g[0]:_.h)>>>0).toString(C);if(_=D,S(_))return T+E;for(;6>T.length;)T="0"+T;E=T+E}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function S(C){if(C.h!=0)return!1;for(var m=0;m<C.g.length;m++)if(C.g[m]!=0)return!1;return!0}function x(C){return C.h==-1}n.l=function(C){return C=j(this,C),x(C)?-1:S(C)?0:1};function M(C){for(var m=C.g.length,_=[],E=0;E<m;E++)_[E]=~C.g[E];return new s(_,~C.h).add(y)}n.abs=function(){return x(this)?M(this):this},n.add=function(C){for(var m=Math.max(this.g.length,C.g.length),_=[],E=0,D=0;D<=m;D++){var T=E+(this.i(D)&65535)+(C.i(D)&65535),I=(T>>>16)+(this.i(D)>>>16)+(C.i(D)>>>16);E=I>>>16,T&=65535,I&=65535,_[D]=I<<16|T}return new s(_,_[_.length-1]&-2147483648?-1:0)};function j(C,m){return C.add(M(m))}n.j=function(C){if(S(this)||S(C))return p;if(x(this))return x(C)?M(this).j(M(C)):M(M(this).j(C));if(x(C))return M(this.j(M(C)));if(0>this.l(w)&&0>C.l(w))return l(this.m()*C.m());for(var m=this.g.length+C.g.length,_=[],E=0;E<2*m;E++)_[E]=0;for(E=0;E<this.g.length;E++)for(var D=0;D<C.g.length;D++){var T=this.i(E)>>>16,I=this.i(E)&65535,Hn=C.i(D)>>>16,ta=C.i(D)&65535;_[2*E+2*D]+=I*ta,W(_,2*E+2*D),_[2*E+2*D+1]+=T*ta,W(_,2*E+2*D+1),_[2*E+2*D+1]+=I*Hn,W(_,2*E+2*D+1),_[2*E+2*D+2]+=T*Hn,W(_,2*E+2*D+2)}for(E=0;E<m;E++)_[E]=_[2*E+1]<<16|_[2*E];for(E=m;E<2*m;E++)_[E]=0;return new s(_,0)};function W(C,m){for(;(C[m]&65535)!=C[m];)C[m+1]+=C[m]>>>16,C[m]&=65535,m++}function Q(C,m){this.g=C,this.h=m}function le(C,m){if(S(m))throw Error("division by zero");if(S(C))return new Q(p,p);if(x(C))return m=le(M(C),m),new Q(M(m.g),M(m.h));if(x(m))return m=le(C,M(m)),new Q(M(m.g),m.h);if(30<C.g.length){if(x(C)||x(m))throw Error("slowDivide_ only works with positive integers.");for(var _=y,E=m;0>=E.l(C);)_=ke(_),E=ke(E);var D=ne(_,1),T=ne(E,1);for(E=ne(E,2),_=ne(_,2);!S(E);){var I=T.add(E);0>=I.l(C)&&(D=D.add(_),T=I),E=ne(E,1),_=ne(_,1)}return m=j(C,D.j(m)),new Q(D,m)}for(D=p;0<=C.l(m);){for(_=Math.max(1,Math.floor(C.m()/m.m())),E=Math.ceil(Math.log(_)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),T=l(_),I=T.j(m);x(I)||0<I.l(C);)_-=E,T=l(_),I=T.j(m);S(T)&&(T=y),D=D.add(T),C=j(C,I)}return new Q(D,C)}n.A=function(C){return le(this,C).h},n.and=function(C){for(var m=Math.max(this.g.length,C.g.length),_=[],E=0;E<m;E++)_[E]=this.i(E)&C.i(E);return new s(_,this.h&C.h)},n.or=function(C){for(var m=Math.max(this.g.length,C.g.length),_=[],E=0;E<m;E++)_[E]=this.i(E)|C.i(E);return new s(_,this.h|C.h)},n.xor=function(C){for(var m=Math.max(this.g.length,C.g.length),_=[],E=0;E<m;E++)_[E]=this.i(E)^C.i(E);return new s(_,this.h^C.h)};function ke(C){for(var m=C.g.length+1,_=[],E=0;E<m;E++)_[E]=C.i(E)<<1|C.i(E-1)>>>31;return new s(_,C.h)}function ne(C,m){var _=m>>5;m%=32;for(var E=C.g.length-_,D=[],T=0;T<E;T++)D[T]=0<m?C.i(T+_)>>>m|C.i(T+_+1)<<32-m:C.i(T+_);return new s(D,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,fv=kS.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,ci=kS.Integer=s}).apply(typeof OS<"u"?OS:typeof self<"u"?self:typeof window<"u"?window:{});var ph=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fr={};var pv,PU,Rs,gv,Ou,gh,mv,yv,vv;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,f){return u==Array.prototype||u==Object.prototype||(u[d]=f.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ph=="object"&&ph];for(var d=0;d<u.length;++d){var f=u[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(u,d){if(d)e:{var f=r;u=u.split(".");for(var g=0;g<u.length-1;g++){var b=u[g];if(!(b in f))break e;f=f[b]}u=u[u.length-1],g=f[u],d=d(g),d!=g&&d!=null&&e(f,u,{configurable:!0,writable:!0,value:d})}}function o(u,d){u instanceof String&&(u+="");var f=0,g=!1,b={next:function(){if(!g&&f<u.length){var A=f++;return{value:d(A,u[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(u){return u||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function c(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function l(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,f){return u.call.apply(u.bind,arguments)}function p(u,d,f){if(!u)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,g),u.apply(d,b)}}return function(){return u.apply(d,arguments)}}function y(u,d,f){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,y.apply(null,arguments)}function w(u,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),u.apply(this,g)}}function S(u,d){function f(){}f.prototype=d.prototype,u.aa=d.prototype,u.prototype=new f,u.prototype.constructor=u,u.Qb=function(g,b,A){for(var k=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)k[Ae-2]=arguments[Ae];return d.prototype[b].apply(g,k)}}function x(u){let d=u.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=u[g];return f}return[]}function M(u,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(c(g)){let b=u.length||0,A=g.length||0;u.length=b+A;for(let k=0;k<A;k++)u[b+k]=g[k]}else u.push(g)}}class j{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function W(u){return/^[\s\xa0]*$/.test(u)}function Q(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function le(u){return le[" "](u),u}le[" "]=function(){};var ke=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function ne(u,d,f){for(let g in u)d.call(f,u[g],g,u)}function C(u,d){for(let f in u)d.call(void 0,u[f],f,u)}function m(u){let d={};for(let f in u)d[f]=u[f];return d}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(u,d){let f,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(f in g)u[f]=g[f];for(let A=0;A<_.length;A++)f=_[A],Object.prototype.hasOwnProperty.call(g,f)&&(u[f]=g[f])}}function D(u){var d=1;u=u.split(":");let f=[];for(;0<d&&u.length;)f.push(u.shift()),d--;return u.length&&f.push(u.join(":")),f}function T(u){a.setTimeout(()=>{throw u},0)}function I(){var u=uf;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class Hn{constructor(){this.h=this.g=null}add(d,f){let g=ta.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var ta=new j(()=>new GR,u=>u.reset());class GR{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let na,ra=!1,uf=new Hn,bI=()=>{let u=a.Promise.resolve(void 0);na=()=>{u.then(WR)}};var WR=()=>{for(var u;u=I();){try{u.h.call(u.g)}catch(f){T(f)}var d=ta;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}ra=!1};function vr(){this.s=this.s,this.C=this.C}vr.prototype.s=!1,vr.prototype.ma=function(){this.s||(this.s=!0,this.N())},vr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function lt(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}lt.prototype.h=function(){this.defaultPrevented=!0};var KR=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return u}();function ia(u,d){if(lt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var f=this.type=u.type,g=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(ke){e:{try{le(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else f=="mouseover"?d=u.fromElement:f=="mouseout"&&(d=u.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:QR[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ia.aa.h.call(this)}}S(ia,lt);var QR={2:"touch",3:"pen",4:"mouse"};ia.prototype.h=function(){ia.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var oa="closure_listenable_"+(1e6*Math.random()|0),YR=0;function ZR(u,d,f,g,b){this.listener=u,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=b,this.key=++YR,this.da=this.fa=!1}function rc(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ic(u){this.src=u,this.g={},this.h=0}ic.prototype.add=function(u,d,f,g,b){var A=u.toString();u=this.g[A],u||(u=this.g[A]=[],this.h++);var k=lf(u,d,g,b);return-1<k?(d=u[k],f||(d.fa=!1)):(d=new ZR(d,this.src,A,!!g,b),d.fa=f,u.push(d)),d};function cf(u,d){var f=d.type;if(f in u.g){var g=u.g[f],b=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=b)&&Array.prototype.splice.call(g,b,1),A&&(rc(d),u.g[f].length==0&&(delete u.g[f],u.h--))}}function lf(u,d,f,g){for(var b=0;b<u.length;++b){var A=u[b];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return b}return-1}var df="closure_lm_"+(1e6*Math.random()|0),hf={};function TI(u,d,f,g,b){if(g&&g.once)return AI(u,d,f,g,b);if(Array.isArray(d)){for(var A=0;A<d.length;A++)TI(u,d[A],f,g,b);return null}return f=mf(f),u&&u[oa]?u.K(d,f,l(g)?!!g.capture:!!g,b):SI(u,d,f,!1,g,b)}function SI(u,d,f,g,b,A){if(!d)throw Error("Invalid event type");var k=l(b)?!!b.capture:!!b,Ae=pf(u);if(Ae||(u[df]=Ae=new ic(u)),f=Ae.add(d,f,g,k,A),f.proxy)return f;if(g=JR(),f.proxy=g,g.src=u,g.listener=f,u.addEventListener)KR||(b=k),b===void 0&&(b=!1),u.addEventListener(d.toString(),g,b);else if(u.attachEvent)u.attachEvent(MI(d.toString()),g);else if(u.addListener&&u.removeListener)u.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function JR(){function u(f){return d.call(u.src,u.listener,f)}let d=XR;return u}function AI(u,d,f,g,b){if(Array.isArray(d)){for(var A=0;A<d.length;A++)AI(u,d[A],f,g,b);return null}return f=mf(f),u&&u[oa]?u.L(d,f,l(g)?!!g.capture:!!g,b):SI(u,d,f,!0,g,b)}function RI(u,d,f,g,b){if(Array.isArray(d))for(var A=0;A<d.length;A++)RI(u,d[A],f,g,b);else g=l(g)?!!g.capture:!!g,f=mf(f),u&&u[oa]?(u=u.i,d=String(d).toString(),d in u.g&&(A=u.g[d],f=lf(A,f,g,b),-1<f&&(rc(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete u.g[d],u.h--)))):u&&(u=pf(u))&&(d=u.g[d.toString()],u=-1,d&&(u=lf(d,f,g,b)),(f=-1<u?d[u]:null)&&ff(f))}function ff(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[oa])cf(d.i,u);else{var f=u.type,g=u.proxy;d.removeEventListener?d.removeEventListener(f,g,u.capture):d.detachEvent?d.detachEvent(MI(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=pf(d))?(cf(f,u),f.h==0&&(f.src=null,d[df]=null)):rc(u)}}}function MI(u){return u in hf?hf[u]:hf[u]="on"+u}function XR(u,d){if(u.da)u=!0;else{d=new ia(d,this);var f=u.listener,g=u.ha||u.src;u.fa&&ff(u),u=f.call(g,d)}return u}function pf(u){return u=u[df],u instanceof ic?u:null}var gf="__closure_events_fn_"+(1e9*Math.random()>>>0);function mf(u){return typeof u=="function"?u:(u[gf]||(u[gf]=function(d){return u.handleEvent(d)}),u[gf])}function dt(){vr.call(this),this.i=new ic(this),this.M=this,this.F=null}S(dt,vr),dt.prototype[oa]=!0,dt.prototype.removeEventListener=function(u,d,f,g){RI(this,u,d,f,g)};function wt(u,d){var f,g=u.F;if(g)for(f=[];g;g=g.F)f.push(g);if(u=u.M,g=d.type||d,typeof d=="string")d=new lt(d,u);else if(d instanceof lt)d.target=d.target||u;else{var b=d;d=new lt(g,u),E(d,b)}if(b=!0,f)for(var A=f.length-1;0<=A;A--){var k=d.g=f[A];b=oc(k,g,!0,d)&&b}if(k=d.g=u,b=oc(k,g,!0,d)&&b,b=oc(k,g,!1,d)&&b,f)for(A=0;A<f.length;A++)k=d.g=f[A],b=oc(k,g,!1,d)&&b}dt.prototype.N=function(){if(dt.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var f=u.g[d],g=0;g<f.length;g++)rc(f[g]);delete u.g[d],u.h--}}this.F=null},dt.prototype.K=function(u,d,f,g){return this.i.add(String(u),d,!1,f,g)},dt.prototype.L=function(u,d,f,g){return this.i.add(String(u),d,!0,f,g)};function oc(u,d,f,g){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,A=0;A<d.length;++A){var k=d[A];if(k&&!k.da&&k.capture==f){var Ae=k.listener,st=k.ha||k.src;k.fa&&cf(u.i,k),b=Ae.call(st,g)!==!1&&b}}return b&&!g.defaultPrevented}function xI(u,d,f){if(typeof u=="function")f&&(u=y(u,f));else if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function NI(u){u.g=xI(()=>{u.g=null,u.i&&(u.i=!1,NI(u))},u.l);let d=u.h;u.h=null,u.m.apply(null,d)}class eM extends vr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:NI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sa(u){vr.call(this),this.h=u,this.g={}}S(sa,vr);var PI=[];function OI(u){ne(u.g,function(d,f){this.g.hasOwnProperty(f)&&ff(d)},u),u.g={}}sa.prototype.N=function(){sa.aa.N.call(this),OI(this)},sa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yf=a.JSON.stringify,tM=a.JSON.parse,nM=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function vf(){}vf.prototype.h=null;function kI(u){return u.h||(u.h=u.i())}function FI(){}var aa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function _f(){lt.call(this,"d")}S(_f,lt);function If(){lt.call(this,"c")}S(If,lt);var pi={},VI=null;function sc(){return VI=VI||new dt}pi.La="serverreachability";function LI(u){lt.call(this,pi.La,u)}S(LI,lt);function ua(u){let d=sc();wt(d,new LI(d))}pi.STAT_EVENT="statevent";function jI(u,d){lt.call(this,pi.STAT_EVENT,u),this.stat=d}S(jI,lt);function Et(u){let d=sc();wt(d,new jI(d,u))}pi.Ma="timingevent";function UI(u,d){lt.call(this,pi.Ma,u),this.size=d}S(UI,lt);function ca(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function la(){this.g=!0}la.prototype.xa=function(){this.g=!1};function rM(u,d,f,g,b,A){u.info(function(){if(u.g)if(A)for(var k="",Ae=A.split("&"),st=0;st<Ae.length;st++){var we=Ae[st].split("=");if(1<we.length){var ht=we[0];we=we[1];var ft=ht.split("_");k=2<=ft.length&&ft[1]=="type"?k+(ht+"="+we+"&"):k+(ht+"=redacted&")}}else k=null;else k=A;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+f+`
`+k})}function iM(u,d,f,g,b,A,k){u.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+f+`
`+A+" "+k})}function ao(u,d,f,g){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+sM(u,f)+(g?" "+g:"")})}function oM(u,d){u.info(function(){return"TIMEOUT: "+d})}la.prototype.info=function(){};function sM(u,d){if(!u.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(u=0;u<f.length;u++)if(Array.isArray(f[u])){var g=f[u];if(!(2>g.length)){var b=g[1];if(Array.isArray(b)&&!(1>b.length)){var A=b[0];if(A!="noop"&&A!="stop"&&A!="close")for(var k=1;k<b.length;k++)b[k]=""}}}}return yf(f)}catch{return d}}var ac={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},BI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},wf;function uc(){}S(uc,vf),uc.prototype.g=function(){return new XMLHttpRequest},uc.prototype.i=function(){return{}},wf=new uc;function _r(u,d,f,g){this.j=u,this.i=d,this.l=f,this.R=g||1,this.U=new sa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new $I}function $I(){this.i=null,this.g="",this.h=!1}var HI={},Ef={};function Cf(u,d,f){u.L=1,u.v=hc(zn(d)),u.m=f,u.P=!0,zI(u,null)}function zI(u,d){u.F=Date.now(),cc(u),u.A=zn(u.v);var f=u.A,g=u.R;Array.isArray(g)||(g=[String(g)]),iw(f.i,"t",g),u.C=0,f=u.j.J,u.h=new $I,u.g=Ew(u.j,f?d:null,!u.m),0<u.O&&(u.M=new eM(y(u.Y,u,u.g),u.O)),d=u.U,f=u.g,g=u.ca;var b="readystatechange";Array.isArray(b)||(b&&(PI[0]=b.toString()),b=PI);for(var A=0;A<b.length;A++){var k=TI(f,b[A],g||d.handleEvent,!1,d.h||d);if(!k)break;d.g[k.key]=k}d=u.H?m(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),ua(),rM(u.i,u.u,u.A,u.l,u.R,u.m)}_r.prototype.ca=function(u){u=u.target;let d=this.M;d&&qn(u)==3?d.j():this.Y(u)},_r.prototype.Y=function(u){try{if(u==this.g)e:{let ft=qn(this.g);var d=this.g.Ba();let lo=this.g.Z();if(!(3>ft)&&(ft!=3||this.g&&(this.h.h||this.g.oa()||dw(this.g)))){this.J||ft!=4||d==7||(d==8||0>=lo?ua(3):ua(2)),Df(this);var f=this.g.Z();this.X=f;t:if(qI(this)){var g=dw(this.g);u="";var b=g.length,A=qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gi(this),da(this);var k="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,u+=this.h.i.decode(g[d],{stream:!(A&&d==b-1)});g.length=0,this.h.g+=u,this.C=0,k=this.h.g}else k=this.g.oa();if(this.o=f==200,iM(this.i,this.u,this.A,this.l,this.R,ft,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ae,st=this.g;if((Ae=st.g?st.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(Ae)){var we=Ae;break t}}we=null}if(f=we)ao(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bf(this,f);else{this.o=!1,this.s=3,Et(12),gi(this),da(this);break e}}if(this.P){f=!0;let tn;for(;!this.J&&this.C<k.length;)if(tn=aM(this,k),tn==Ef){ft==4&&(this.s=4,Et(14),f=!1),ao(this.i,this.l,null,"[Incomplete Response]");break}else if(tn==HI){this.s=4,Et(15),ao(this.i,this.l,k,"[Invalid Chunk]"),f=!1;break}else ao(this.i,this.l,tn,null),bf(this,tn);if(qI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ft!=4||k.length!=0||this.h.h||(this.s=1,Et(16),f=!1),this.o=this.o&&f,!f)ao(this.i,this.l,k,"[Invalid Chunked Response]"),gi(this),da(this);else if(0<k.length&&!this.W){this.W=!0;var ht=this.j;ht.g==this&&ht.ba&&!ht.M&&(ht.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),xf(ht),ht.M=!0,Et(11))}}else ao(this.i,this.l,k,null),bf(this,k);ft==4&&gi(this),this.o&&!this.J&&(ft==4?vw(this.j,this):(this.o=!1,cc(this)))}else DM(this.g),f==400&&0<k.indexOf("Unknown SID")?(this.s=3,Et(12)):(this.s=0,Et(13)),gi(this),da(this)}}}catch{}finally{}};function qI(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function aM(u,d){var f=u.C,g=d.indexOf(`
`,f);return g==-1?Ef:(f=Number(d.substring(f,g)),isNaN(f)?HI:(g+=1,g+f>d.length?Ef:(d=d.slice(g,g+f),u.C=g+f,d)))}_r.prototype.cancel=function(){this.J=!0,gi(this)};function cc(u){u.S=Date.now()+u.I,GI(u,u.I)}function GI(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ca(y(u.ba,u),d)}function Df(u){u.B&&(a.clearTimeout(u.B),u.B=null)}_r.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(oM(this.i,this.A),this.L!=2&&(ua(),Et(17)),gi(this),this.s=2,da(this)):GI(this,this.S-u)};function da(u){u.j.G==0||u.J||vw(u.j,u)}function gi(u){Df(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,OI(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function bf(u,d){try{var f=u.j;if(f.G!=0&&(f.g==u||Tf(f.h,u))){if(!u.K&&Tf(f.h,u)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<u.F)yc(f),gc(f);else break e;Mf(f),Et(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=ca(y(f.Za,f),6e3));if(1>=QI(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else yi(f,11)}else if((u.K||f.g==u)&&yc(f),!W(d))for(b=f.Da.g.parse(d),d=0;d<b.length;d++){let we=b[d];if(f.T=we[0],we=we[1],f.G==2)if(we[0]=="c"){f.K=we[1],f.ia=we[2];let ht=we[3];ht!=null&&(f.la=ht,f.j.info("VER="+f.la));let ft=we[4];ft!=null&&(f.Aa=ft,f.j.info("SVER="+f.Aa));let lo=we[5];lo!=null&&typeof lo=="number"&&0<lo&&(g=1.5*lo,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let tn=u.g;if(tn){let _c=tn.g?tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_c){var A=g.h;A.g||_c.indexOf("spdy")==-1&&_c.indexOf("quic")==-1&&_c.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Sf(A,A.h),A.h=null))}if(g.D){let Nf=tn.g?tn.g.getResponseHeader("X-HTTP-Session-Id"):null;Nf&&(g.ya=Nf,Me(g.I,g.D,Nf))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-u.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var k=u;if(g.qa=ww(g,g.J?g.ia:null,g.W),k.K){YI(g.h,k);var Ae=k,st=g.L;st&&(Ae.I=st),Ae.B&&(Df(Ae),cc(Ae)),g.g=k}else mw(g);0<f.i.length&&mc(f)}else we[0]!="stop"&&we[0]!="close"||yi(f,7);else f.G==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?yi(f,7):Rf(f):we[0]!="noop"&&f.l&&f.l.ta(we),f.v=0)}}ua(4)}catch{}}var uM=class{constructor(u,d){this.g=u,this.map=d}};function WI(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function KI(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function QI(u){return u.h?1:u.g?u.g.size:0}function Tf(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function Sf(u,d){u.g?u.g.add(d):u.h=d}function YI(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}WI.prototype.cancel=function(){if(this.i=ZI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function ZI(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(let f of u.g.values())d=d.concat(f.D);return d}return x(u.i)}function cM(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var d=[],f=u.length,g=0;g<f;g++)d.push(u[g]);return d}d=[],f=0;for(g in u)d[f++]=u[g];return d}function lM(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var d=[];u=u.length;for(var f=0;f<u;f++)d.push(f);return d}d=[],f=0;for(let g in u)d[f++]=g;return d}}}function JI(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var f=lM(u),g=cM(u),b=g.length,A=0;A<b;A++)d.call(void 0,g[A],f&&f[A],u)}var XI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dM(u,d){if(u){u=u.split("&");for(var f=0;f<u.length;f++){var g=u[f].indexOf("="),b=null;if(0<=g){var A=u[f].substring(0,g);b=u[f].substring(g+1)}else A=u[f];d(A,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function mi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof mi){this.h=u.h,lc(this,u.j),this.o=u.o,this.g=u.g,dc(this,u.s),this.l=u.l;var d=u.i,f=new pa;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),ew(this,f),this.m=u.m}else u&&(d=String(u).match(XI))?(this.h=!1,lc(this,d[1]||"",!0),this.o=ha(d[2]||""),this.g=ha(d[3]||"",!0),dc(this,d[4]),this.l=ha(d[5]||"",!0),ew(this,d[6]||"",!0),this.m=ha(d[7]||"")):(this.h=!1,this.i=new pa(null,this.h))}mi.prototype.toString=function(){var u=[],d=this.j;d&&u.push(fa(d,tw,!0),":");var f=this.g;return(f||d=="file")&&(u.push("//"),(d=this.o)&&u.push(fa(d,tw,!0),"@"),u.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&u.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&u.push("/"),u.push(fa(f,f.charAt(0)=="/"?pM:fM,!0))),(f=this.i.toString())&&u.push("?",f),(f=this.m)&&u.push("#",fa(f,mM)),u.join("")};function zn(u){return new mi(u)}function lc(u,d,f){u.j=f?ha(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function dc(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function ew(u,d,f){d instanceof pa?(u.i=d,yM(u.i,u.h)):(f||(d=fa(d,gM)),u.i=new pa(d,u.h))}function Me(u,d,f){u.i.set(d,f)}function hc(u){return Me(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ha(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function fa(u,d,f){return typeof u=="string"?(u=encodeURI(u).replace(d,hM),f&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function hM(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var tw=/[#\/\?@]/g,fM=/[#\?:]/g,pM=/[#\?]/g,gM=/[#\?@]/g,mM=/#/g;function pa(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function Ir(u){u.g||(u.g=new Map,u.h=0,u.i&&dM(u.i,function(d,f){u.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=pa.prototype,n.add=function(u,d){Ir(this),this.i=null,u=uo(this,u);var f=this.g.get(u);return f||this.g.set(u,f=[]),f.push(d),this.h+=1,this};function nw(u,d){Ir(u),d=uo(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function rw(u,d){return Ir(u),d=uo(u,d),u.g.has(d)}n.forEach=function(u,d){Ir(this),this.g.forEach(function(f,g){f.forEach(function(b){u.call(d,b,g,this)},this)},this)},n.na=function(){Ir(this);let u=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let b=u[g];for(let A=0;A<b.length;A++)f.push(d[g])}return f},n.V=function(u){Ir(this);let d=[];if(typeof u=="string")rw(this,u)&&(d=d.concat(this.g.get(uo(this,u))));else{u=Array.from(this.g.values());for(let f=0;f<u.length;f++)d=d.concat(u[f])}return d},n.set=function(u,d){return Ir(this),this.i=null,u=uo(this,u),rw(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},n.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function iw(u,d,f){nw(u,d),0<f.length&&(u.i=null,u.g.set(uo(u,d),x(f)),u.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),k=this.V(g);for(g=0;g<k.length;g++){var b=A;k[g]!==""&&(b+="="+encodeURIComponent(String(k[g]))),u.push(b)}}return this.i=u.join("&")};function uo(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function yM(u,d){d&&!u.j&&(Ir(u),u.i=null,u.g.forEach(function(f,g){var b=g.toLowerCase();g!=b&&(nw(this,g),iw(this,b,f))},u)),u.j=d}function vM(u,d){let f=new la;if(a.Image){let g=new Image;g.onload=w(wr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=w(wr,f,"TestLoadImage: error",!1,d,g),g.onabort=w(wr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=w(wr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=u}else d(!1)}function _M(u,d){let f=new la,g=new AbortController,b=setTimeout(()=>{g.abort(),wr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:g.signal}).then(A=>{clearTimeout(b),A.ok?wr(f,"TestPingServer: ok",!0,d):wr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),wr(f,"TestPingServer: error",!1,d)})}function wr(u,d,f,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(f)}catch{}}function IM(){this.g=new nM}function wM(u,d,f){let g=f||"";try{JI(u,function(b,A){let k=b;l(b)&&(k=yf(b)),d.push(g+A+"="+encodeURIComponent(k))})}catch(b){throw d.push(g+"type="+encodeURIComponent("_badmap")),b}}function ga(u){this.l=u.Ub||null,this.j=u.eb||!1}S(ga,vf),ga.prototype.g=function(){return new fc(this.l,this.j)},ga.prototype.i=function(u){return function(){return u}}({});function fc(u,d){dt.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(fc,dt),n=fc.prototype,n.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,ya(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ma(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ya(this)),this.g&&(this.readyState=3,ya(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ow(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function ow(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?ma(this):ya(this),this.readyState==3&&ow(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,ma(this))},n.Qa=function(u){this.g&&(this.response=u,ma(this))},n.ga=function(){this.g&&ma(this)};function ma(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ya(u)}n.setRequestHeader=function(u,d){this.u.append(u,d)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,u.push(f[0]+": "+f[1]),f=d.next();return u.join(`\r
`)};function ya(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(fc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function sw(u){let d="";return ne(u,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Af(u,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=sw(f),typeof u=="string"?f!=null&&encodeURIComponent(String(f)):Me(u,d,f))}function Fe(u){dt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Fe,dt);var EM=/^https?$/i,CM=["POST","PUT"];n=Fe.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():wf.g(),this.v=this.o?kI(this.o):kI(wf),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(A){aw(this,A);return}if(u=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)f.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),b=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(CM,d,void 0))||g||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,k]of f)this.g.setRequestHeader(A,k);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{lw(this),this.u=!0,this.g.send(u),this.u=!1}catch(A){aw(this,A)}};function aw(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,uw(u),pc(u)}function uw(u){u.A||(u.A=!0,wt(u,"complete"),wt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,wt(this,"complete"),wt(this,"abort"),pc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pc(this,!0)),Fe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?cw(this):this.bb())},n.bb=function(){cw(this)};function cw(u){if(u.h&&typeof s<"u"&&(!u.v[1]||qn(u)!=4||u.Z()!=2)){if(u.u&&qn(u)==4)xI(u.Ea,0,u);else if(wt(u,"readystatechange"),qn(u)==4){u.h=!1;try{let k=u.Z();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=k===0){var b=String(u.D).match(XI)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),g=!EM.test(b?b.toLowerCase():"")}f=g}if(f)wt(u,"complete"),wt(u,"success");else{u.m=6;try{var A=2<qn(u)?u.g.statusText:""}catch{A=""}u.l=A+" ["+u.Z()+"]",uw(u)}}finally{pc(u)}}}}function pc(u,d){if(u.g){lw(u);let f=u.g,g=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||wt(u,"ready");try{f.onreadystatechange=g}catch{}}}function lw(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function qn(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<qn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),tM(d)}};function dw(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function DM(u){let d={};u=(u.g&&2<=qn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<u.length;g++){if(W(u[g]))continue;var f=D(u[g]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[b]||[];d[b]=A,A.push(f)}C(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function va(u,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[u]||d}function hw(u){this.Aa=0,this.i=[],this.j=new la,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=va("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=va("baseRetryDelayMs",5e3,u),this.cb=va("retryDelaySeedMs",1e4,u),this.Wa=va("forwardChannelMaxRetries",2,u),this.wa=va("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new WI(u&&u.concurrentRequestLimit),this.Da=new IM,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=hw.prototype,n.la=8,n.G=1,n.connect=function(u,d,f,g){Et(0),this.W=u,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=ww(this,null,this.W),mc(this)};function Rf(u){if(fw(u),u.G==3){var d=u.U++,f=zn(u.I);if(Me(f,"SID",u.K),Me(f,"RID",d),Me(f,"TYPE","terminate"),_a(u,f),d=new _r(u,u.j,d),d.L=2,d.v=hc(zn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=Ew(d.j,null),d.g.ea(d.v)),d.F=Date.now(),cc(d)}Iw(u)}function gc(u){u.g&&(xf(u),u.g.cancel(),u.g=null)}function fw(u){gc(u),u.u&&(a.clearTimeout(u.u),u.u=null),yc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function mc(u){if(!KI(u.h)&&!u.s){u.s=!0;var d=u.Ga;na||bI(),ra||(na(),ra=!0),uf.add(d,u),u.B=0}}function bM(u,d){return QI(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ca(y(u.Ga,u,d),_w(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let b=new _r(this,this.j,u),A=this.o;if(this.S&&(A?(A=m(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(b.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=gw(this,b,d),f=zn(this.I),Me(f,"RID",u),Me(f,"CVER",22),this.D&&Me(f,"X-HTTP-Session-Id",this.D),_a(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(sw(A)))+"&"+d:this.m&&Af(f,this.m,A)),Sf(this.h,b),this.Ua&&Me(f,"TYPE","init"),this.P?(Me(f,"$req",d),Me(f,"SID","null"),b.T=!0,Cf(b,f,null)):Cf(b,f,d),this.G=2}}else this.G==3&&(u?pw(this,u):this.i.length==0||KI(this.h)||pw(this))};function pw(u,d){var f;d?f=d.l:f=u.U++;let g=zn(u.I);Me(g,"SID",u.K),Me(g,"RID",f),Me(g,"AID",u.T),_a(u,g),u.m&&u.o&&Af(g,u.m,u.o),f=new _r(u,u.j,f,u.B+1),u.m===null&&(f.H=u.o),d&&(u.i=d.D.concat(u.i)),d=gw(u,f,1e3),f.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Sf(u.h,f),Cf(f,g,d)}function _a(u,d){u.H&&ne(u.H,function(f,g){Me(d,g,f)}),u.l&&JI({},function(f,g){Me(d,g,f)})}function gw(u,d,f){f=Math.min(u.i.length,f);var g=u.l?y(u.l.Na,u.l,u):null;e:{var b=u.i;let A=-1;for(;;){let k=["count="+f];A==-1?0<f?(A=b[0].g,k.push("ofs="+A)):A=0:k.push("ofs="+A);let Ae=!0;for(let st=0;st<f;st++){let we=b[st].g,ht=b[st].map;if(we-=A,0>we)A=Math.max(0,b[st].g-100),Ae=!1;else try{wM(ht,k,"req"+we+"_")}catch{g&&g(ht)}}if(Ae){g=k.join("&");break e}}}return u=u.i.splice(0,f),d.D=u,g}function mw(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;na||bI(),ra||(na(),ra=!0),uf.add(d,u),u.v=0}}function Mf(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ca(y(u.Fa,u),_w(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,yw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ca(y(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Et(10),gc(this),yw(this))};function xf(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function yw(u){u.g=new _r(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=zn(u.qa);Me(d,"RID","rpc"),Me(d,"SID",u.K),Me(d,"AID",u.T),Me(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&Me(d,"TO",u.ja),Me(d,"TYPE","xmlhttp"),_a(u,d),u.m&&u.o&&Af(d,u.m,u.o),u.L&&(u.g.I=u.L);var f=u.g;u=u.ia,f.L=1,f.v=hc(zn(d)),f.m=null,f.P=!0,zI(f,u)}n.Za=function(){this.C!=null&&(this.C=null,gc(this),Mf(this),Et(19))};function yc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function vw(u,d){var f=null;if(u.g==d){yc(u),xf(u),u.g=null;var g=2}else if(Tf(u.h,d))f=d.D,YI(u.h,d),g=1;else return;if(u.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var b=u.B;g=sc(),wt(g,new UI(g,f)),mc(u)}else mw(u);else if(b=d.s,b==3||b==0&&0<d.X||!(g==1&&bM(u,d)||g==2&&Mf(u)))switch(f&&0<f.length&&(d=u.h,d.i=d.i.concat(f)),b){case 1:yi(u,5);break;case 4:yi(u,10);break;case 3:yi(u,6);break;default:yi(u,2)}}}function _w(u,d){let f=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(f*=2),f*d}function yi(u,d){if(u.j.info("Error code "+d),d==2){var f=y(u.fb,u),g=u.Xa;let b=!g;g=new mi(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||lc(g,"https"),hc(g),b?vM(g.toString(),f):_M(g.toString(),f)}else Et(2);u.G=0,u.l&&u.l.sa(d),Iw(u),fw(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function Iw(u){if(u.G=0,u.ka=[],u.l){let d=ZI(u.h);(d.length!=0||u.i.length!=0)&&(M(u.ka,d),M(u.ka,u.i),u.h.i.length=0,x(u.i),u.i.length=0),u.l.ra()}}function ww(u,d,f){var g=f instanceof mi?zn(f):new mi(f);if(g.g!="")d&&(g.g=d+"."+g.g),dc(g,g.s);else{var b=a.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var A=new mi(null);g&&lc(A,g),d&&(A.g=d),b&&dc(A,b),f&&(A.l=f),g=A}return f=u.D,d=u.ya,f&&d&&Me(g,f,d),Me(g,"VER",u.la),_a(u,g),g}function Ew(u,d,f){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new Fe(new ga({eb:f})):new Fe(u.pa),d.Ha(u.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cw(){}n=Cw.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function vc(){}vc.prototype.g=function(u,d){return new Ft(u,d)};function Ft(u,d){dt.call(this),this.g=new hw(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!W(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!W(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new co(this)}S(Ft,dt),Ft.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ft.prototype.close=function(){Rf(this.g)},Ft.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var f={};f.__data__=u,u=f}else this.u&&(f={},f.__data__=yf(u),u=f);d.i.push(new uM(d.Ya++,u)),d.G==3&&mc(d)},Ft.prototype.N=function(){this.g.l=null,delete this.j,Rf(this.g),delete this.g,Ft.aa.N.call(this)};function Dw(u){_f.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(let f in d){u=f;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}S(Dw,_f);function bw(){If.call(this),this.status=1}S(bw,If);function co(u){this.g=u}S(co,Cw),co.prototype.ua=function(){wt(this.g,"a")},co.prototype.ta=function(u){wt(this.g,new Dw(u))},co.prototype.sa=function(u){wt(this.g,new bw)},co.prototype.ra=function(){wt(this.g,"b")},vc.prototype.createWebChannel=vc.prototype.g,Ft.prototype.send=Ft.prototype.o,Ft.prototype.open=Ft.prototype.m,Ft.prototype.close=Ft.prototype.close,vv=fr.createWebChannelTransport=function(){return new vc},yv=fr.getStatEventTarget=function(){return sc()},mv=fr.Event=pi,gh=fr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ac.NO_ERROR=0,ac.TIMEOUT=8,ac.HTTP_ERROR=6,Ou=fr.ErrorCode=ac,BI.COMPLETE="complete",gv=fr.EventType=BI,FI.EventType=aa,aa.OPEN="a",aa.CLOSE="b",aa.ERROR="c",aa.MESSAGE="d",dt.prototype.listen=dt.prototype.K,Rs=fr.WebChannel=FI,PU=fr.FetchXmlHttpFactory=ga,Fe.prototype.listenOnce=Fe.prototype.L,Fe.prototype.getLastError=Fe.prototype.Ka,Fe.prototype.getLastErrorCode=Fe.prototype.Ba,Fe.prototype.getStatus=Fe.prototype.Z,Fe.prototype.getResponseJson=Fe.prototype.Oa,Fe.prototype.getResponseText=Fe.prototype.oa,Fe.prototype.send=Fe.prototype.ea,Fe.prototype.setWithCredentials=Fe.prototype.Ha,pv=fr.XhrIo=Fe}).apply(typeof ph<"u"?ph:typeof self<"u"?self:typeof window<"u"?window:{});var FS="@firebase/firestore";var ot=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ot.UNAUTHENTICATED=new ot(null),ot.GOOGLE_CREDENTIALS=new ot("google-credentials-uid"),ot.FIRST_PARTY=new ot("first-party-uid"),ot.MOCK_USER=new ot("mock-user");var Zs="10.14.0";var Ji=new Xr("@firebase/firestore");function ku(){return Ji.logLevel}function $(n,...e){if(Ji.logLevel<=pe.DEBUG){let t=e.map(eI);Ji.debug(`Firestore (${Zs}): ${n}`,...t)}}function pr(n,...e){if(Ji.logLevel<=pe.ERROR){let t=e.map(eI);Ji.error(`Firestore (${Zs}): ${n}`,...t)}}function Fs(n,...e){if(Ji.logLevel<=pe.WARN){let t=e.map(eI);Ji.warn(`Firestore (${Zs}): ${n}`,...t)}}function eI(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function X(n="Unexpected state"){let e=`FIRESTORE (${Zs}) INTERNAL ASSERTION FAILED: `+n;throw pr(e),new Error(e)}function Te(n,e){n||X()}function te(n,e){return n}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},U=class extends $t{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var fn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Ih=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Cv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ot.UNAUTHENTICATED))}shutdown(){}},Dv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},bv=class{constructor(e){this.t=e,this.currentUser=ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Te(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new fn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new fn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>v(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new fn)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Te(typeof r.accessToken=="string"),new Ih(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string"),new ot(e)}},Tv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=ot.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Sv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Tv(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Av=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Rv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Te(this.o===void 0);let r=o=>{o.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,$("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Te(typeof t.token=="string"),this.R=t.token,new Av(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function OU(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var wh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=OU(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function Ee(n,e){return n<e?-1:n>e?1:0}function Vs(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var ct=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new U(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new U(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new U(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new U(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ee(this.nanoseconds,e.nanoseconds):Ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ie=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new ct(0,0))}static max(){return new n(new ct(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Eh=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&X(),r===void 0?r=e.length-t:r>e.length-t&&X(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Oe=class n extends Eh{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new U(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},kU=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ht=class n extends Eh{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return kU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new U(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new U(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new U(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new U(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var G=class n{constructor(e){this.path=e}static fromPath(e){return new n(Oe.fromString(e))}static fromName(e){return new n(Oe.fromString(e).popFirst(5))}static empty(){return new n(Oe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Oe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Oe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Oe(e.slice()))}};var Mv=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Mv.UNKNOWN_ID=-1;function FU(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ie.fromTimestamp(r===1e9?new ct(t+1,0):new ct(t,r));return new Xi(i,G.empty(),e)}function VU(n){return new Xi(n.readTime,n.key,-1)}var Xi=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ie.min(),G.empty(),-1)}static max(){return new n(ie.max(),G.empty(),-1)}};function LU(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=G.comparator(n.documentKey,e.documentKey),t!==0?t:Ee(n.largestBatchId,e.largestBatchId))}var jU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",xv=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Xu(n){return v(this,null,function*(){if(n.code!==R.FAILED_PRECONDITION||n.message!==jU)throw n;$("LocalStore","Unexpectedly lost primary lease")})}var N=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&X(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function UU(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ec(n){return n.name==="IndexedDbTransactionError"}var mA=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Xh(n){return n==null}function Bu(n){return n===0&&1/n==-1/0}function BU(n){return typeof n=="number"&&Number.isInteger(n)&&!Bu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var $U=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],cK=[...$U,"documentOverlays"],HU=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],zU=HU,qU=[...zU,"indexConfiguration","indexState","indexEntries"];var lK=[...qU,"globals"];function VS(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Js(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function yA(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ue=class n{constructor(e,t){this.comparator=e,this.root=t||jn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ps(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ps(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ps(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ps(this.root,e,this.comparator,!0)}},Ps=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},jn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw X();let e=this.left.check();if(e!==this.right.check())throw X();return e+(this.isRed()?0:1)}};jn.EMPTY=null,jn.RED=!0,jn.BLACK=!1;jn.EMPTY=new class{constructor(){this.size=0}get key(){throw X()}get value(){throw X()}get color(){throw X()}get left(){throw X()}get right(){throw X()}copy(e,t,r,i,o){return this}insert(e,t,r){return new jn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var _t=class n{constructor(e){this.comparator=e,this.data=new Ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ch(this.data.getIterator())}getIteratorFrom(e){return new Ch(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Ch=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ln=class n{constructor(e){this.fields=e,e.sort(Ht.comparator)}static empty(){return new n([])}unionWith(e){let t=new _t(Ht.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vs(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Dh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var It=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Dh("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};It.EMPTY_BYTE_STRING=new It("");var GU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gr(n){if(Te(!!n),typeof n=="string"){let e=0,t=GU.exec(n);if(Te(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pe(n.seconds),nanos:Pe(n.nanos)}}function Pe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function di(n){return typeof n=="string"?It.fromBase64String(n):It.fromUint8Array(n)}function tI(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function nI(n){let e=n.mapValue.fields.__previous_value__;return tI(e)?nI(e):e}function $u(n){let e=gr(n.mapValue.fields.__local_write_time__.timestampValue);return new ct(e.seconds,e.nanos)}var Nv=class{constructor(e,t,r,i,o,s,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},bh=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var mh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function eo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?tI(n)?4:_A(n)?9007199254740991:vA(n)?10:11:X()}function $n(n,e){if(n===e)return!0;let t=eo(n);if(t!==eo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return $u(n).isEqual($u(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=gr(i.timestampValue),a=gr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return di(i.bytesValue).isEqual(di(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Pe(i.geoPointValue.latitude)===Pe(o.geoPointValue.latitude)&&Pe(i.geoPointValue.longitude)===Pe(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Pe(i.integerValue)===Pe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Pe(i.doubleValue),a=Pe(o.doubleValue);return s===a?Bu(s)===Bu(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Vs(n.arrayValue.values||[],e.arrayValue.values||[],$n);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(VS(s)!==VS(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!$n(s[c],a[c])))return!1;return!0}(n,e);default:return X()}}function Hu(n,e){return(n.values||[]).find(t=>$n(t,e))!==void 0}function Ls(n,e){if(n===e)return 0;let t=eo(n),r=eo(e);if(t!==r)return Ee(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ee(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Pe(o.integerValue||o.doubleValue),c=Pe(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return LS(n.timestampValue,e.timestampValue);case 4:return LS($u(n),$u(e));case 5:return Ee(n.stringValue,e.stringValue);case 6:return function(o,s){let a=di(o),c=di(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let h=Ee(a[l],c[l]);if(h!==0)return h}return Ee(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=Ee(Pe(o.latitude),Pe(s.latitude));return a!==0?a:Ee(Pe(o.longitude),Pe(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return jS(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,l,h;let p=o.fields||{},y=s.fields||{},w=(a=p.value)===null||a===void 0?void 0:a.arrayValue,S=(c=y.value)===null||c===void 0?void 0:c.arrayValue,x=Ee(((l=w?.values)===null||l===void 0?void 0:l.length)||0,((h=S?.values)===null||h===void 0?void 0:h.length)||0);return x!==0?x:jS(w,S)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===mh.mapValue&&s===mh.mapValue)return 0;if(o===mh.mapValue)return 1;if(s===mh.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let y=Ee(c[p],h[p]);if(y!==0)return y;let w=Ls(a[c[p]],l[h[p]]);if(w!==0)return w}return Ee(c.length,h.length)}(n.mapValue,e.mapValue);default:throw X()}}function LS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ee(n,e);let t=gr(n),r=gr(e),i=Ee(t.seconds,r.seconds);return i!==0?i:Ee(t.nanos,r.nanos)}function jS(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Ls(t[i],r[i]);if(o)return o}return Ee(t.length,r.length)}function js(n){return Pv(n)}function Pv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=gr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return di(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return G.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Pv(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Pv(t.fields[s])}`;return i+"}"}(n.mapValue):X()}function US(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ov(n){return!!n&&"integerValue"in n}function rI(n){return!!n&&"arrayValue"in n}function BS(n){return!!n&&"nullValue"in n}function $S(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function vh(n){return!!n&&"mapValue"in n}function vA(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Vu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Js(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Vu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function _A(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var hn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!vh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vu(t)}setAll(e){let t=Ht.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Vu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());vh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $n(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];vh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Js(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Vu(this.value))}};function IA(n){let e=[];return Js(n.fields,(t,r)=>{let i=new Ht([t]);if(vh(r)){let o=IA(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Ln(e)}var pn=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ie.min(),ie.min(),ie.min(),hn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ie.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ie.min(),ie.min(),hn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ie.min(),ie.min(),hn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Us=class{constructor(e,t){this.position=e,this.inclusive=t}};function HS(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=G.comparator(G.fromName(s.referenceValue),t.key):r=Ls(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function zS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!$n(n.position[t],e.position[t]))return!1;return!0}var Bs=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function WU(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Th=class{},We=class n extends Th{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Fv(e,t,r):t==="array-contains"?new jv(e,r):t==="in"?new Uv(e,r):t==="not-in"?new Bv(e,r):t==="array-contains-any"?new $v(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Vv(e,r):new Lv(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Ls(t,this.value)):t!==null&&eo(this.value)===eo(t)&&this.matchesComparison(Ls(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},gn=class n extends Th{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return wA(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function wA(n){return n.op==="and"}function EA(n){return KU(n)&&wA(n)}function KU(n){for(let e of n.filters)if(e instanceof gn)return!1;return!0}function kv(n){if(n instanceof We)return n.field.canonicalString()+n.op.toString()+js(n.value);if(EA(n))return n.filters.map(e=>kv(e)).join(",");{let e=n.filters.map(t=>kv(t)).join(",");return`${n.op}(${e})`}}function CA(n,e){return n instanceof We?function(r,i){return i instanceof We&&r.op===i.op&&r.field.isEqual(i.field)&&$n(r.value,i.value)}(n,e):n instanceof gn?function(r,i){return i instanceof gn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&CA(s,i.filters[a]),!0):!1}(n,e):void X()}function DA(n){return n instanceof We?function(t){return`${t.field.canonicalString()} ${t.op} ${js(t.value)}`}(n):n instanceof gn?function(t){return t.op.toString()+" {"+t.getFilters().map(DA).join(" ,")+"}"}(n):"Filter"}var Fv=class extends We{constructor(e,t,r){super(e,t,r),this.key=G.fromName(r.referenceValue)}matches(e){let t=G.comparator(e.key,this.key);return this.matchesComparison(t)}},Vv=class extends We{constructor(e,t){super(e,"in",t),this.keys=bA("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Lv=class extends We{constructor(e,t){super(e,"not-in",t),this.keys=bA("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function bA(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>G.fromName(r.referenceValue))}var jv=class extends We{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return rI(t)&&Hu(t.arrayValue,this.value)}},Uv=class extends We{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Hu(this.value.arrayValue,t)}},Bv=class extends We{constructor(e,t){super(e,"not-in",t)}matches(e){if(Hu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Hu(this.value.arrayValue,t)}},$v=class extends We{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!rI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Hu(this.value.arrayValue,r))}};var Hv=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function qS(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Hv(n,e,t,r,i,o,s)}function iI(n){let e=te(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>kv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Xh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>js(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>js(r)).join(",")),e.ue=t}return e.ue}function oI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!WU(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!CA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!zS(n.startAt,e.startAt)&&zS(n.endAt,e.endAt)}function zv(n){return G.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var to=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function QU(n,e,t,r,i,o,s,a){return new to(n,e,t,r,i,o,s,a)}function sI(n){return new to(n)}function GS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function TA(n){return n.collectionGroup!==null}function Lu(n){let e=te(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new _t(Ht.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Bs(o,r))}),t.has(Ht.keyField().canonicalString())||e.ce.push(new Bs(Ht.keyField(),r))}return e.ce}function Un(n){let e=te(n);return e.le||(e.le=YU(e,Lu(n))),e.le}function YU(n,e){if(n.limitType==="F")return qS(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Bs(i.field,o)});let t=n.endAt?new Us(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Us(n.startAt.position,n.startAt.inclusive):null;return qS(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function qv(n,e){let t=n.filters.concat([e]);return new to(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Gv(n,e,t){return new to(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ef(n,e){return oI(Un(n),Un(e))&&n.limitType===e.limitType}function SA(n){return`${iI(Un(n))}|lt:${n.limitType}`}function Ms(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>DA(i)).join(", ")}]`),Xh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>js(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>js(i)).join(",")),`Target(${r})`}(Un(n))}; limitType=${n.limitType})`}function tf(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):G.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Lu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let l=HS(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,Lu(r),i)||r.endAt&&!function(s,a,c){let l=HS(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,Lu(r),i))}(n,e)}function ZU(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function AA(n){return(e,t)=>{let r=!1;for(let i of Lu(n)){let o=JU(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function JU(n,e,t){let r=n.field.isKeyField()?G.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?Ls(c,l):X()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return X()}}var hi=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Js(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return yA(this.inner)}size(){return this.innerSize}};var XU=new Ue(G.comparator);function mr(){return XU}var RA=new Ue(G.comparator);function Fu(...n){let e=RA;for(let t of n)e=e.insert(t.key,t);return e}function MA(n){let e=RA;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ki(){return ju()}function xA(){return ju()}function ju(){return new hi(n=>n.toString(),(n,e)=>n.isEqual(e))}var eB=new Ue(G.comparator),tB=new _t(G.comparator);function ge(...n){let e=tB;for(let t of n)e=e.add(t);return e}var nB=new _t(Ee);function rB(){return nB}function aI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bu(e)?"-0":e}}function NA(n){return{integerValue:""+n}}function iB(n,e){return BU(e)?NA(e):aI(n,e)}var $s=class{constructor(){this._=void 0}};function oB(n,e,t){return n instanceof Hs?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&tI(o)&&(o=nI(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof no?OA(n,e):n instanceof ro?kA(n,e):function(i,o){let s=PA(i,o),a=WS(s)+WS(i.Pe);return Ov(s)&&Ov(i.Pe)?NA(a):aI(i.serializer,a)}(n,e)}function sB(n,e,t){return n instanceof no?OA(n,e):n instanceof ro?kA(n,e):t}function PA(n,e){return n instanceof zs?function(r){return Ov(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Hs=class extends $s{},no=class extends $s{constructor(e){super(),this.elements=e}};function OA(n,e){let t=FA(e);for(let r of n.elements)t.some(i=>$n(i,r))||t.push(r);return{arrayValue:{values:t}}}var ro=class extends $s{constructor(e){super(),this.elements=e}};function kA(n,e){let t=FA(e);for(let r of n.elements)t=t.filter(i=>!$n(i,r));return{arrayValue:{values:t}}}var zs=class extends $s{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function WS(n){return Pe(n.integerValue||n.doubleValue)}function FA(n){return rI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function aB(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof no&&i instanceof no||r instanceof ro&&i instanceof ro?Vs(r.elements,i.elements,$n):r instanceof zs&&i instanceof zs?$n(r.Pe,i.Pe):r instanceof Hs&&i instanceof Hs}(n.transform,e.transform)}var Wv=class{constructor(e,t){this.version=e,this.transformResults=t}},Zi=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function _h(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var qs=class{};function VA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Sh(n.key,Zi.none()):new io(n.key,n.data,Zi.none());{let t=n.data,r=hn.empty(),i=new _t(Ht.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new yr(n.key,r,new Ln(i.toArray()),Zi.none())}}function uB(n,e,t){n instanceof io?function(i,o,s){let a=i.value.clone(),c=QS(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof yr?function(i,o,s){if(!_h(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=QS(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(LA(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Uu(n,e,t,r){return n instanceof io?function(o,s,a,c){if(!_h(o.precondition,s))return a;let l=o.value.clone(),h=YS(o.fieldTransforms,c,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof yr?function(o,s,a,c){if(!_h(o.precondition,s))return a;let l=YS(o.fieldTransforms,c,s),h=s.data;return h.setAll(LA(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return _h(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function cB(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=PA(r.transform,i||null);o!=null&&(t===null&&(t=hn.empty()),t.set(r.field,o))}return t||null}function KS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Vs(r,i,(o,s)=>aB(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var io=class extends qs{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},yr=class extends qs{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function LA(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function QS(n,e,t){let r=new Map;Te(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,sB(s,a,t[i]))}return r}function YS(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,oB(o,s,e))}return r}var Sh=class extends qs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Kv=class extends qs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Qv=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&uB(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Uu(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Uu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=xA();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=VA(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ge())}isEqual(e){return this.batchId===e.batchId&&Vs(this.mutations,e.mutations,(t,r)=>KS(t,r))&&Vs(this.baseMutations,e.baseMutations,(t,r)=>KS(t,r))}},Yv=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Te(e.mutations.length===r.length);let i=function(){return eB}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Zv=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Jv=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var qe,ve;function lB(n){switch(n){default:return X();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function jA(n){if(n===void 0)return pr("GRPC error has no .code"),R.UNKNOWN;switch(n){case qe.OK:return R.OK;case qe.CANCELLED:return R.CANCELLED;case qe.UNKNOWN:return R.UNKNOWN;case qe.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case qe.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case qe.INTERNAL:return R.INTERNAL;case qe.UNAVAILABLE:return R.UNAVAILABLE;case qe.UNAUTHENTICATED:return R.UNAUTHENTICATED;case qe.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case qe.NOT_FOUND:return R.NOT_FOUND;case qe.ALREADY_EXISTS:return R.ALREADY_EXISTS;case qe.PERMISSION_DENIED:return R.PERMISSION_DENIED;case qe.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case qe.ABORTED:return R.ABORTED;case qe.OUT_OF_RANGE:return R.OUT_OF_RANGE;case qe.UNIMPLEMENTED:return R.UNIMPLEMENTED;case qe.DATA_LOSS:return R.DATA_LOSS;default:return X()}}(ve=qe||(qe={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";var ZS=null;function dB(){return new TextEncoder}var hB=new ci([4294967295,4294967295],0);function JS(n){let e=dB().encode(n),t=new fv;return t.update(e),new Uint8Array(t.digest())}function XS(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ci([t,r],0),new ci([i,o],0)]}var Xv=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Qi(`Invalid padding: ${t}`);if(r<0)throw new Qi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Qi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Qi(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ci.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(ci.fromNumber(r)));return i.compare(hB)===1&&(i=new ci([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=JS(e),[r,i]=XS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=JS(e),[r,i]=XS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Qi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ah=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,zu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ie.min(),i,new Ue(Ee),mr(),ge())}},zu=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ge(),ge(),ge())}};var Os=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Rh=class{constructor(e,t){this.targetId=e,this.me=t}},Mh=class{constructor(e,t,r=It.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},xh=class{constructor(){this.fe=0,this.ge=tA(),this.pe=It.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ge(),t=ge(),r=ge();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:X()}}),new zu(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=tA()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Te(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},e_=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=mr(),this.qe=eA(),this.Qe=new Ue(Ee)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:X()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(zv(o))if(r===0){let s=new G(o.path);this.Ue(t,s,pn.newNoDocument(s,ie.min()))}else Te(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}ZS?.et(function(h,p,y,w,S){var x,M,j,W,Q,le;let ke={localCacheCount:h,existenceFilterCount:p.count,databaseId:y.database,projectId:y.projectId},ne=p.unchangedNames;return ne&&(ke.bloomFilter={applied:S===0,hashCount:(x=ne?.hashCount)!==null&&x!==void 0?x:0,bitmapLength:(W=(j=(M=ne?.bits)===null||M===void 0?void 0:M.bitmap)===null||j===void 0?void 0:j.length)!==null&&W!==void 0?W:0,padding:(le=(Q=ne?.bits)===null||Q===void 0?void 0:Q.padding)!==null&&le!==void 0?le:0,mightContain:C=>{var m;return(m=w?.mightContain(C))!==null&&m!==void 0&&m}}),ke}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=di(r).toUint8Array()}catch(c){if(c instanceof Dh)return Fs("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Xv(s,i,o)}catch(c){return Fs(c instanceof Qi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&zv(a.target)){let c=new G(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,pn.newNoDocument(c,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ge();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Ah(e,t,this.Qe,this.ke,r);return this.ke=mr(),this.qe=eA(),this.Qe=new Ue(Ee),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new xh,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new _t(Ee),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||$("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new xh),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function eA(){return new Ue(G.comparator)}function tA(){return new Ue(G.comparator)}var fB={asc:"ASCENDING",desc:"DESCENDING"},pB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gB={and:"AND",or:"OR"},t_=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function n_(n,e){return n.useProto3Json||Xh(e)?e:{value:e}}function Nh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function UA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function mB(n,e){return Nh(n,e.toTimestamp())}function Bn(n){return Te(!!n),ie.fromTimestamp(function(t){let r=gr(t);return new ct(r.seconds,r.nanos)}(n))}function uI(n,e){return r_(n,e).canonicalString()}function r_(n,e){let t=function(i){return new Oe(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function BA(n){let e=Oe.fromString(n);return Te(GA(e)),e}function i_(n,e){return uI(n.databaseId,e.path)}function _v(n,e){let t=BA(e);if(t.get(1)!==n.databaseId.projectId)throw new U(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new U(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new G(HA(t))}function $A(n,e){return uI(n.databaseId,e)}function yB(n){let e=BA(n);return e.length===4?Oe.emptyPath():HA(e)}function o_(n){return new Oe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function HA(n){return Te(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function nA(n,e,t){return{name:i_(n,e),fields:t.value.mapValue.fields}}function vB(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:X()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(Te(h===void 0||typeof h=="string"),It.fromBase64String(h||"")):(Te(h===void 0||h instanceof Buffer||h instanceof Uint8Array),It.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?R.UNKNOWN:jA(l.code);return new U(h,l.message||"")}(s);t=new Mh(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=_v(n,r.document.name),o=Bn(r.document.updateTime),s=r.document.createTime?Bn(r.document.createTime):ie.min(),a=new hn({mapValue:{fields:r.document.fields}}),c=pn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new Os(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=_v(n,r.document),o=r.readTime?Bn(r.readTime):ie.min(),s=pn.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Os([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=_v(n,r.document),o=r.removedTargetIds||[];t=new Os([],o,i,null)}else{if(!("filter"in e))return X();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Jv(i,o),a=r.targetId;t=new Rh(a,s)}}return t}function _B(n,e){let t;if(e instanceof io)t={update:nA(n,e.key,e.value)};else if(e instanceof Sh)t={delete:i_(n,e.key)};else if(e instanceof yr)t={update:nA(n,e.key,e.data),updateMask:AB(e.fieldMask)};else{if(!(e instanceof Kv))return X();t={verify:i_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Hs)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof no)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ro)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof zs)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw X()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:mB(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:X()}(n,e.precondition)),t}function IB(n,e){return n&&n.length>0?(Te(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Bn(i.updateTime):Bn(o);return s.isEqual(ie.min())&&(s=Bn(o)),new Wv(s,i.transformResults||[])}(t,e))):[]}function wB(n,e){return{documents:[$A(n,e.path)]}}function EB(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=$A(n,i);let o=function(l){if(l.length!==0)return qA(gn.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(y){return{field:xs(y.field),direction:bB(y.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=n_(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function CB(n){let e=yB(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Te(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let y=zA(p);return y instanceof gn&&EA(y)?y.getFilters():[y]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(y=>function(S){return new Bs(Ns(S.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(y))}(t.orderBy));let a=null;t.limit&&(a=function(p){let y;return y=typeof p=="object"?p.value:p,Xh(y)?null:y}(t.limit));let c=null;t.startAt&&(c=function(p){let y=!!p.before,w=p.values||[];return new Us(w,y)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let y=!p.before,w=p.values||[];return new Us(w,y)}(t.endAt)),QU(e,i,s,o,a,"F",c,l)}function DB(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function zA(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Ns(t.unaryFilter.field);return We.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ns(t.unaryFilter.field);return We.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ns(t.unaryFilter.field);return We.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ns(t.unaryFilter.field);return We.create(s,"!=",{nullValue:"NULL_VALUE"});default:return X()}}(n):n.fieldFilter!==void 0?function(t){return We.create(Ns(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return X()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return gn.create(t.compositeFilter.filters.map(r=>zA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return X()}}(t.compositeFilter.op))}(n):X()}function bB(n){return fB[n]}function TB(n){return pB[n]}function SB(n){return gB[n]}function xs(n){return{fieldPath:n.canonicalString()}}function Ns(n){return Ht.fromServerFormat(n.fieldPath)}function qA(n){return n instanceof We?function(t){if(t.op==="=="){if($S(t.value))return{unaryFilter:{field:xs(t.field),op:"IS_NAN"}};if(BS(t.value))return{unaryFilter:{field:xs(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if($S(t.value))return{unaryFilter:{field:xs(t.field),op:"IS_NOT_NAN"}};if(BS(t.value))return{unaryFilter:{field:xs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xs(t.field),op:TB(t.op),value:t.value}}}(n):n instanceof gn?function(t){let r=t.getFilters().map(i=>qA(i));return r.length===1?r[0]:{compositeFilter:{op:SB(t.op),filters:r}}}(n):X()}function AB(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function GA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var qu=class n{constructor(e,t,r,i,o=ie.min(),s=ie.min(),a=It.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var s_=class{constructor(e){this.ct=e}};function RB(n){let e=CB({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Gv(e,e.limit,"L"):e}var Ph=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Pe(e.integerValue));else if("doubleValue"in e){let r=Pe(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Bu(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=gr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(di(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?_A(e)?this.dt(t,Number.MAX_SAFE_INTEGER):vA(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):X()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Pe(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),G.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Ph.vt=new Ph;var a_=class{constructor(){this.un=new u_}addToCollectionParentIndex(e,t){return this.un.add(t),N.resolve()}getCollectionParents(e,t){return N.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return N.resolve()}deleteFieldIndex(e,t){return N.resolve()}deleteAllFieldIndexes(e){return N.resolve()}createTargetIndexes(e,t){return N.resolve()}getDocumentsMatchingTarget(e,t){return N.resolve(null)}getIndexType(e,t){return N.resolve(0)}getFieldIndexes(e,t){return N.resolve([])}getNextCollectionGroupToUpdate(e){return N.resolve(null)}getMinOffset(e,t){return N.resolve(Xi.min())}getMinOffsetFromCollectionGroup(e,t){return N.resolve(Xi.min())}updateCollectionGroup(e,t,r){return N.resolve()}updateIndexEntries(e,t){return N.resolve()}},u_=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new _t(Oe.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new _t(Oe.comparator)).toArray()}};var hK=new Uint8Array(0);var Vn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Vn.DEFAULT_COLLECTION_PERCENTILE=10,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vn.DEFAULT=new Vn(41943040,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vn.DISABLED=new Vn(-1,0,0);var Gu=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var c_=class{constructor(){this.changes=new hi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?N.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var l_=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var d_=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Uu(r.mutation,i,Ln.empty(),ct.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ge()){let i=Ki();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Fu();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Ki();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ge()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=mr(),s=ju(),a=function(){return ju()}();return t.forEach((c,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof yr)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Uu(h.mutation,l,h.mutation.getFieldMask(),ct.now())):s.set(l.key,Ln.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new l_(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=ju(),i=new Ue((s,a)=>s-a),o=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let h=r.get(c)||Ln.empty();h=a.applyToLocalView(l,h),r.set(c,h);let p=(i.get(a.batchId)||ge()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,h=c.value,p=xA();h.forEach(y=>{if(!o.has(y)){let w=VA(t.get(y),r.get(y));w!==null&&p.set(y,w),o=o.add(y)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return N.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return G.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):TA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):N.resolve(Ki()),a=-1,c=o;return s.next(l=>N.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?N.resolve():this.remoteDocumentCache.getEntry(e,h).next(y=>{c=c.insert(h,y)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,ge())).next(h=>({batchId:a,changes:MA(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new G(t)).next(r=>{let i=Fu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Fu();return this.indexManager.getCollectionParents(e,o).next(a=>N.forEach(a,c=>{let l=function(p,y){return new to(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,y)=>{s=s.insert(p,y)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,pn.newInvalidDocument(h)))});let a=Fu();return s.forEach((c,l)=>{let h=o.get(c);h!==void 0&&Uu(h.mutation,l,Ln.empty(),ct.now()),tf(t,l)&&(a=a.insert(c,l))}),a})}};var h_=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return N.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Bn(i.createTime)}}(t)),N.resolve()}getNamedQuery(e,t){return N.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:RB(i.bundledQuery),readTime:Bn(i.readTime)}}(t)),N.resolve()}};var f_=class{constructor(){this.overlays=new Ue(G.comparator),this.Ir=new Map}getOverlay(e,t){return N.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Ki();return N.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),N.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),N.resolve()}getOverlaysForCollection(e,t,r){let i=Ki(),o=t.length+1,s=new G(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return N.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ue((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Ki(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Ki(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return N.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Zv(t,r));let o=this.Ir.get(t);o===void 0&&(o=ge(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var p_=class{constructor(){this.sessionToken=It.EMPTY_BYTE_STRING}getSessionToken(e){return N.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,N.resolve()}};var Wu=class{constructor(){this.Tr=new _t(Ge.Er),this.dr=new _t(Ge.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Ge(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Ge(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new G(new Oe([])),r=new Ge(t,e),i=new Ge(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new G(new Oe([])),r=new Ge(t,e),i=new Ge(t,e+1),o=ge();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Ge(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ge=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return G.comparator(e.key,t.key)||Ee(e.wr,t.wr)}static Ar(e,t){return Ee(e.wr,t.wr)||G.comparator(e.key,t.key)}};var g_=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new _t(Ge.Er)}checkEmpty(e){return N.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Qv(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new Ge(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return N.resolve(s)}lookupMutationBatch(e,t){return N.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return N.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ge(t,0),i=new Ge(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),N.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _t(Ee);return t.forEach(i=>{let o=new Ge(i,0),s=new Ge(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),N.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;G.isDocumentKey(o)||(o=o.child(""));let s=new Ge(new G(o),0),a=new _t(Ee);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},s),N.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Te(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return N.forEach(t.mutations,i=>{let o=new Ge(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Ge(t,0),i=this.br.firstAfterOrEqual(r);return N.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,N.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var m_=class{constructor(e){this.Mr=e,this.docs=function(){return new Ue(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return N.resolve(r?r.document.mutableCopy():pn.newInvalidDocument(t))}getEntries(e,t){let r=mr();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():pn.newInvalidDocument(i))}),N.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=mr(),s=t.path,a=new G(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:h}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||LU(VU(h),r)<=0||(i.has(h.key)||tf(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return N.resolve(o)}getAllFromCollectionGroup(e,t,r,i){X()}Or(e,t){return N.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new y_(this)}getSize(e){return N.resolve(this.size)}},y_=class extends c_{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),N.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var v_=class{constructor(e){this.persistence=e,this.Nr=new hi(t=>iI(t),oI),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Wu,this.targetCount=0,this.kr=Gu.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),N.resolve()}getLastRemoteSnapshotVersion(e){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return N.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),N.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Gu(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,N.resolve()}updateTargetData(e,t){return this.Kn(t),N.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,N.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),N.waitFor(o).next(()=>i)}getTargetCount(e){return N.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return N.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),N.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),N.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),N.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return N.resolve(r)}containsKey(e,t){return N.resolve(this.Br.containsKey(t))}};var __=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new mA(0),this.Kr=!1,this.Kr=!0,this.$r=new p_,this.referenceDelegate=e(this),this.Ur=new v_(this),this.indexManager=new a_,this.remoteDocumentCache=function(i){return new m_(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new s_(t),this.Gr=new h_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new f_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new g_(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){$("MemoryPersistence","Starting transaction:",e);let i=new I_(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return N.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},I_=class extends xv{constructor(e){super(),this.currentSequenceNumber=e}},w_=class n{constructor(e){this.persistence=e,this.Jr=new Wu,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw X()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),N.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),N.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),N.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.Xr,r=>{let i=G.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,ie.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return N.or([()=>N.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var E_=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ge(),i=ge();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var C_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var D_=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Bb()?8:UU(it())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new C_;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(ku()<=pe.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",Ms(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),N.resolve()):(ku()<=pe.DEBUG&&$("QueryEngine","Query:",Ms(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ku()<=pe.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",Ms(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Un(t))):N.resolve())}Yi(e,t){if(GS(t))return N.resolve(null);let r=Un(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Gv(t,null,"F"),r=Un(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ge(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(t,a);return this.ns(t,l,s,c.readTime)?this.Yi(e,Gv(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return GS(t)||i.isEqual(ie.min())?N.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?N.resolve(null):(ku()<=pe.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ms(t)),this.rs(e,s,t,FU(i,-1)).next(a=>a))})}ts(e,t){let r=new _t(AA(e));return t.forEach((i,o)=>{tf(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return ku()<=pe.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",Ms(t)),this.Ji.getDocumentsMatchingQuery(e,t,Xi.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var b_=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Ue(Ee),this._s=new hi(o=>iI(o),oI),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new d_(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function MB(n,e,t,r){return new b_(n,e,t,r)}function WA(n,e){return v(this,null,function*(){let t=te(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=ge();for(let l of i){s.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function xB(n,e){let t=te(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){let p=l.batch,y=p.keys(),w=N.resolve();return y.forEach(S=>{w=w.next(()=>h.getEntry(c,S)).next(x=>{let M=l.docVersions.get(S);Te(M!==null),x.version.compareTo(M)<0&&(p.applyToRemoteDocument(x,l),x.isValidDocument()&&(x.setReadTime(l.commitVersion),h.addEntry(x)))})}),w.next(()=>a.mutationQueue.removeMutationBatch(c,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ge();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function KA(n){let e=te(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function NB(n,e){let t=te(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let y=i.get(p);if(!y)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,p)));let w=y.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?w=w.withResumeToken(It.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):h.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(h.resumeToken,r)),i=i.insert(p,w),function(x,M,j){return x.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(y,w,h)&&a.push(t.Ur.updateTargetData(o,w))});let c=mr(),l=ge();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(PB(o,s,e.documentUpdates).next(h=>{c=h.Ps,l=h.Is})),!r.isEqual(ie.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(p=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return N.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.os=i,o))}function PB(n,e,t){let r=ge(),i=ge();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=mr();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ie.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):$("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:s,Is:i}})}function OB(n,e){let t=te(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function kB(n,e){let t=te(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,N.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new qu(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function T_(n,e,t){return v(this,null,function*(){let r=te(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!ec(s))throw s;$("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function rA(n,e,t){let r=te(n),i=ie.min(),o=ge();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,h){let p=te(c),y=p._s.get(h);return y!==void 0?N.resolve(p.os.get(y)):p.Ur.getTargetData(l,h)}(r,s,Un(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:ie.min(),t?o:ge())).next(a=>(FB(r,ZU(e),a),{documents:a,Ts:o})))}function FB(n,e,t){let r=n.us.get(e)||ie.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}var Oh=class{constructor(){this.activeTargetIds=rB()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var S_=class{constructor(){this.so=new Oh,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Oh,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var A_=class{_o(e){}shutdown(){}};var kh=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){$("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){$("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var yh=null;function Iv(){return yh===null?yh=function(){return 268435456+Math.round(2147483648*Math.random())}():yh++,"0x"+yh.toString(16)}var VB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var R_=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var vt="WebChannelConnection",M_=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=Iv(),c=this.xo(t,r.toUriEncodedString());$("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,c,l,i).then(h=>($("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw Fs("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Zs}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=VB[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=Iv();return new Promise((s,a)=>{let c=new pv;c.setWithCredentials(!0),c.listenOnce(gv.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Ou.NO_ERROR:let h=c.getResponseJson();$(vt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case Ou.TIMEOUT:$(vt,`RPC '${e}' ${o} timed out`),a(new U(R.DEADLINE_EXCEEDED,"Request time out"));break;case Ou.HTTP_ERROR:let p=c.getStatus();if($(vt,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let y=c.getResponseJson();Array.isArray(y)&&(y=y[0]);let w=y?.error;if(w&&w.status&&w.message){let S=function(M){let j=M.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(j)>=0?j:R.UNKNOWN}(w.status);a(new U(S,w.message))}else a(new U(R.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new U(R.UNAVAILABLE,"Connection failed."));break;default:X()}}finally{$(vt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);$(vt,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=Iv(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=vv(),a=yv(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=o.join("");$(vt,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=s.createWebChannel(h,c),y=!1,w=!1,S=new R_({Io:M=>{w?$(vt,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(y||($(vt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),$(vt,`RPC '${e}' stream ${i} sending:`,M),p.send(M))},To:()=>p.close()}),x=(M,j,W)=>{M.listen(j,Q=>{try{W(Q)}catch(le){setTimeout(()=>{throw le},0)}})};return x(p,Rs.EventType.OPEN,()=>{w||($(vt,`RPC '${e}' stream ${i} transport opened.`),S.yo())}),x(p,Rs.EventType.CLOSE,()=>{w||(w=!0,$(vt,`RPC '${e}' stream ${i} transport closed`),S.So())}),x(p,Rs.EventType.ERROR,M=>{w||(w=!0,Fs(vt,`RPC '${e}' stream ${i} transport errored:`,M),S.So(new U(R.UNAVAILABLE,"The operation could not be completed")))}),x(p,Rs.EventType.MESSAGE,M=>{var j;if(!w){let W=M.data[0];Te(!!W);let Q=W,le=Q.error||((j=Q[0])===null||j===void 0?void 0:j.error);if(le){$(vt,`RPC '${e}' stream ${i} received error:`,le);let ke=le.status,ne=function(_){let E=qe[_];if(E!==void 0)return jA(E)}(ke),C=le.message;ne===void 0&&(ne=R.INTERNAL,C="Unknown error status: "+ke+" with message "+le.message),w=!0,S.So(new U(ne,C)),p.close()}else $(vt,`RPC '${e}' stream ${i} received:`,W),S.bo(W)}}),x(a,mv.STAT_EVENT,M=>{M.stat===gh.PROXY?$(vt,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===gh.NOPROXY&&$(vt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}};function wv(){return typeof document<"u"?document:null}function nf(n){return new t_(n,!0)}var Fh=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&$("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Vh=class{constructor(e,t,r,i,o,s,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Fh(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return v(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return v(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return v(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===R.RESOURCE_EXHAUSTED?(pr(t.toString()),pr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new U(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>v(this,null,function*(){this.state=0,this.start()}))}I_(e){return $("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():($("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},x_=class extends Vh{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=vB(this.serializer,e),r=function(o){if(!("targetChange"in o))return ie.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ie.min():s.readTime?Bn(s.readTime):ie.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=o_(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=zv(c)?{documents:wB(o,c)}:{query:EB(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=UA(o,s.resumeToken);let l=n_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ie.min())>0){a.readTime=Nh(o,s.snapshotVersion.toTimestamp());let l=n_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=DB(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=o_(this.serializer),t.removeTarget=e,this.a_(t)}},N_=class extends Vh{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Te(!!e.streamToken),this.lastStreamToken=e.streamToken,Te(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Te(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=IB(e.writeResults,e.commitTime),r=Bn(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=o_(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>_B(this.serializer,r))};this.a_(t)}};var P_=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new U(R.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,r_(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new U(R.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,r_(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new U(R.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},O_=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(pr(t),this.D_=!1):$("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var k_=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>v(this,null,function*(){oo(this)&&($("RemoteStore","Restarting streams for network reachability change."),yield function(c){return v(this,null,function*(){let l=te(c);l.L_.add(4),yield tc(l),l.q_.set("Unknown"),l.L_.delete(4),yield rf(l)})}(this))}))}),this.q_=new O_(r,i)}};function rf(n){return v(this,null,function*(){if(oo(n))for(let e of n.B_)yield e(!0)})}function tc(n){return v(this,null,function*(){for(let e of n.B_)yield e(!1)})}function QA(n,e){let t=te(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),hI(t)?dI(t):Xs(t).r_()&&lI(t,e))}function cI(n,e){let t=te(n),r=Xs(t);t.N_.delete(e),r.r_()&&YA(t,e),t.N_.size===0&&(r.r_()?r.o_():oo(t)&&t.q_.set("Unknown"))}function lI(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Xs(n).A_(e)}function YA(n,e){n.Q_.xe(e),Xs(n).R_(e)}function dI(n){n.Q_=new e_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Xs(n).start(),n.q_.v_()}function hI(n){return oo(n)&&!Xs(n).n_()&&n.N_.size>0}function oo(n){return te(n).L_.size===0}function ZA(n){n.Q_=void 0}function LB(n){return v(this,null,function*(){n.q_.set("Online")})}function jB(n){return v(this,null,function*(){n.N_.forEach((e,t)=>{lI(n,e)})})}function UB(n,e){return v(this,null,function*(){ZA(n),hI(n)?(n.q_.M_(e),dI(n)):n.q_.set("Unknown")})}function BB(n,e,t){return v(this,null,function*(){if(n.q_.set("Online"),e instanceof Mh&&e.state===2&&e.cause)try{yield function(i,o){return v(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){$("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Lh(n,r)}else if(e instanceof Os?n.Q_.Ke(e):e instanceof Rh?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ie.min()))try{let r=yield KA(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let h=o.N_.get(c);if(!h)return;o.N_.set(c,h.withResumeToken(It.EMPTY_BYTE_STRING,h.snapshotVersion)),YA(o,c);let p=new qu(h.target,c,l,h.sequenceNumber);lI(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){$("RemoteStore","Failed to raise snapshot:",r),yield Lh(n,r)}})}function Lh(n,e,t){return v(this,null,function*(){if(!ec(e))throw e;n.L_.add(1),yield tc(n),n.q_.set("Offline"),t||(t=()=>KA(n.localStore)),n.asyncQueue.enqueueRetryable(()=>v(this,null,function*(){$("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield rf(n)}))})}function JA(n,e){return e().catch(t=>Lh(n,t,e))}function of(n){return v(this,null,function*(){let e=te(n),t=fi(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;$B(e);)try{let i=yield OB(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,HB(e,i)}catch(i){yield Lh(e,i)}XA(e)&&eR(e)})}function $B(n){return oo(n)&&n.O_.length<10}function HB(n,e){n.O_.push(e);let t=fi(n);t.r_()&&t.V_&&t.m_(e.mutations)}function XA(n){return oo(n)&&!fi(n).n_()&&n.O_.length>0}function eR(n){fi(n).start()}function zB(n){return v(this,null,function*(){fi(n).p_()})}function qB(n){return v(this,null,function*(){let e=fi(n);for(let t of n.O_)e.m_(t.mutations)})}function GB(n,e,t){return v(this,null,function*(){let r=n.O_.shift(),i=Yv.from(r,e,t);yield JA(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield of(n)})}function WB(n,e){return v(this,null,function*(){e&&fi(n).V_&&(yield function(r,i){return v(this,null,function*(){if(function(s){return lB(s)&&s!==R.ABORTED}(i.code)){let o=r.O_.shift();fi(r).s_(),yield JA(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield of(r)}})}(n,e)),XA(n)&&eR(n)})}function iA(n,e){return v(this,null,function*(){let t=te(n);t.asyncQueue.verifyOperationInProgress(),$("RemoteStore","RemoteStore received new credentials");let r=oo(t);t.L_.add(3),yield tc(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield rf(t)})}function KB(n,e){return v(this,null,function*(){let t=te(n);e?(t.L_.delete(2),yield rf(t)):e||(t.L_.add(2),yield tc(t),t.q_.set("Unknown"))})}function Xs(n){return n.K_||(n.K_=function(t,r,i){let o=te(t);return o.w_(),new x_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:LB.bind(null,n),Ro:jB.bind(null,n),mo:UB.bind(null,n),d_:BB.bind(null,n)}),n.B_.push(e=>v(this,null,function*(){e?(n.K_.s_(),hI(n)?dI(n):n.q_.set("Unknown")):(yield n.K_.stop(),ZA(n))}))),n.K_}function fi(n){return n.U_||(n.U_=function(t,r,i){let o=te(t);return o.w_(),new N_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:zB.bind(null,n),mo:WB.bind(null,n),f_:qB.bind(null,n),g_:GB.bind(null,n)}),n.B_.push(e=>v(this,null,function*(){e?(n.U_.s_(),yield of(n)):(yield n.U_.stop(),n.O_.length>0&&($("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var F_=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new fn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new U(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function fI(n,e){if(pr("AsyncQueue",`${e}: ${n}`),ec(n))return new U(R.UNAVAILABLE,`${e}: ${n}`);throw n}var jh=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||G.comparator(t.key,r.key):(t,r)=>G.comparator(t.key,r.key),this.keyedMap=Fu(),this.sortedSet=new Ue(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Uh=class{constructor(){this.W_=new Ue(G.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):X():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Gs=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,jh.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ef(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var V_=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},L_=class{constructor(){this.queries=oA(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=te(t),o=i.queries;i.queries=oA(),o.forEach((s,a)=>{for(let c of a.j_)c.onError(r)})})(this,new U(R.ABORTED,"Firestore shutting down"))}};function oA(){return new hi(n=>SA(n),ef)}function tR(n,e){return v(this,null,function*(){let t=te(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new V_,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=fI(s,`Initialization of query '${Ms(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&pI(t)})}function nR(n,e){return v(this,null,function*(){let t=te(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function QB(n,e){let t=te(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&pI(t)}function YB(n,e,t){let r=te(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function pI(n){n.Y_.forEach(e=>{e.next()})}var j_,sA;(sA=j_||(j_={})).ea="default",sA.Cache="cache";var Bh=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Gs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Gs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==j_.Cache}};var $h=class{constructor(e){this.key=e}},Hh=class{constructor(e){this.key=e}},U_=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ge(),this.mutatedKeys=ge(),this.Aa=AA(e),this.Ra=new jh(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Uh,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let y=i.get(h),w=tf(this.query,p)?p:null,S=!!y&&this.mutatedKeys.has(y.key),x=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations),M=!1;y&&w?y.data.isEqual(w.data)?S!==x&&(r.track({type:3,doc:w}),M=!0):this.ga(y,w)||(r.track({type:2,doc:w}),M=!0,(c&&this.Aa(w,c)>0||l&&this.Aa(w,l)<0)&&(a=!0)):!y&&w?(r.track({type:0,doc:w}),M=!0):y&&!w&&(r.track({type:1,doc:y}),M=!0,(c||l)&&(a=!0)),M&&(w?(s=s.add(w),o=x?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(w,S){let x=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X()}};return x(w)-x(S)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,s.length!==0||l?{snapshot:new Gs(this.query,e.Ra,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Uh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ge(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Hh(r))}),this.da.forEach(r=>{e.has(r)||t.push(new $h(r))}),t}ba(e){this.Ta=e.Ts,this.da=ge();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Gs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},B_=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},$_=class{constructor(e){this.key=e,this.va=!1}},H_=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new hi(a=>SA(a),ef),this.Ma=new Map,this.xa=new Set,this.Oa=new Ue(G.comparator),this.Na=new Map,this.La=new Wu,this.Ba={},this.ka=new Map,this.qa=Gu.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function ZB(n,e,t=!0){return v(this,null,function*(){let r=uR(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield rR(r,e,t,!0),i})}function JB(n,e){return v(this,null,function*(){let t=uR(n);yield rR(t,e,!0,!1)})}function rR(n,e,t,r){return v(this,null,function*(){let i=yield kB(n.localStore,Un(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield XB(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&QA(n.remoteStore,i),a})}function XB(n,e,t,r,i){return v(this,null,function*(){n.Ka=(p,y,w)=>function(x,M,j,W){return v(this,null,function*(){let Q=M.view.ma(j);Q.ns&&(Q=yield rA(x.localStore,M.query,!1).then(({documents:C})=>M.view.ma(C,Q)));let le=W&&W.targetChanges.get(M.targetId),ke=W&&W.targetMismatches.get(M.targetId)!=null,ne=M.view.applyChanges(Q,x.isPrimaryClient,le,ke);return uA(x,M.targetId,ne.wa),ne.snapshot})}(n,p,y,w);let o=yield rA(n.localStore,e,!0),s=new U_(e,o.Ts),a=s.ma(o.documents),c=zu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);uA(n,t,l.wa);let h=new B_(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function e$(n,e,t){return v(this,null,function*(){let r=te(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!ef(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield T_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&cI(r.remoteStore,i.targetId),z_(r,i.targetId)}).catch(Xu))):(z_(r,i.targetId),yield T_(r.localStore,i.targetId,!0))})}function t$(n,e){return v(this,null,function*(){let t=te(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),cI(t.remoteStore,r.targetId))})}function n$(n,e,t){return v(this,null,function*(){let r=c$(n);try{let i=yield function(s,a){let c=te(s),l=ct.now(),h=a.reduce((w,S)=>w.add(S.key),ge()),p,y;return c.persistence.runTransaction("Locally write mutations","readwrite",w=>{let S=mr(),x=ge();return c.cs.getEntries(w,h).next(M=>{S=M,S.forEach((j,W)=>{W.isValidDocument()||(x=x.add(j))})}).next(()=>c.localDocuments.getOverlayedDocuments(w,S)).next(M=>{p=M;let j=[];for(let W of a){let Q=cB(W,p.get(W.key).overlayedDocument);Q!=null&&j.push(new yr(W.key,Q,IA(Q.value.mapValue),Zi.exists(!0)))}return c.mutationQueue.addMutationBatch(w,l,j,a)}).next(M=>{y=M;let j=M.applyToLocalDocumentSet(p,x);return c.documentOverlayCache.saveOverlays(w,M.batchId,j)})}).then(()=>({batchId:y.batchId,changes:MA(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.Ba[s.currentUser.toKey()];l||(l=new Ue(Ee)),l=l.insert(a,c),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield nc(r,i.changes),yield of(r.remoteStore)}catch(i){let o=fI(i,"Failed to persist write");t.reject(o)}})}function iR(n,e){return v(this,null,function*(){let t=te(n);try{let r=yield NB(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(Te(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Te(s.va):i.removedDocuments.size>0&&(Te(s.va),s.va=!1))}),yield nc(t,r,e)}catch(r){yield Xu(r)}})}function aA(n,e,t){let r=te(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=te(s);c.onlineState=a;let l=!1;c.queries.forEach((h,p)=>{for(let y of p.j_)y.Z_(a)&&(l=!0)}),l&&pI(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function r$(n,e,t){return v(this,null,function*(){let r=te(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Ue(G.comparator);s=s.insert(o,pn.newNoDocument(o,ie.min()));let a=ge().add(o),c=new Ah(ie.min(),new Map,new Ue(Ee),s,a);yield iR(r,c),r.Oa=r.Oa.remove(o),r.Na.delete(e),gI(r)}else yield T_(r.localStore,e,!1).then(()=>z_(r,e,t)).catch(Xu)})}function i$(n,e){return v(this,null,function*(){let t=te(n),r=e.batch.batchId;try{let i=yield xB(t.localStore,e);sR(t,r,null),oR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield nc(t,i)}catch(i){yield Xu(i)}})}function o$(n,e,t){return v(this,null,function*(){let r=te(n);try{let i=yield function(s,a){let c=te(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(Te(p!==null),h=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})}(r.localStore,e);sR(r,e,t),oR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield nc(r,i)}catch(i){yield Xu(i)}})}function oR(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function sR(n,e,t){let r=te(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function z_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||aR(n,r)})}function aR(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(cI(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),gI(n))}function uA(n,e,t){for(let r of t)r instanceof $h?(n.La.addReference(r.key,e),s$(n,r)):r instanceof Hh?($("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||aR(n,r.key)):X()}function s$(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||($("SyncEngine","New document in limbo: "+t),n.xa.add(r),gI(n))}function gI(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new G(Oe.fromString(e)),r=n.qa.next();n.Na.set(r,new $_(t)),n.Oa=n.Oa.insert(t,r),QA(n.remoteStore,new qu(Un(sI(t.path)),r,"TargetPurposeLimboResolution",mA.oe))}}function nc(n,e,t){return v(this,null,function*(){let r=te(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{s.push(r.Ka(c,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(l){i.push(l);let p=E_.Wi(c.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(c,l){return v(this,null,function*(){let h=te(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>N.forEach(l,y=>N.forEach(y.$i,w=>h.persistence.referenceDelegate.addReference(p,y.targetId,w)).next(()=>N.forEach(y.Ui,w=>h.persistence.referenceDelegate.removeReference(p,y.targetId,w)))))}catch(p){if(!ec(p))throw p;$("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let y=p.targetId;if(!p.fromCache){let w=h.os.get(y),S=w.snapshotVersion,x=w.withLastLimboFreeSnapshotVersion(S);h.os=h.os.insert(y,x)}}})}(r.localStore,o))})}function a$(n,e){return v(this,null,function*(){let t=te(n);if(!t.currentUser.isEqual(e)){$("SyncEngine","User change. New user:",e.toKey());let r=yield WA(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(c=>{c.reject(new U(R.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield nc(t,r.hs)}})}function u$(n,e){let t=te(n),r=t.Na.get(e);if(r&&r.va)return ge().add(r.key);{let i=ge(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function uR(n){let e=te(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=iR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=u$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=r$.bind(null,e),e.Ca.d_=QB.bind(null,e.eventManager),e.Ca.$a=YB.bind(null,e.eventManager),e}function c$(n){let e=te(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=i$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=o$.bind(null,e),e}var cA=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return v(this,null,function*(){this.serializer=nf(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return MB(this.persistence,new D_,t.initialUser,this.serializer)}Ga(t){return new __(w_.Zr,this.serializer)}Wa(t){return new S_}terminate(){return v(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var l$=(()=>{class n{initialize(t,r){return v(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>aA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=a$.bind(null,this.syncEngine),yield KB(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new L_}()}createDatastore(t){let r=nf(t.databaseInfo.databaseId),i=function(s){return new M_(s)}(t.databaseInfo);return function(s,a,c,l){return new P_(s,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new k_(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>aA(this.syncEngine,r,0),function(){return kh.D()?new kh:new A_}())}createSyncEngine(t,r){return function(o,s,a,c,l,h,p){let y=new H_(o,s,a,c,l,h);return p&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return v(this,null,function*(){var t,r;yield function(o){return v(this,null,function*(){let s=te(o);$("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield tc(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var zh=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):pr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var q_=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ot.UNAUTHENTICATED,this.clientId=wh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>v(this,null,function*(){$("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>($("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new fn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=fI(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Ev(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),$("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>v(this,null,function*(){r.isEqual(i)||(yield WA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function lA(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield d$(n);$("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>iA(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>iA(e.remoteStore,i)),n._onlineComponents=e})}function d$(n){return v(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){$("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Ev(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===R.FAILED_PRECONDITION||i.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Fs("Error using user provided cache. Falling back to memory cache: "+t),yield Ev(n,new cA)}}else $("FirestoreClient","Using default OfflineComponentProvider"),yield Ev(n,new cA);return n._offlineComponents})}function cR(n){return v(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?($("FirestoreClient","Using user provided OnlineComponentProvider"),yield lA(n,n._uninitializedComponentsProvider._online)):($("FirestoreClient","Using default OnlineComponentProvider"),yield lA(n,new l$))),n._onlineComponents})}function h$(n){return cR(n).then(e=>e.syncEngine)}function lR(n){return v(this,null,function*(){let e=yield cR(n),t=e.eventManager;return t.onListen=ZB.bind(null,e.syncEngine),t.onUnlisten=e$.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=JB.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=t$.bind(null,e.syncEngine),t})}function f$(n,e,t={}){let r=new fn;return n.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return function(o,s,a,c,l){let h=new zh({next:y=>{h.Za(),s.enqueueAndForget(()=>nR(o,p));let w=y.docs.has(a);!w&&y.fromCache?l.reject(new U(R.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&y.fromCache&&c&&c.source==="server"?l.reject(new U(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(y)},error:y=>l.reject(y)}),p=new Bh(sI(a.path),h,{includeMetadataChanges:!0,_a:!0});return tR(o,p)}(yield lR(n),n.asyncQueue,e,t,r)})),r.promise}function p$(n,e,t={}){let r=new fn;return n.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return function(o,s,a,c,l){let h=new zh({next:y=>{h.Za(),s.enqueueAndForget(()=>nR(o,p)),y.fromCache&&c.source==="server"?l.reject(new U(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(y)},error:y=>l.reject(y)}),p=new Bh(a,h,{includeMetadataChanges:!0,_a:!0});return tR(o,p)}(yield lR(n),n.asyncQueue,e,t,r)})),r.promise}function dR(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var dA=new Map;function hR(n,e,t){if(!t)throw new U(R.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function g$(n,e,t,r){if(e===!0&&r===!0)throw new U(R.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function hA(n){if(!G.isDocumentKey(n))throw new U(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function fA(n){if(G.isDocumentKey(n))throw new U(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function sf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":X()}function Ws(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new U(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=sf(n);throw new U(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var qh=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new U(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new U(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}g$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new U(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new U(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new U(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ks=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new U(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new U(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Cv;switch(r.type){case"firstParty":return new Sv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new U(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return v(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=dA.get(t);r&&($("ComponentProvider","Removing Datastore"),dA.delete(t),r.terminate())}(this),Promise.resolve()}};function fR(n,e,t,r={}){var i;let o=(n=Ws(n,Ks))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Fs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=ot.MOCK_USER;else{a=kb(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new U(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new ot(l)}n._authCredentials=new Dv(new Ih(a,c))}}var Qs=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},zt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new li(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},li=class n extends Qs{constructor(e,t,r){super(e,t,sI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new zt(this.firestore,null,new G(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function pR(n,e,...t){if(n=at(n),hR("collection","path",e),n instanceof Ks){let r=Oe.fromString(e,...t);return fA(r),new li(n,null,r)}{if(!(n instanceof zt||n instanceof li))throw new U(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Oe.fromString(e,...t));return fA(r),new li(n.firestore,null,r)}}function mI(n,e,...t){if(n=at(n),arguments.length===1&&(e=wh.newId()),hR("doc","path",e),n instanceof Ks){let r=Oe.fromString(e,...t);return hA(r),new zt(n,null,new G(r))}{if(!(n instanceof zt||n instanceof li))throw new U(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Oe.fromString(e,...t));return hA(r),new zt(n.firestore,n instanceof li?n.converter:null,new G(r))}}var Gh=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Fh(this,"async_queue_retry"),this.Vu=()=>{let r=wv();r&&$("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=wv();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=wv();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new fn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return v(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ec(e))throw e;$("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw pr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=F_.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&X()}verifyOperationInProgress(){}wu(){return v(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};var Ys=class extends Ks{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Gh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return v(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Gh(e),this._firestoreClient=void 0,yield e}})}};function gR(n,e){let t=typeof n=="object"?n:ys(),r=typeof n=="string"?n:e||"(default)",i=gu(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=Ob("firestore");o&&fR(i,...o)}return i}function yI(n){if(n._terminated)throw new U(R.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||m$(n),n._firestoreClient}function m$(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,l,h){return new Nv(a,c,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,dR(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new q_(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}var Ku=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(It.fromBase64String(e))}catch(t){throw new U(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(It.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Qu=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new U(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Wh=class{constructor(e){this._methodName=e}};var Yu=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new U(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new U(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ee(this._lat,e._lat)||Ee(this._long,e._long)}};var Zu=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var y$=/^__.*__$/,G_=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new yr(e,this.data,this.fieldMask,t,this.fieldTransforms):new io(e,this.data,t,this.fieldTransforms)}};function mR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X()}}var W_=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Kh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(mR(this.Cu)&&y$.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},K_=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||nf(e)}Qu(e,t,r,i=!1){return new W_({Cu:e,methodName:t,qu:r,path:Ht.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function yR(n){let e=n._freezeSettings(),t=nf(n._databaseId);return new K_(n._databaseId,!!e.ignoreUndefinedProperties,t)}function v$(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);IR("Data must be an object, but it was:",s,r);let a=vR(r,s),c,l;if(o.merge)c=new Ln(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let y=I$(e,p,t);if(!s.contains(y))throw new U(R.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);E$(h,y)||h.push(y)}c=new Ln(h),l=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=s.fieldTransforms;return new G_(new hn(a),c,l)}function _$(n,e,t,r=!1){return vI(t,n.Qu(r?4:3,e))}function vI(n,e){if(_R(n=at(n)))return IR("Unsupported field value:",e,n),vR(n,e);if(n instanceof Wh)return function(r,i){if(!mR(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=vI(a,i.Lu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=at(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return iB(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=ct.fromDate(r);return{timestampValue:Nh(i.serializer,o)}}if(r instanceof ct){let o=new ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Nh(i.serializer,o)}}if(r instanceof Yu)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ku)return{bytesValue:UA(i.serializer,r._byteString)};if(r instanceof zt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:uI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Zu)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return aI(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${sf(r)}`)}(n,e)}function vR(n,e){let t={};return yA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Js(n,(r,i)=>{let o=vI(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function _R(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ct||n instanceof Yu||n instanceof Ku||n instanceof zt||n instanceof Wh||n instanceof Zu)}function IR(n,e,t){if(!_R(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=sf(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function I$(n,e,t){if((e=at(e))instanceof Qu)return e._internalPath;if(typeof e=="string")return wR(n,e);throw Kh("Field path arguments must be of type string or ",n,!1,void 0,t)}var w$=new RegExp("[~\\*/\\[\\]]");function wR(n,e,t){if(e.search(w$)>=0)throw Kh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Qu(...e.split("."))._internalPath}catch{throw Kh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Kh(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new U(R.INVALID_ARGUMENT,a+n+c)}function E$(n,e){return n.some(t=>t.isEqual(e))}var Qh=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Q_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(_I("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Q_=class extends Qh{data(){return super.data()}};function _I(n,e){return typeof e=="string"?wR(n,e):e instanceof Qu?e._internalPath:e._delegate._internalPath}function C$(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new U(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ju=class{},Y_=class extends Ju{};function ER(n,e,...t){let r=[];e instanceof Ju&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof Z_).length,a=o.filter(c=>c instanceof Yh).length;if(s>1||s>0&&a>0)throw new U(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Yh=class n extends Y_{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return DR(e._query,t),new Qs(e.firestore,e.converter,qv(e._query,t))}_parse(e){let t=yR(e.firestore);return function(o,s,a,c,l,h,p){let y;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new U(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){gA(p,h);let w=[];for(let S of p)w.push(pA(c,o,S));y={arrayValue:{values:w}}}else y=pA(c,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||gA(p,h),y=_$(a,s,p,h==="in"||h==="not-in");return We.create(l,h,y)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function CR(n,e,t){let r=e,i=_I("where",n);return Yh._create(i,r,t)}var Z_=class n extends Ju{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:gn.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)DR(s,c),s=qv(s,c)}(e._query,t),new Qs(e.firestore,e.converter,qv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function pA(n,e,t){if(typeof(t=at(t))=="string"){if(t==="")throw new U(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!TA(e)&&t.indexOf("/")!==-1)throw new U(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Oe.fromString(t));if(!G.isDocumentKey(r))throw new U(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return US(n,new G(r))}if(t instanceof zt)return US(n,t._key);throw new U(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sf(t)}.`)}function gA(n,e){if(!Array.isArray(n)||n.length===0)throw new U(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function DR(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new U(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new U(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var J_=class{convertValue(e,t="none"){switch(eo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(di(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw X()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Js(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Pe(s.doubleValue));return new Zu(o)}convertGeoPoint(e){return new Yu(Pe(e.latitude),Pe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=nI(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp($u(e));default:return null}}convertTimestamp(e){let t=gr(e);return new ct(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Oe.fromString(e);Te(GA(r));let i=new bh(r.get(1),r.get(3)),o=new G(r.popFirst(5));return i.isEqual(t)||pr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function D$(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Yi=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Zh=class extends Qh{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ks(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(_I("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},ks=class extends Zh{data(e={}){return super.data(e)}},X_=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Yi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ks(this._firestore,this._userDataWriter,r.key,r,new Yi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new U(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new ks(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Yi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new ks(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Yi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:b$(a.type),doc:c,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function b$(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X()}}function bR(n){n=Ws(n,zt);let e=Ws(n.firestore,Ys);return f$(yI(e),n._key).then(t=>S$(e,n,t))}var Jh=class extends J_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ku(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new zt(this.firestore,null,t)}};function TR(n){n=Ws(n,Qs);let e=Ws(n.firestore,Ys),t=yI(e),r=new Jh(e);return C$(n._query),p$(t,n._query).then(i=>new X_(e,r,n,i))}function SR(n,e){let t=Ws(n.firestore,Ys),r=mI(n),i=D$(n.converter,e);return T$(t,[v$(yR(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Zi.exists(!1))]).then(()=>r)}function T$(n,e){return function(r,i){let o=new fn;return r.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return n$(yield h$(r),i,o)})),o.promise}(yI(n),e)}function S$(n,e,t){let r=t.docs.get(e._key),i=new Jh(n);return new Zh(n,i,e._key,r,new Yi(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Zs=i})(ni),ti(new Xt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Ys(new bv(r.getProvider("auth-internal")),new Rv(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new U(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bh(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Je(FS,"4.7.3",e),Je(FS,"4.7.3","esm2017")})();var so=class{constructor(e){return e}},AR="firestore",II=class{constructor(){return mu(AR)}};var wI=new q("angularfire2.firestore-instances");function A$(n,e){let t=Od(AR,n,e);return t&&new so(t)}function R$(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new so(r)}}var M$={provide:II,deps:[[new pt,wI]]},x$={provide:so,useFactory:A$,deps:[[new pt,wI],ur]};function RR(n,...e){return Je("angularfire",Bi.full,"fst"),Cn([x$,M$,{provide:wI,useFactory:R$(n),multi:!0,deps:[Ce,et,Is,$i,[new pt,bu],[new pt,_s],...e]}])}var MR=ut(SR,!0);var af=ut(pR,!0);var xR=ut(mI,!0);var NR=ut(bR,!0);var EI=ut(TR,!0);var PR=ut(gR,!0);var OR=ut(ER,!0);var kR=ut(CR,!0);var ea=(()=>{class n{firestore;constructor(t){this.firestore=t}normalize(t,r){return{id:r,text:String(t.text??""),options:Array.isArray(t.options)?t.options:[],correct:Number(t.correct??0),topic:String(t.topic??""),theoryLink:String(t.theoryLink??""),task:String(t.task??""),hint:String(t.hint??"")}}getAllQuestions(){return v(this,null,function*(){return(yield EI(af(this.firestore,"questions"))).docs.map(r=>this.normalize(r.data(),r.id))})}saveAttempt(t,r){return v(this,null,function*(){return(yield MR(af(this.firestore,"attempts"),ce(F({},r),{userId:t,createdAt:Date.now()}))).id})}getAttemptById(t){return v(this,null,function*(){let r=xR(this.firestore,"attempts",t),i=yield NR(r);if(!i.exists())return null;let o=i.data();return F({id:i.id},o)})}getAttempts(t){return v(this,null,function*(){let r=OR(af(this.firestore,"attempts"),kR("userId","==",t));return(yield EI(r)).docs.map(o=>{let s=o.data();return F({id:o.id},s)})})}static \u0275fac=function(r){return new(r||n)(Y(so))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var FR=(()=>{class n{baseQueue=[];baseIndex=0;extraPools=new Map;pendingExtras=[];extrasActiveTopic=null;extrasWrongCount=0;used=new Set;weakTopics=new Set;shuffle(t){let r=[...t];for(let i=r.length-1;i>0;i--){let o=Math.floor(Math.random()*(i+1));[r[i],r[o]]=[r[o],r[i]]}return r}bootstrap(t){let r=new Map;for(let o of t){let s=o.topic||"";r.has(s)||r.set(s,[]);let a=r.get(s);a&&a.push(o)}let i=this.shuffle(Array.from(r.keys()));this.baseQueue=[],this.extraPools.clear();for(let o of i){let s=r.get(o);if(!s||s.length===0)continue;let a=this.shuffle(s),[c,...l]=a;this.baseQueue.push(c),this.extraPools.set(o,l)}this.baseIndex=0,this.pendingExtras=[],this.extrasActiveTopic=null,this.extrasWrongCount=0,this.used.clear(),this.weakTopics.clear()}getNext(){if(this.pendingExtras.length>0){let t=this.pendingExtras.shift();return t?(t.id&&this.used.add(t.id),{q:t,isExtra:!0}):null}if(this.baseIndex<this.baseQueue.length){let t=this.baseQueue[this.baseIndex++];return t.id&&this.used.add(t.id),{q:t,isExtra:!1}}return null}handleAnswer(t,r,i){let o=t.correct===r,s=t.topic;if(i)return o||this.extrasWrongCount++,this.pendingExtras.length===0&&(this.extrasActiveTopic&&this.extrasWrongCount>=1&&this.weakTopics.add(this.extrasActiveTopic),this.extrasActiveTopic=null,this.extrasWrongCount=0),o;if(!o){let c=(this.extraPools.get(s)??[]).filter(h=>h.id?!this.used.has(h.id):!0),l=this.shuffle(c).slice(0,2);l.length>0?(this.pendingExtras.push(...l),this.extrasActiveTopic=s,this.extrasWrongCount=0):this.weakTopics.add(s)}return o}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function O$(n,e){if(n&1){let t=Pt();V(0,"div")(1,"label",7)(2,"input",8),Rn("ngModelChange",function(i){Tt(t);let o=me(2);return tr(o.chosen,i)||(o.chosen=i),St(i)}),O(),B(3),O()()}if(n&2){let t=e.$implicit,r=e.index,i=me(2);K(2),An("ngModel",i.chosen),Ie("value",r),K(),Ot(" ",t," ")}}function k$(n,e){if(n&1){let t=Pt();V(0,"div",2)(1,"h3"),B(2),O(),je(3,O$,4,3,"div",3),V(4,"div",4)(5,"button",5),Se("click",function(){Tt(t);let i=me();return St(i.answer())}),B(6," \u041E\u0442\u0432\u0435\u0442\u0438\u0442\u044C "),O(),V(7,"button",6),Se("click",function(){Tt(t);let i=me();return St(i.finishEarly())}),B(8,"\u041F\u0440\u0435\u0440\u0432\u0430\u0442\u044C \u0442\u0435\u0441\u0442"),O()()()}if(n&2){let t=me();K(2),Zo(t.current.q.text),K(),Ie("ngForOf",t.current.q.options),K(2),Ie("disabled",t.chosen===null)}}function F$(n,e){n&1&&(V(0,"p"),B(1," \u0410\u0432\u0442\u043E\u0440\u0438\u0437\u0430\u0446\u0438\u044F \u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442... \u0423\u0432\u044B, \u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D \u0442\u043E\u043B\u044C\u043A\u043E \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442 \u0431\u0435\u0437 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F. "),O())}function V$(n,e){if(n&1){let t=Pt();At(0),V(1,"button",6),Se("click",function(){let i=Tt(t).ngIf,o=me(2);return St(o.saveAndOpen(i.uid))}),B(2," \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0438 \u043E\u0442\u043A\u0440\u044B\u0442\u044C \u043E\u0431\u0437\u043E\u0440 "),O(),Rt()}}function L$(n,e){if(n&1){let t=Pt();V(0,"div",2)(1,"h3"),B(2,"\u0422\u0435\u0441\u0442 \u0437\u0430\u0432\u0435\u0440\u0448\u0451\u043D"),O(),V(3,"p"),B(4),O(),je(5,F$,2,0,"ng-template",null,0,oD),V(7,"div",4),je(8,V$,3,0,"ng-container",9),Hr(9,"async"),V(10,"button",6),Se("click",function(){Tt(t);let i=me();return St(i.finishEarly())}),B(11," \u0412\u044B\u0439\u0442\u0438 \u0431\u0435\u0437 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F "),O()()()}if(n&2){let t=rD(6),r=me();K(4),Pi("\u041F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u044B\u0445 \u043E\u0442\u0432\u0435\u0442\u043E\u0432: ",r.score," \u0438\u0437 ",r.answers.length,""),K(4),Ie("ngIf",zr(9,4,r.user$))("ngIfElse",t)}}var DI=(()=>{class n{quiz;backend;router;auth;user$;current=null;chosen=null;answers=[];score=0;finished=!1;savedAttemptId=null;constructor(t,r,i,o){this.quiz=t,this.backend=r,this.router=i,this.auth=o,this.user$=oS(this.auth)}ngOnInit(){return v(this,null,function*(){let t=yield this.backend.getAllQuestions();this.quiz.bootstrap(t),this.next()})}answer(){if(!this.current||this.chosen===null)return;let t=this.quiz.handleAnswer(this.current.q,this.chosen,this.current.isExtra);if(!this.current.q.id)throw new Error("\u0423 \u0432\u043E\u043F\u0440\u043E\u0441\u0430 \u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 id");this.answers.push({questionId:this.current.q.id,chosen:this.chosen,correct:t,isExtra:this.current.isExtra}),t&&this.score++,this.chosen=null,this.next()}next(){let t=this.quiz.getNext();if(!t){this.finished=!0,this.current=null;return}this.current=t}finishEarly(){this.router.navigate(["/dashboard"])}saveAndOpen(t){return v(this,null,function*(){let r={userId:t,answers:this.answers,createdAt:Date.now(),score:this.score,total:this.answers.length,weakTopics:Array.from(this.quiz.weakTopics)};this.savedAttemptId=yield this.backend.saveAttempt(t,r),this.router.navigate(["/review",this.savedAttemptId])})}static \u0275fac=function(r){return new(r||n)(L(FR),L(ea),L(xe),L(hr))};static \u0275cmp=tt({type:n,selectors:[["app-quiz"]],standalone:!0,features:[nt],decls:2,vars:2,consts:[["guest",""],["class","quiz",4,"ngIf"],[1,"quiz"],[4,"ngFor","ngForOf"],[1,"buttons"],[1,"quiz-button",3,"click","disabled"],[1,"quiz-button",3,"click"],[1,"option"],["type","radio","name","answer",3,"ngModelChange","ngModel","value"],[4,"ngIf","ngIfElse"]],template:function(r,i){r&1&&je(0,k$,9,3,"div",1)(1,L$,12,6,"div",1),r&2&&(Ie("ngIf",!i.finished&&i.current),K(),Ie("ngIf",i.finished))},dependencies:[Mt,es,Kr,Qr,ui,ai,dv,As,Wi],styles:[".quiz[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;padding:2rem;background-color:#fff;border-radius:16px}.quiz[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1rem;font-size:2rem}.quiz[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:1.75rem}.quiz[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%], .quiz[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{cursor:pointer}.quiz[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2rem;flex-wrap:wrap;margin-top:1rem}.quiz[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .quiz-button[_ngcontent-%COMP%]{padding:.8rem 1.6rem;background-color:#e9e8e8d9;border-radius:16px;font-size:1.6rem}"]})}return n})();function j$(n,e){if(n&1&&(V(0,"div",6)(1,"p")(2,"strong"),B(3),O(),B(4),O(),V(5,"p"),B(6),O(),V(7,"p"),B(8),O()()),n&2){let t=e.ngIf,r=me(),i=r.$implicit,o=r.index;Ie("ngClass",i.correct?"correct":"wrong"),K(3),Ot("\u0412\u043E\u043F\u0440\u043E\u0441 ",o+1,":"),K(),Ot(" ",t.text," "),K(2),Ot("\u0412\u0430\u0448 \u043E\u0442\u0432\u0435\u0442: ",t.options[i.chosen]||"\u2014",""),K(2),Ot("\u041F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u044B\u0439 \u043E\u0442\u0432\u0435\u0442: ",t.options[t.correct]||"\u2014","")}}function U$(n,e){if(n&1&&(V(0,"div"),je(1,j$,9,5,"div",5),O()),n&2){let t=e.$implicit,r=me(2);K(),Ie("ngIf",r.mapQ[t.questionId])}}function B$(n,e){if(n&1&&(V(0,"div")(1,"a",12),B(2,"\u0422\u0435\u043E\u0440\u0438\u044F \u043F\u043E \u0442\u0435\u043C\u0435"),O()()),n&2){let t=me().ngIf;K(),Ie("href",t.theoryLink,Ng)}}function $$(n,e){if(n&1){let t=Pt();V(0,"button",15),Se("click",function(){Tt(t);let i=me(3).$implicit,o=me(3);return St(o.toggleHint(i))}),B(1),O()}if(n&2){let t=me(3).$implicit,r=me(3);K(),Ot(" ",r.hintVisibleByTopic[t]?"\u0421\u043A\u0440\u044B\u0442\u044C \u0440\u0435\u0448\u0435\u043D\u0438\u0435":"\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u0440\u0435\u0448\u0435\u043D\u0438\u0435"," ")}}function H$(n,e){if(n&1&&(V(0,"pre"),B(1),O()),n&2){let t=me(2).ngIf;K(),Zo(t.hint)}}function z$(n,e){if(n&1&&(V(0,"div",13)(1,"p")(2,"strong"),B(3,"\u0417\u0430\u0434\u0430\u0447\u0430:"),O(),B(4),O(),je(5,$$,2,1,"button",14)(6,H$,2,1,"pre",10),O()),n&2){let t=me().ngIf,r=me().$implicit,i=me(3);K(4),Ot(" ",t.task,""),K(),Ie("ngIf",t.hint),K(),Ie("ngIf",t.hint&&i.hintVisibleByTopic[r])}}function q$(n,e){if(n&1&&(At(0),je(1,B$,3,1,"div",10)(2,z$,7,3,"div",11),Rt()),n&2){let t=e.ngIf;K(),Ie("ngIf",t.theoryLink),K(),Ie("ngIf",t.task)}}function G$(n,e){if(n&1&&(V(0,"div",9)(1,"h4"),B(2),O(),je(3,q$,3,2,"ng-container",10),O()),n&2){let t=e.$implicit,r=me(3);K(2),Zo(t),K(),Ie("ngIf",r.topicInfo[t])}}function W$(n,e){if(n&1&&(V(0,"div",7)(1,"h3"),B(2,"\u0420\u0435\u043A\u043E\u043C\u0435\u043D\u0434\u0443\u0435\u043C \u043F\u043E\u0434\u0442\u044F\u043D\u0443\u0442\u044C \u0442\u0435\u043C\u044B"),O(),je(3,G$,4,2,"div",8),O()),n&2){let t=me(2);K(3),Ie("ngForOf",t.attempt.weakTopics)}}function K$(n,e){if(n&1){let t=Pt();V(0,"div",1)(1,"h2"),B(2,"\u041E\u0431\u0437\u043E\u0440 \u043F\u043E\u043F\u044B\u0442\u043A\u0438"),O(),V(3,"p"),B(4),O(),je(5,U$,2,1,"div",2)(6,W$,4,1,"div",3),V(7,"button",4),Se("click",function(){Tt(t);let i=me();return St(i.toDashboard())}),B(8,"\u041D\u0430 \u0433\u043B\u0430\u0432\u043D\u0443\u044E"),O()()}if(n&2){let t=me();K(4),Pi("\u0420\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442: ",t.attempt.score," / ",t.attempt.total,""),K(),Ie("ngForOf",t.attempt.answers),K(),Ie("ngIf",t.attempt.weakTopics==null?null:t.attempt.weakTopics.length)}}var VR=(()=>{class n{backend;route;router;attempt=null;mapQ={};topicInfo={};hintVisibleByTopic={};constructor(t,r,i){this.backend=t,this.route=r,this.router=i}ngOnInit(){return v(this,null,function*(){let t=this.route.snapshot.paramMap.get("attemptId");if(!t)return;let r=yield this.backend.getAttemptById(t);if(!r){alert("\u041F\u043E\u043F\u044B\u0442\u043A\u0430 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u0430"),this.router.navigate(["/dashboard"]);return}this.attempt=r;let i=yield this.backend.getAllQuestions();this.mapQ=i.reduce((o,s)=>(s.id&&(o[s.id]=s),o),{}),(r.weakTopics??[]).forEach(o=>{let s=i.find(a=>a.topic===o);s?this.topicInfo[o]={theoryLink:s.theoryLink,task:s.task,hint:s.hint}:this.topicInfo[o]={}})})}toggleHint(t){this.hintVisibleByTopic[t]=!this.hintVisibleByTopic[t]}toDashboard(){this.router.navigate(["/dashboard"])}static \u0275fac=function(r){return new(r||n)(L(ea),L(Pn),L(xe))};static \u0275cmp=tt({type:n,selectors:[["app-review"]],standalone:!0,features:[nt],decls:1,vars:1,consts:[["class","review",4,"ngIf"],[1,"review"],[4,"ngFor","ngForOf"],["class","study",4,"ngIf"],[1,"review-button",3,"click"],["class","card",3,"ngClass",4,"ngIf"],[1,"card",3,"ngClass"],[1,"study"],["class","study-item",4,"ngFor","ngForOf"],[1,"study-item"],[4,"ngIf"],["class","study-task",4,"ngIf"],["target","_blank",1,"theory",3,"href"],[1,"study-task"],["class","study-button",3,"click",4,"ngIf"],[1,"study-button",3,"click"]],template:function(r,i){r&1&&je(0,K$,9,4,"div",0),r&2&&Ie("ngIf",i.attempt)},dependencies:[Mt,DD,es,Kr],styles:[".review[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem;margin-bottom:3rem}.review[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;padding:2rem;background-color:#fff;border-radius:16px}.review[_ngcontent-%COMP%]   .correct[_ngcontent-%COMP%]{background-color:#d4edda;border:2px solid #28a745}.review[_ngcontent-%COMP%]   .wrong[_ngcontent-%COMP%]{background-color:#f8d7da;border:2px solid #dc3545}.review[_ngcontent-%COMP%]   .study[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.review[_ngcontent-%COMP%]   .study[_ngcontent-%COMP%]   .study-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem;padding:2rem;background-color:#fff;border-radius:16px}.review[_ngcontent-%COMP%]   .study[_ngcontent-%COMP%]   .study-item[_ngcontent-%COMP%]   .study-task[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;gap:1rem}.review[_ngcontent-%COMP%]   .study-button[_ngcontent-%COMP%]{padding:.8rem 1.6rem;border-radius:16px}.review[_ngcontent-%COMP%]   .review-button[_ngcontent-%COMP%]{align-self:center;padding:.8rem 1.6rem;border-radius:16px;background-color:#fff;font-size:1.5rem;font-weight:700}.theory[_ngcontent-%COMP%]{padding:.8rem 1.6rem;border-radius:16px;background-color:#e9e8e8d9}"]})}return n})();function Q$(n,e){if(n&1){let t=Pt();V(0,"li")(1,"strong"),B(2),O(),B(3),V(4,"button",2),Se("click",function(){let i=Tt(t).$implicit,o=me(2);return St(o.viewAttempt(i.id))}),B(5," \u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C "),O()()}if(n&2){let t=e.$implicit,r=me(2);K(2),Ot("\u041F\u043E\u043F\u044B\u0442\u043A\u0430 \u043E\u0442 ",r.formatDate(t.createdAt),""),K(),Pi(" \u2014 \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442: ",t.score,"/",t.total," ")}}function Y$(n,e){if(n&1){let t=Pt();V(0,"div",1)(1,"p")(2,"strong"),B(3,"Email:"),O(),B(4),O(),V(5,"button",2),Se("click",function(){Tt(t);let i=me();return St(i.logout())}),B(6,"\u0412\u044B\u0439\u0442\u0438"),O(),V(7,"h3"),B(8,"\u0418\u0441\u0442\u043E\u0440\u0438\u044F \u043F\u043E\u043F\u044B\u0442\u043E\u043A:"),O(),V(9,"ul",3),je(10,Q$,6,3,"li",4),O()()}if(n&2){let t=e.ngIf,r=me();K(4),Ot(" ",t.email,""),K(6),Ie("ngForOf",r.attempts)}}var LR=(()=>{class n{backend;router;auth;user$;attempts=[];constructor(t,r,i){this.backend=t,this.router=r,this.auth=i,this.user$=this.auth.user$}ngOnInit(){this.user$.subscribe(t=>v(this,null,function*(){if(!t){this.attempts=[];return}let r=yield this.backend.getAttempts(t.uid);this.attempts=r.sort((i,o)=>o.createdAt-i.createdAt)}))}formatDate(t){return new Date(t).toLocaleString()}viewAttempt(t){this.router.navigate(["/review",t])}logout(){return v(this,null,function*(){yield this.auth.logout(),this.router.navigate(["/dashboard"])})}static \u0275fac=function(r){return new(r||n)(L(ea),L(xe),L(en))};static \u0275cmp=tt({type:n,selectors:[["app-profile"]],standalone:!0,features:[nt],decls:4,vars:3,consts:[["class","profile-info",4,"ngIf"],[1,"profile-info"],[1,"profile-button",3,"click"],[1,"history"],[4,"ngFor","ngForOf"]],template:function(r,i){r&1&&(V(0,"h2"),B(1,"\u041B\u0438\u0447\u043D\u044B\u0439 \u043A\u0430\u0431\u0438\u043D\u0435\u0442"),O(),je(2,Y$,11,2,"div",0),Hr(3,"async")),r&2&&(K(2),Ie("ngIf",zr(3,1,i.user$)))},dependencies:[Mt,es,Kr,Qr,ui],styles:[".profile-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;gap:2rem}.profile-info[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.profile-info[_ngcontent-%COMP%]   .profile-button[_ngcontent-%COMP%]{padding:.8rem 2rem;background-color:#fff;border-radius:16px;font-size:1.5rem}#editName[_ngcontent-%COMP%]{display:flex;align-items:center}.history[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}"]})}return n})();var jR=()=>{let n=P(en),e=P(xe);return n.user$.pipe(rn(1),se(t=>t?!0:(e.navigate(["/dashboard"]),!1)))};var UR=(()=>{class n{auth;router;email="";password="";constructor(t,r){this.auth=t,this.router=r}loginEmail(){return v(this,null,function*(){try{yield this.auth.loginEmail(this.email,this.password),this.router.navigate(["/dashboard"])}catch(t){alert("\u041E\u0448\u0438\u0431\u043A\u0430 \u0432\u0445\u043E\u0434\u0430: "+t.message)}})}goRegister(){this.router.navigate(["/register"])}close(){this.router.navigate(["/dashboard"])}static \u0275fac=function(r){return new(r||n)(L(en),L(xe))};static \u0275cmp=tt({type:n,selectors:[["app-login"]],standalone:!0,features:[nt],decls:21,vars:2,consts:[[1,"login"],[3,"ngSubmit"],[1,"form-input"],["for","email"],["name","email","id","email","required","","type","email","autocomplete","username",3,"ngModelChange","ngModel"],["for","password"],["name","password","id","password","required","","type","password","autocomplete","current-password",3,"ngModelChange","ngModel"],["type","submit",1,"login-button"],[3,"click"],[1,"login-button",3,"click"]],template:function(r,i){r&1&&(V(0,"div",0)(1,"h2"),B(2,"\u0412\u0445\u043E\u0434"),O(),V(3,"form",1),Se("ngSubmit",function(){return i.loginEmail()}),V(4,"div",2)(5,"label",3),B(6,"Email"),O(),V(7,"input",4),Rn("ngModelChange",function(s){return tr(i.email,s)||(i.email=s),s}),O()(),V(8,"div",2)(9,"label",5),B(10,"\u041F\u0430\u0440\u043E\u043B\u044C"),O(),V(11,"input",6),Rn("ngModelChange",function(s){return tr(i.password,s)||(i.password=s),s}),O()(),V(12,"button",7),B(13,"\u0412\u043E\u0439\u0442\u0438"),O()(),V(14,"span"),B(15,"\u041D\u0435\u0442 \u0430\u043A\u043A\u0430\u0443\u043D\u0442\u0430?"),O(),V(16,"a",8),Se("click",function(){return i.goRegister()}),B(17,"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C\u0441\u044F"),O(),Ze(18,"hr"),V(19,"button",9),Se("click",function(){return i.close()}),B(20,"\u0417\u0430\u043A\u0440\u044B\u0442\u044C"),O()()),r&2&&(K(7),An("ngModel",i.email),K(4),An("ngModel",i.password))},dependencies:[Mt,ui,fh,ai,As,ch,Pu,Wi,Nu],styles:[".login[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem;background-color:#fff;padding:4rem;border-radius:16px}.login[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:2rem;font-size:3.5rem}.login[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]{padding:.8rem 2.5rem;font-size:1.6rem;border-radius:16px}.login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1.5rem}.login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.5rem;font-size:1.5rem}.login[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:100%}.login[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:.8rem 2.5rem;border:solid 2px #e9e8e8d9;border-radius:16px}"]})}return n})();var BR=(()=>{class n{auth;router;email="";password="";password2="";constructor(t,r){this.auth=t,this.router=r}register(){return v(this,null,function*(){if(this.password!==this.password2){alert("\u041F\u0430\u0440\u043E\u043B\u0438 \u043D\u0435 \u0441\u043E\u0432\u043F\u0430\u0434\u0430\u044E\u0442");return}try{yield this.auth.registerEmail(this.email,this.password),this.router.navigate(["/dashboard"])}catch(t){alert("\u041E\u0448\u0438\u0431\u043A\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438: "+t.message)}})}close(){this.router.navigate(["/dashboard"])}static \u0275fac=function(r){return new(r||n)(L(en),L(xe))};static \u0275cmp=tt({type:n,selectors:[["app-register"]],standalone:!0,features:[nt],decls:21,vars:3,consts:[[1,"register"],[3,"ngSubmit"],[1,"register-form"],["for","email"],["name","email","id","email","required","","type","email","autocomplete","email",3,"ngModelChange","ngModel"],["for","password"],["name","password","id","password","required","","type","password","autocomplete","new-password",3,"ngModelChange","ngModel"],["for","password2"],["name","password2","id","password2","required","","type","password","autocomplete","new-password",3,"ngModelChange","ngModel"],["type","submit",1,"register-button"],[1,"register-button",3,"click"]],template:function(r,i){r&1&&(V(0,"div",0)(1,"h2"),B(2,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F"),O(),V(3,"form",1),Se("ngSubmit",function(){return i.register()}),V(4,"div",2)(5,"label",3),B(6,"Email"),O(),V(7,"input",4),Rn("ngModelChange",function(s){return tr(i.email,s)||(i.email=s),s}),O()(),V(8,"div",2)(9,"label",5),B(10,"\u041F\u0430\u0440\u043E\u043B\u044C"),O(),V(11,"input",6),Rn("ngModelChange",function(s){return tr(i.password,s)||(i.password=s),s}),O()(),V(12,"div",2)(13,"label",7),B(14,"\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u0435 \u043F\u0430\u0440\u043E\u043B\u044C"),O(),V(15,"input",8),Rn("ngModelChange",function(s){return tr(i.password2,s)||(i.password2=s),s}),O()(),V(16,"button",9),B(17,"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C\u0441\u044F"),O()(),Ze(18,"hr"),V(19,"button",10),Se("click",function(){return i.close()}),B(20,"\u0417\u0430\u043A\u0440\u044B\u0442\u044C"),O()()),r&2&&(K(7),An("ngModel",i.email),K(4),An("ngModel",i.password),K(4),An("ngModel",i.password2))},dependencies:[Mt,ui,fh,ai,As,ch,Pu,Wi,Nu],styles:[".register[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem;background-color:#fff;padding:4rem;border-radius:16px}.register[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:2rem;font-size:3.5rem}.register[_ngcontent-%COMP%]   .register-button[_ngcontent-%COMP%]{padding:.8rem 2.5rem;font-size:1.6rem;border-radius:16px}.register[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1.5rem}.register[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .register-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.register[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.5rem;font-size:1.5rem}.register[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:100%}"]})}return n})();var $R=[{path:"",component:dS,children:[{path:"dashboard",component:hS},{path:"quiz",component:DI},{path:"quiz/:topicId",component:DI},{path:"review/:attemptId",component:VR},{path:"profile",component:LR,canActivate:[jR]},{path:"login",component:UR},{path:"register",component:BR},{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"**",redirectTo:"dashboard"}]}];var HR={production:!1,firebase:{apiKey:"AIzaSyApwiittngSJBLnqE1yk9UDeNKdR5u7Sdw",authDomain:"my-course-work-d1021.firebaseapp.com",projectId:"my-course-work-d1021",storageBucket:"my-course-work-d1021.firebasestorage.app",messagingSenderId:"1034370525552",appId:"1:1034370525552:web:b3d9cb27231c79db3047b5"}};var zR={providers:[lD({eventCoalescing:!0}),Db($R,Rb()),oT(()=>sT(HR.firebase)),iS(()=>aS()),RR(()=>PR())]};var qR=(()=>{class n{title="course-work";static \u0275fac=function(r){return new(r||n)};static \u0275cmp=tt({type:n,selectors:[["app-root"]],standalone:!0,features:[nt],decls:1,vars:0,template:function(r,i){r&1&&Ze(0,"router-outlet")},dependencies:[Mb,uu]})}return n})();PD(qR,zR).catch(n=>console.error(n));
